(function(e){function t(t){for(var i,s,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)s=r[d],o[s]&&m.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},a=[];function s(e){return r.p+"static/js/"+({}[e]||e)+"."+{"chunk-2d0a3577":"7d8a02b1","chunk-2d0a43df":"df63052e","chunk-2d0aab07":"ebe8e881","chunk-2d0abc00":"092f6c98","chunk-2d0ae937":"2d31487d","chunk-2d0aeb45":"9ab1989e","chunk-2d0afa49":"894dd6c5","chunk-2d0b2762":"9e6221d6","chunk-2d0b6187":"ff7161c1","chunk-2d0ba136":"820ced8a","chunk-2d0bb267":"10367478","chunk-2d0bcec1":"f4fefd41","chunk-2d0bff92":"4ecc3817","chunk-2d0c0494":"6ec7faf6","chunk-2d0c0a09":"b9a28591","chunk-2d0c1ed0":"2af7073f","chunk-2d0c4313":"2f4630c1","chunk-2d0c46d1":"a813533e","chunk-2d0c512b":"f57f5069","chunk-2d0cf16e":"4cb8f39a","chunk-2d0d056d":"84bb8590","chunk-2d0d0645":"d094d844","chunk-2d0d2f22":"297224ed","chunk-2d0d7e63":"6cf6ca13","chunk-2d0e1b57":"72f229b7","chunk-2d0e1fbe":"480a5937","chunk-2d0e22d6":"434bfa99","chunk-2d0e542a":"83d785e2","chunk-2d0e57ec":"e34ffafd","chunk-2d0e6553":"dacb1612","chunk-2d0ea098":"8811a352","chunk-2d208ac5":"f5f1f952","chunk-2d209408":"811711e0","chunk-2d20f745":"ea20bf60","chunk-2d20ff23":"431f53a0","chunk-2d2138c7":"45c42722","chunk-2d217e5b":"4dfb93f3","chunk-2d21dcd2":"21cf02b8","chunk-2d21f327":"f3d79b00","chunk-2d2214b3":"47d6d563","chunk-2d221a34":"6bf4608f","chunk-2d22502a":"ea32616f","chunk-2d228ca6":"bc0bd5c7","chunk-2d2295e9":"23ce0dbc","chunk-2d22c171":"7958e162","chunk-2d22c2b8":"f3a9c996","chunk-2d22ca58":"f21c3227","chunk-2d2311f7":"a4b574ca","chunk-2d2371be":"47d49904","chunk-2d237ee7":"a3b2a3e9","chunk-2d238465":"f19ae85e","chunk-7532b3ea":"9969a659","chunk-77155129":"d1a411b0"}[e]+".js"}function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=o[e]=[t,i]}));t.push(n[2]=i);var a,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=s(e),a=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+i+": "+a+")");s.type=i,s.request=a,n[1](s)}o[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:l})}),12e4);l.onerror=l.onload=a,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"025e":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return assert})),__webpack_require__.d(__webpack_exports__,"c",(function(){return compareVersions})),__webpack_require__.d(__webpack_exports__,"f",(function(){return pathJoin})),__webpack_require__.d(__webpack_exports__,"e",(function(){return mobileAndTabletcheck})),__webpack_require__.d(__webpack_exports__,"h",(function(){return url_regex})),__webpack_require__.d(__webpack_exports__,"g",(function(){return randId})),__webpack_require__.d(__webpack_exports__,"d",(function(){return escapeHTML})),__webpack_require__.d(__webpack_exports__,"a",(function(){return _clone}));var core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("aef6"),core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_string_ends_with__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es7_object_values__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("8615"),core_js_modules_es7_object_values__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es7_object_values__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6762"),core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es7_array_includes__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("2fdb"),core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_string_includes__WEBPACK_IMPORTED_MODULE_4__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_5__),_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1da1"),_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("3835"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("4917"),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_13__),_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("53ca"),axios__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_15__),Whenable=function(){this._emitted=!1,this._handlers=[]};function assert(e,t){if(!e){if(t=t||"Assertion failed","undefined"!==typeof Error)throw new Error(t);throw t}}function isTouchDevice(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}function compareVersions(v1,comparator,v2){if(comparator="="==comparator?"==":comparator,-1==["==","===","<","<=",">",">=","!=","!=="].indexOf(comparator))throw new Error("Invalid comparator. "+comparator);for(var v1parts=v1.split("."),v2parts=v2.split("."),maxLen=Math.max(v1parts.length,v2parts.length),part1,part2,cmp=0,i=0;i<maxLen&&!cmp;i++)part1=parseInt(v1parts[i],10)||0,part2=parseInt(v2parts[i],10)||0,part1<part2&&(cmp=1),part1>part2&&(cmp=-1);return eval("0"+comparator+cmp)}function pathJoin(){for(var e=[],t=0,n=arguments.length;t<n;t++)e=e.concat(arguments[t].split("/"));var i=[];for(t=0,n=e.length;t<n;t++){var o=e[t];o&&"."!==o&&(".."===o?i.pop():i.push(o))}return""===e[0]&&i.unshift(""),i.join("/")||(i.length?"/":".")}function dirName(e){return pathJoin(e,"..")}function mobilecheck(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function mobileAndTabletcheck(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}Whenable.prototype.emit=function(e){if(!this._emitted){var t;this._emitted=!0,this._e=e;while(t=this._handlers.pop())setTimeout(t.bind(null,e),0)}},Whenable.prototype.whenEmitted=function(e){e=this._checkHandler(e),this._emitted?setTimeout(e.bind(null,this._e),0):this._handlers.push(e)},Whenable.prototype._checkHandler=function(e){var t=Object(_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_14__["a"])(e);if("function"!=t){var n="A function may only be subsribed to the event, "+t+" was provided instead";throw new Error(n)}return e};var arrAnimals=["Aardvark","Albatross","Alligator","Alpaca","Ant","Anteater","Antelope","Ape","Armadillo","Ass_Donkey","Baboon","Badger","Barracuda","Bat","Bear","Beaver","Bee","Bison","Boa","Buffalo","Butterfly","Camel","Capybara","Caribou","Cassowary","Cat","Caterpillar","Cattle","Chamois","Cheetah","Chicken","Chimpanzee","Chinchilla","Chough","Clam","Cobra","Cockroach","Cod","Cormorant","Coyote","Crab","Crane","Crocodile","Crow","Curlew","Deer","Dinosaur","Dog","Dogfish","Dolphin","Donkey","Dotterel","Dove","Dragonfly","Duck","Dugong","Dunlin","Eagle","Echidna","Eel","Eland","Elephant","Elephantseal","Elk","Emu","Falcon","Ferret","Finch","Fish","Flamingo","Fox","Frog","Gaur","Gazelle","Gerbil","GiantPanda","Giraffe","Gnat","Gnu","Goat","Goose","Goldfinch","Goldfish","Gorilla","Goshawk","Grasshopper","Grouse","Guanaco","Guineafowl","Guineapig","Gull","Hamster","Hare","Hawk","Hedgehog","Heron","Herring","Hippopotamus","Hornet","Horse","Human","Hummingbird","Hyena","Ibex","Ibis","Jackal","Jaguar","Jay","Jellyfish","Kangaroo","Kingfisher","Koala","Komodo","Kookabura","Kouprey","Kudu","Lapwing","Lark","Lemur","Leopard","Lion","Llama","Lobster","Locust","Loris","Louse","Lyrebird","Magpie","Mallard","Manatee","Mandrill","Mantis","Marten","Meerkat","Mink","Mole","Mongoose","Monkey","Moose","Mouse","Mosquito","Mule","Narwhal","Newt","Nightingale","Octopus","Okapi","Opossum","Oryx","Ostrich","Otter","Owl","Ox","Oyster","Panther","Parrot","Partridge","Peafowl","Pelican","Penguin","Pheasant","Pig","Pigeon","PolarBear","Pony","Porcupine","Porpoise","PrairieDog","Quail","Quelea","Quetzal","Rabbit","Raccoon","Rail","Ram","Rat","Raven","Reddeer","Redpanda","Reindeer","Rhinoceros","Rook","Salamander","Salmon","SandDollar","Sandpiper","Sardine","Scorpion","Sealion","SeaUrchin","Seahorse","Seal","Shark","Sheep","Shrew","Skunk","Snail","Snake","Sparrow","Spider","Spoonbill","Squid","Squirrel","Starling","Stingray","Stinkbug","Stork","Swallow","Swan","Tapir","Tarsier","Termite","Tiger","Toad","Trout","Turkey","Turtle","Vicu�a","Viper","Vulture","Wallaby","Walrus","Wasp","Waterbuffalo","Weasel","Whale","Wolf","Wolverine","Wombat","Woodcock","Woodpecker","Worm","Wren","Yak","Zebra"],arrColours=["almond","amaranthine","amber","amethyst","antique","apple","apricot","aqua","aquamarine","argent","auburn","avocado","azure","babyblue","banana","battleshipgray","bay","beige","Bermudagreen","beryl","biceblue","bicegreen","bice","biscuit","bisque","black","blanchedalmond","blazeorange","blonde","bloodred","bluegreen","blueviolet","blue","blueberry","bone","bottlegreen","brass","brickred","bronzeyellow","bronze","brown","buckskin","buff","burgundy","burlywood","burntorange","burntsienna","burntumber","butterscotch","cadetblue","Cambridgeblue","canary","cardinal","carmine","carnation","carnelian","carroty","celadon","cerise","cerulean","chamois","champagne","charcoal","chartreuse","cherryred","chestnut","Chinesered","chocolate","cinereous","cinnabar","cinnamon","citrine","clairdelune","claret","coalblack","cobaltblue","cocoa","coffee","coolgray","Copenhagenblue","copper","coral","cornflowerblue","cornflower","cornsilk","cream","crimson","cupreous","cyan","daffodil","damask","dandelion","dovegray","duckeggblue","dun","Dodgerblue","eaudenil","ebony","ecru","eggshellblue","eggshell","electricblue","emeraldgreen","emerald","fawn","federalyellow","firebrick","fireenginered","flame","flamingo","flaxen","flesh","floralwhite","forestgreen","fuchsia","fuscous","gainsboro","gamboge","garnet","gentianblue","gentianviolet","geranium","ginger","glaucous","gold","goldenbrown","goldenrod","goldochre","grape","grassgreen","gray","green","grizzle","gules","gunmetalgray","hazel","heather","heliotrope","henna","hepatic","hoar","honey","honeydew","hotpink","huntergreen","iceblue","incarnadine","Indianred","indigo","internationalorange","irongray","ivory","jadegreen","jade","jet","jonquil","kellygreen","Kendalgreen","khaki","khakigreen","lapislazuli","laurelgreen","lavender","lemonchiffon","lemon","lilac","lime","Lincolngreen","linen","liver","loden","lovat","macaroniandcheese","madder","magenta","magicmint","magnolia","mahogany","malachite","maroon","mauve","mazarine","melon","midnightblue","mignonette","militarygrey","mint","mintcream","mistyrose","moccasin","mocha","mossgreen","mulberry","mustard","natural","navajowhite","navy","Nileblue","Nilegreen","oak","oatmeal","oceangrey","ochre","offwhite","oldgold","oldlace","olivedrab","olive","orange","orchid","outerspace","oxblood","Oxfordblue","oyster","pansy","paprika","Parisgreen","patina","peagreen","peach","peacockblue","pearlgray","pearly","periwinkle","perse","petrolblue","petunia","pewter","pillarboxred","pinegreen","pink","pistachiogreen","platinumblond","platinum","plum","Pompeianred","poppy","powderblue","primrose","Prussianblue","puce","puke","purple","purpure","quartz","quince","raspberry","rawsienna","redviolet","red","reseda","riflegreen","robin_seggblue","rose","rouge","royalblue","royalpurple","ruby","russet","rust","sable","saddlebrown","safetyorange","saffron","sagegreen","salmon","sand","sandy","sanguine","sapphire","sard","saxeblue","scarlet","schoolbusyellow","seagreen","seashell","sepia","shockingpink","sienna","silver","silvergray","skyblue","slate","slateblack","slateblue","slategray","smoke","snow","sorrel","springgreen","stammel","steelblue","stone","straw","strawberry","sulfur","sunflower","tan","tangerine","taupe","taxiyellow","teak","teal","terracotta","timberwolf","titian","topaz","towcolored","Turkeyred","turquoise","Tyrianpurple","ultramarine","umber","Vandykebrown","venetianred","verdant","vermilion","vert","violetred","violet","virid","viridian","vividorange","walnut","Wedgewoodblue","wheat","wheaten","white","wine","xanthic","yellow","zaffre"],expression=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,url_regex=new RegExp(expression);function debounce(e,t,n){var i;return function(){var o=this,a=arguments,s=function(){i=null,n||e.apply(o,a)},r=n&&!i;clearTimeout(i),i=setTimeout(s,t),r&&e.apply(o,a)}}function animalGenerator(){var e=arrAnimals[Math.floor(Math.random()*arrAnimals.length)].toLowerCase();return e}function colourGenerator(){var e=arrColours[Math.floor(Math.random()*arrColours.length)].toLowerCase();return e}function randId(){return Math.random().toString(36).substr(2,10)}function escapeHTML(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML}function _clone(e){if(!e)return e;var t,n,i;for(i in t=Array.isArray(e)?[]:{},e)n=e[i],t[i]="object"===Object(_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_14__["a"])(n)?_clone(n):n;return t}var Filters={getPixels:function(e){var t=e,n=t.getContext("2d");return n.getImageData(0,0,t.width,t.height)},filterImage:function(e,t){for(var n=[e],i=2;i<arguments.length;i++)n.push(arguments[i]);return t.apply(null,n)},grayscale:function(e){for(var t=e.data,n=0;n<t.length;n+=4){var i=t[n],o=t[n+1],a=t[n+2],s=.2126*i+.7152*o+.0722*a;t[n]=t[n+1]=t[n+2]=s}return e},brightness:function(e,t,n){for(var i,o=e.data,a=0;a<o.length;a+=4)i=parseInt((o[a]-t)*n),i>255?i=255:i<0&&(i=0),o[a]=i,o[a+1]=i,o[a+2]=i,o[a+3]=255;return e},min_max:function(e){for(var t=e.data,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=0,a=0;a<t.length;a+=4)t[a]<n&&(n=t[a]),t[a]>i&&(i=t[a]),o+=t[a]/(t.length/4);return{min:n,max:i,avg:o}},lut:function(e,t){for(var n,i=e.data,o=0;o<i.length;o+=4)n=i[o],i[o]=t[n][0],i[o+1]=t[n][1],i[o+2]=t[n][2],i[o+3]=255;return e}},protocolAndDomainRE=/^(?:\w+:)?\/\/(\S+)$/,localhostDomainRE=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,nonLocalhostDomainRE=/^[^\s\.]+\.\S{2,}$/;function isUrl(e){if("string"!==typeof e)return!1;var t=e.match(protocolAndDomainRE);if(!t)return!1;var n=t[1];return!!n&&!(!localhostDomainRE.test(n)&&!nonLocalhostDomainRE.test(n))}var laxUrlRegex=/(?:(?:[^:]+:)?[/][/])?(?:.+@)?([^/]+)([/][^?#]+)/;function githubUrlToObject(e,t){var n={};if(t=t||{},!e)return null;if(e.url&&(e=e.url),"string"!==typeof e)return null;var i=e.match(/^([\w-_]+)\/([\w-_\.]+)(?:#([\w-_\.]+))?$/),o=e.match(/^github:([\w-_]+)\/([\w-_\.]+)(?:#([\w-_\.]+))?$/),a=e.match(/^git@[\w-_\.]+:([\w-_]+)\/([\w-_\.]+)$/);if(i)n.user=i[1],n.repo=i[2],n.branch=i[3]||"master",n.host="github.com";else if(o)n.user=o[1],n.repo=o[2],n.branch=o[3]||"master",n.host="github.com";else if(a)n.user=a[1],n.repo=a[2].replace(/\.git$/i,""),n.branch="master",n.host="github.com";else{if(e=e.replace(/^git\+/,""),!isUrl(e))return null;var s=e.match(laxUrlRegex)||[],r=Object(_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_7__["a"])(s,3),l=r[1],c=r[2];if(!l)return null;if("github.com"!==l&&"www.github.com"!==l&&!t.enterprise)return null;var d=c.match(/^\/([\w-_]+)\/([\w-_\.]+)(\/tree\/[\w-_\.\/]+)?(\/blob\/[\w-_\.\/]+)?/);if(!d)return null;n.user=d[1],n.repo=d[2].replace(/\.git$/i,""),n.host=l||"github.com",d[3]&&/^\/tree\/master\//.test(d[3])?(n.branch="master",n.path=d[3].replace(/\/$/,"")):d[3]?n.branch=d[3].replace(/^\/tree\//,"").match(/[\w-_.]+\/{0,1}[\w-_]+/)[0]:d[4]?n.branch=d[4].replace(/^\/blob\//,"").match(/[\w-_.]+\/{0,1}[\w-_]+/)[0]:n.branch="master"}return"github.com"===n.host?n.apiHost="api.github.com":n.apiHost="".concat(n.host,"/api/v3"),n.tarball_url="https://".concat(n.apiHost,"/repos/").concat(n.user,"/").concat(n.repo,"/tarball/").concat(n.branch),n.clone_url="https://".concat(n.host,"/").concat(n.user,"/").concat(n.repo),"master"===n.branch?(n.https_url="https://".concat(n.host,"/").concat(n.user,"/").concat(n.repo),n.travis_url="https://travis-ci.org/".concat(n.user,"/").concat(n.repo),n.zip_url="https://".concat(n.host,"/").concat(n.user,"/").concat(n.repo,"/archive/master.zip")):(n.https_url="https://".concat(n.host,"/").concat(n.user,"/").concat(n.repo,"/blob/").concat(n.branch),n.travis_url="https://travis-ci.org/".concat(n.user,"/").concat(n.repo,"?branch=").concat(n.branch),n.zip_url="https://".concat(n.host,"/").concat(n.user,"/").concat(n.repo,"/archive/").concat(n.branch,".zip")),n.path&&(n.https_url+=n.path),n.api_url="https://".concat(n.apiHost,"/repos/").concat(n.user,"/").concat(n.repo),n}function githubUrlRaw(e){return _githubUrlRaw.apply(this,arguments)}function _githubUrlRaw(){return _githubUrlRaw=Object(_home_runner_work_ImJoy_ImJoy_web_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__["a"])(regeneratorRuntime.mark((function e(t){var n,i,o,a,s,r,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.includes("gist.github.com")){e.next=11;break}return n=t.split("/").slice(-1)[0],e.next=4,axios__WEBPACK_IMPORTED_MODULE_15___default.a.get("https://api.github.com/gists/"+n);case 4:if(i=e.sent,200!==i.status){e.next=10;break}return o=Object.values(i.data.files).filter((function(e){return e.filename.endsWith(".imjoy.html")}))[0],e.abrupt("return",o.raw_url);case 10:throw"Failed to fetch from Gist: "+i.statusText;case 11:if(t.includes("blob")&&t.includes("github")){e.next=13;break}return e.abrupt("return",null);case 13:return a=githubUrlToObject(t),s=a.user,r=a.repo,l=new RegExp("^https://github.com/"+s+"/"+r+"/blob/","g"),c=t.replace(l,""),e.abrupt("return","https://raw.githubusercontent.com/"+s+"/"+r+"/"+c);case 19:case"end":return e.stop()}}),e,this)}))),_githubUrlRaw.apply(this,arguments)}function githubImJoyManifest(e){var t=githubUrlToObject(e),n=t.user,i=t.repo,o=t.branch;return"https://raw.githubusercontent.com/"+n+"/"+i+"/"+o+"/manifest.imjoy.json"}function githubRepo(e){var t=githubUrlToObject(e);return t.user+"/"+t.repo}var hot_lut=[[10,0,0],[13,0,0],[15,0,0],[18,0,0],[21,0,0],[23,0,0],[26,0,0],[28,0,0],[31,0,0],[34,0,0],[36,0,0],[39,0,0],[42,0,0],[44,0,0],[47,0,0],[49,0,0],[52,0,0],[55,0,0],[57,0,0],[60,0,0],[63,0,0],[65,0,0],[68,0,0],[70,0,0],[73,0,0],[76,0,0],[78,0,0],[81,0,0],[84,0,0],[86,0,0],[89,0,0],[91,0,0],[94,0,0],[97,0,0],[99,0,0],[102,0,0],[105,0,0],[107,0,0],[110,0,0],[112,0,0],[115,0,0],[118,0,0],[120,0,0],[123,0,0],[126,0,0],[128,0,0],[131,0,0],[133,0,0],[136,0,0],[139,0,0],[141,0,0],[144,0,0],[147,0,0],[149,0,0],[152,0,0],[154,0,0],[157,0,0],[160,0,0],[162,0,0],[165,0,0],[168,0,0],[170,0,0],[173,0,0],[175,0,0],[178,0,0],[181,0,0],[183,0,0],[186,0,0],[189,0,0],[191,0,0],[194,0,0],[196,0,0],[199,0,0],[202,0,0],[204,0,0],[207,0,0],[210,0,0],[212,0,0],[215,0,0],[217,0,0],[220,0,0],[223,0,0],[225,0,0],[228,0,0],[231,0,0],[233,0,0],[236,0,0],[238,0,0],[241,0,0],[244,0,0],[246,0,0],[249,0,0],[252,0,0],[254,0,0],[255,2,0],[255,5,0],[255,7,0],[255,10,0],[255,12,0],[255,15,0],[255,18,0],[255,20,0],[255,23,0],[255,26,0],[255,28,0],[255,31,0],[255,33,0],[255,36,0],[255,39,0],[255,41,0],[255,44,0],[255,47,0],[255,49,0],[255,52,0],[255,54,0],[255,57,0],[255,60,0],[255,62,0],[255,65,0],[255,68,0],[255,70,0],[255,73,0],[255,75,0],[255,78,0],[255,81,0],[255,83,0],[255,86,0],[255,89,0],[255,91,0],[255,94,0],[255,96,0],[255,99,0],[255,102,0],[255,104,0],[255,107,0],[255,110,0],[255,112,0],[255,115,0],[255,117,0],[255,120,0],[255,123,0],[255,125,0],[255,128,0],[255,131,0],[255,133,0],[255,136,0],[255,138,0],[255,141,0],[255,144,0],[255,146,0],[255,149,0],[255,151,0],[255,154,0],[255,157,0],[255,159,0],[255,162,0],[255,165,0],[255,167,0],[255,170,0],[255,172,0],[255,175,0],[255,178,0],[255,180,0],[255,183,0],[255,186,0],[255,188,0],[255,191,0],[255,193,0],[255,196,0],[255,199,0],[255,201,0],[255,204,0],[255,207,0],[255,209,0],[255,212,0],[255,214,0],[255,217,0],[255,220,0],[255,222,0],[255,225,0],[255,228,0],[255,230,0],[255,233,0],[255,235,0],[255,238,0],[255,241,0],[255,243,0],[255,246,0],[255,249,0],[255,251,0],[255,254,0],[255,255,2],[255,255,6],[255,255,10],[255,255,14],[255,255,18],[255,255,22],[255,255,26],[255,255,30],[255,255,34],[255,255,38],[255,255,42],[255,255,46],[255,255,50],[255,255,54],[255,255,58],[255,255,62],[255,255,65],[255,255,69],[255,255,73],[255,255,77],[255,255,81],[255,255,85],[255,255,89],[255,255,93],[255,255,97],[255,255,101],[255,255,105],[255,255,109],[255,255,113],[255,255,117],[255,255,121],[255,255,125],[255,255,128],[255,255,132],[255,255,136],[255,255,140],[255,255,144],[255,255,148],[255,255,152],[255,255,156],[255,255,160],[255,255,164],[255,255,168],[255,255,172],[255,255,176],[255,255,180],[255,255,184],[255,255,188],[255,255,191],[255,255,195],[255,255,199],[255,255,203],[255,255,207],[255,255,211],[255,255,215],[255,255,219],[255,255,223],[255,255,227],[255,255,231],[255,255,235],[255,255,239],[255,255,243],[255,255,247],[255,255,251],[255,255,255]]},"034f":function(e,t,n){"use strict";var i=n("7dba"),o=n.n(i);o.a},"039d":function(e,t,n){},"0529":function(e,t,n){"use strict";var i=n("039d"),o=n.n(i);o.a},"0798":function(e,t,n){},"0d19":function(e,t,n){"use strict";var i=n("4c02"),o=n.n(i);o.a},"11a5":function(e,t,n){},"147d":function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "native-python",\n  "version": "0.1.0",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "tags": [],\n  "ui": "",\n  "cover": "",\n  "inputs": null,\n  "outputs": null,\n  "flags": [],\n  "icon": "extension",\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": []\n}\n</config>\n\n<script lang="python">\nfrom imjoy import api\n\n\nclass ImJoyPlugin():\n    def setup(self):\n        api.log(\'initialized\')\n\n    def run(self, ctx):\n        api.alert(\'hello world.\')\n\napi.export(ImJoyPlugin())\n<\/script>\n'},"151e":function(e,t,n){"use strict";var i=n("a773"),o=n.n(i);o.a},"1eb5":function(e,t,n){"use strict";var i=n("659e"),o=n.n(i);o.a},2733:function(e,t,n){"use strict";var i=n("2ba2"),o=n.n(i);o.a},"27e7":function(e,t,n){"use strict";var i=n("6b72"),o=n.n(i);o.a},"2a06":function(e,t,n){"use strict";var i=n("7c77"),o=n.n(i);o.a},"2ba2":function(e,t,n){},"2d2f":function(e,t,n){"use strict";var i=n("3781"),o=n.n(i);o.a},3145:function(e,t,n){"use strict";var i=n("ca44"),o=n.n(i);o.a},"32c4":function(e,t,n){"use strict";var i=n("f9cf"),o=n.n(i);o.a},3781:function(e,t,n){},"3de5":function(e,t,n){},"464c":function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n    "name": "Untitled Plugin",\n    "type": "jupyter-notebook",\n    "version": "0.1.0",\n    "api_version": "0.1.2",\n    "description": "[TODO: describe this plugin with one sentence.]",\n    "tags": [],\n    "ui": "",\n    "inputs": null,\n    "outputs": null,\n    "flags": [],\n    "icon": "extension",\n    "env": "",\n    "requirements": [],\n    "dependencies": []\n}\n</config>\n\n<script lang="python">\nfrom imjoy import api\n\n\nclass ImJoyPlugin():\n    def setup(self):\n        api.log(\'initialized\')\n\n    def run(self, ctx):\n        api.alert(\'hello world.\')\n\napi.export(ImJoyPlugin())\n<\/script>\n'},"4c02":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"GenericWindow",(function(){return Ot})),n.d(i,"ImageWindow",(function(){return Mt})),n.d(i,"ImageListWindow",(function(){return Lt})),n.d(i,"PanelWindow",(function(){return Bt})),n.d(i,"MarkdownWindow",(function(){return Zt})),n.d(i,"PluginEditorWindow",(function(){return on})),n.d(i,"LogWindow",(function(){return dn})),n.d(i,"FilesWindow",(function(){return gn})),n.d(i,"UrlListWindow",(function(){return kn})),n.d(i,"ImageCompareWindow",(function(){return Sn})),n.d(i,"TerminalWindow",(function(){return Vn})),n.d(i,"JoyWindow",(function(){return Xn})),n.d(i,"SchemaIOWindow",(function(){return ci}));n("cadf"),n("551c"),n("097d");var o=n("a026"),a=n("8c4f"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"imjoy noselect"},[n("md-app",[n("md-app-toolbar",{staticClass:"md-dense app-toolbar",attrs:{"md-elevation":"0"}},[e.menuVisible?e._e():n("md-button",{staticClass:"md-primary md-icon-button",on:{click:function(t){e.menuVisible=!0}}},[n("md-icon",[e._v("menu")])],1),!e.menuVisible&&e.screenWidth>400?n("md-button",{staticClass:"site-title-small",on:{click:function(t){e.$router.push("/")}}},[n("img",{staticClass:"site-title-small",attrs:{src:"static/img/imjoy-logo-black.svg",alt:"ImJoy"}}),n("md-tooltip",[e._v("ImJoy home")])],1):e._e(),e.workspace_dropping&&e.screenWidth>400?n("md-button",[e._v("\n        Drop files to the workspace.\n      ")]):e.screenWidth>500&&e.status_text&&e.status_text.length?n("span",{staticClass:"status-text",class:e.status_text.includes("rror")||e.status_text.includes("Traceback")||e.status_text.includes("Fail")?"error-message":"",style:{"max-width":e.menuVisible?"calc( 100vw - 500px) !important":"calc(100vw - 250px) !important"},on:{click:function(t){e.showAlert(null,e.status_text)}}},[e._v("\n        "+e._s(e.status_text)+"\n      ")]):n("span",{staticClass:"subheader-title md-medium-hide",staticStyle:{flex:"1"}},[e._v("Deep Learning Made Easy!")]),n("div",{staticClass:"md-toolbar-section-end menubar-icons"},[e.wm.selected_window&&e.wm.selected_window.standalone?n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(t){e.wm.selected_window.close()}}},[n("md-icon",[e._v("close")]),n("md-tooltip",[e._v("Close window:\n            "+e._s(e.wm.selected_window.name.slice(0,30)+"(#"+e.wm.selected_window.index+")"))])],1):e._e(),e.wm.selected_window&&e.wm.selected_window.standalone&&e.wm.selected_window.loaders.length>0?n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end"}},[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")]),n("md-tooltip",[e._v("Current window:\n              "+e._s(e.wm.selected_window.name.slice(0,30)+"(#"+e.wm.selected_window.index+")"))])],1),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!0}},[e._v("\n              "+e._s(e.wm.selected_window.name.slice(0,30)+"(#"+e.wm.selected_window.index+")")+"\n            ")]),e._l(e.wm.selected_window.loaders,(function(t,i){return n("md-menu-item",{key:i,on:{click:function(n){e.wm.registered_loaders&&e.wm.registered_loaders[t](e.wm.selected_window.data)}}},[n("span",[e._v(e._s(i))]),n("md-icon",[e._v("play_arrow")])],1)}))],2)],1):e._e(),e._l(e.windows.slice(0,e.max_window_buttons),(function(t,i){return n("md-button",{key:t.id,staticClass:"md-icon-button",attrs:{disabled:e.wm.selected_window===t},on:{click:function(n){e.wm.selectWindow(t)}}},[n("md-icon",[e._v(e._s("filter_"+(i+1)))]),n("md-tooltip",{staticClass:"md-xsmall-hide"},[e._v(e._s(t.name.slice(0,30)+"(#"+t.index+")"))])],1)})),e.windows.length>e.max_window_buttons?n("md-menu",[e.max_window_buttons>=9?n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("filter_9_plus")])],1):n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("filter")])],1),n("md-menu-content",[e._l(e.windows.slice(e.max_window_buttons),(function(t){return n("md-menu-item",{key:t.id,attrs:{disabled:e.wm.selected_window===t},on:{click:function(n){e.wm.selectWindow(t)}}},[n("span",[e._v(e._s(t.name.slice(0,30)+"(#"+t.index+")"))]),n("md-icon",[e._v("forward")])],1)})),n("md-divider"),"grid"!==e.wm.window_mode?n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){e.wm.closeAll()}}},[n("md-icon",[e._v("cancel")]),n("span",[e._v("Close All")]),n("md-tooltip",[e._v("Close all windows")])],1):e._e()],2)],1):e._e(),"grid"===e.wm.window_mode&&e.windows.length>0?n("md-menu",[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("picture_in_picture")]),n("md-tooltip",[e._v("Workspace")])],1),n("md-menu-content",[n("md-menu-item",{class:e.wm.selected_window?"md-primary":"",attrs:{disabled:!e.wm.selected_window},on:{click:function(t){e.wm.selected_window=null}}},[n("md-icon",[e._v("picture_in_picture")]),n("span",[e._v("Workspace")])],1),n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){e.wm.closeAll()}}},[n("md-icon",[e._v("cancel")]),n("span",[e._v("Close All")]),n("md-tooltip",[e._v("Close all windows")])],1)],1)],1):e._e(),n("engine-control-panel",{attrs:{"engine-manager":e.em},on:{"start-terminal":e.startTerminal}}),n("md-menu",[e.latest_version&&!e.is_latest_version?n("md-button",{staticClass:"md-icon-button md-accent",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("error_outline")])],1):n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("details")])],1),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!0},on:{click:function(t){e.showSettingsDialog=!0}}},[n("md-icon",[e._v("settings")]),e._v("Settings\n            ")],1),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"/lite",target:"_blank"}},[n("md-icon",[e._v("open_in_new")]),e._v("ImJoy-Lite\n            ")],1),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"/docs/",target:"_blank"}},[n("md-icon",[e._v("library_books")]),e._v("Documentation\n            ")],1),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"/docs/#/api?id=api-functions",target:"_blank"}},[n("md-icon",[e._v("toc")]),e._v("API Functions\n            ")],1),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"https://forum.image.sc/tags/imjoy",target:"_blank"}},[n("md-icon",[e._v("help")]),e._v("Forum\n            ")],1),n("md-menu-item",{staticClass:"md-primary",attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("md-icon",[e._v("code")]),e._v("Github\n            ")],1),n("md-menu-item",{staticClass:"md-primary",on:{click:function(t){e.showAboutDialog=!0}}},[n("md-icon",[e._v("info")]),e._v("About\n            ")],1),n("md-menu-item",[e.latest_version&&e.is_latest_version?n("md-icon",[e._v("check")]):n("md-icon",[e._v("error_outline")]),n("div",{staticStyle:{width:"100%",cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.checkImJoyUpdate(t)}}},[e.checking?n("div",{staticClass:"loading loading-lg",staticStyle:{left:"-30px"}}):e.version_badge_url?n("img",{attrs:{src:e.version_badge_url}}):n("span",[e._v("ImJoy v"+e._s(e.imjoy_version))])]),n("md-tooltip",[e._v("click to check updates")])],1),n("md-menu-item",{staticClass:"md-primary",on:{click:e.restartImJoy}},[n("md-icon",[e._v("autorenew")]),n("span",[e._v("Restart ImJoy")]),n("md-tooltip",[e._v("click to reload")])],1)],1)],1)],2),n("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"folder_form"},[n("input",{ref:"folder_select",staticClass:"md-file",attrs:{type:"file",webkitdirectory:"",mozdirectory:"",msdirectory:"",odirectory:"",directory:"",multiple:""},on:{change:e.selectFileChanged}})]),n("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file_form"},[n("input",{ref:"file_select",staticClass:"md-file",attrs:{type:"file",multiple:""},on:{change:e.selectFileChanged}})])],1),n("md-app-drawer",{attrs:{"md-active":e.menuVisible,"md-persistent":e.screenWidth>800?"full":null,"md-swipeable":!(e.screenWidth>600)},on:{"update:mdActive":function(t){e.menuVisible=t},"md-closed":function(t){e.wm.resizeAll()},"md-opened":function(t){e.wm.resizeAll()}}},[n("div",{staticClass:"md-toolbar-row title-bar"},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-button",{staticClass:"site-button site-title",on:{click:function(t){e.$router.push("/")}}},[n("img",{staticClass:"site-title",attrs:{src:"static/img/imjoy-logo-black.svg",alt:"ImJoy"}})]),n("span",{staticClass:"superscript md-small-hide"},[e._v("beta")])],1),e.pm?n("div",{staticClass:"md-toolbar-section-end"},[n("md-menu",[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("widgets")]),n("md-tooltip",[e._v("Current workspace: "+e._s(e.pm.selected_workspace))])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.showWorkspaceDialog=!0}}},[n("md-icon",[e._v("view_list")]),e._v("Add Workspace\n              ")],1),n("md-divider"),e._l(e.pm.workspace_list,(function(t){return n("md-menu-item",{key:t,attrs:{disabled:t===e.pm.selected_workspace},on:{click:function(n){e.switchWorkspace(t)}}},[n("span",[e._v(e._s(t))]),n("md-icon",[e._v("forward")]),n("md-tooltip",[e._v("Switch to workspace: "+e._s(t)+" ")])],1)}))],2)],1),n("md-button",{staticClass:"md-icon-button md-dense md-raised",on:{click:function(t){e.menuVisible=!e.menuVisible}}},[n("md-icon",[e._v("keyboard_arrow_left")])],1)],1):e._e()]),e.plugin_loaded?e._e():n("div",{staticClass:"loading loading-lg",staticStyle:{top:"10%"}}),e.pm?n("md-card",{directives:[{name:"show",rawName:"v-show",value:e.plugin_loaded,expression:"plugin_loaded"}],attrs:{id:"plugin-menu"}},[n("md-card-header",[n("md-menu",{attrs:{"md-size":"big"}},[n("md-button",{class:e.screenWidth>600?"":"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("folder_open")]),n("span",{staticClass:"md-xsmall-hide"},[e._v("Files")])],1),n("md-menu-content",[e.fm&&e.fm.fileManagers.length>0?n("md-menu-item",{staticClass:"md-button",on:{click:function(t){e.showFileManagerDialog(),e.files_expand=!1}}},[n("md-icon",[e._v("add_to_queue")]),e._v("File Manager\n                "),n("md-tooltip",[e._v("Load files through file manager")])],1):e._e(),n("md-menu-item",{staticClass:"md-button",on:{click:function(t){e.$refs.file_form.reset(),e.$refs.file_select.click(),e.files_expand=!1}}},[n("md-icon",[e._v("insert_drive_file")]),e._v("Open File\n              ")],1),n("md-menu-item",{staticClass:"md-button",on:{click:function(t){e.$refs.folder_form.reset(),e.$refs.folder_select.click(),e.files_expand=!1}}},[n("md-icon",[e._v("folder_open")]),e._v("Open Folder\n              ")],1)],1)],1),n("md-menu",{attrs:{"md-size":"big"}},[n("md-button",{class:e.screenWidth>600?"":"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("format_list_bulleted")]),n("span",{staticClass:"md-xsmall-hide"},[e._v("Workflow")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.clearWorkflow(),e.workflow_expand=!0}}},[n("md-icon",[e._v("playlist_add")]),e._v("New Workflow\n              ")],1),e._l(e.pm.workflow_list,(function(t){return n("md-menu-item",{key:t.name,on:{click:function(n){e.workflow_expand=!0,e.loadWorkflow(t)}}},[n("span",[e._v(e._s(t.name))]),n("md-button",{staticClass:"md-icon-button",on:{click:function(n){n.stopPropagation(),e.shareWorkflow(t)}}},[n("md-icon",[e._v("share")])],1),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.pm.removeWorkflow(t)}}},[n("md-icon",[e._v("clear")])],1)],1)}))],2)],1),n("md-button",{ref:"add_plugin_button",class:e.pm.installed_plugins.length>0?"":"md-primary",on:{click:function(t){e.showPluginManagement()}}},[n("md-icon",[e._v("add")]),e._v("Plugins\n          ")],1)],1),n("md-card-content",[e.pm?n("div",{directives:[{name:"show",rawName:"v-show",value:e.workflow_expand,expression:"workflow_expand"}],attrs:{id:"workflow-panel"}},[e.plugin_loaded?n("joy",{ref:"workflow",attrs:{config:e.workflow_joy_config}}):e._e(),n("p",[e.plugin_loaded?n("md-button",{staticClass:"md-button",on:{click:function(t){e.runWorkflow(e.workflow_joy_config.joy)}}},[n("md-icon",[e._v("play_arrow")]),e._v("Run\n                "),n("md-tooltip",[e._v("run the workflow")])],1):e._e(),e.plugin_loaded?n("md-button",{staticClass:"md-button",on:{click:function(t){e.pm.saveWorkflow(e.workflow_joy_config.joy)}}},[n("md-icon",[e._v("save")]),e._v("Save\n                "),n("md-tooltip",[e._v("save the workflow")])],1):e._e(),n("md-button",{staticClass:"md-accent",on:{click:function(t){e.clearWorkflow()}}},[n("md-icon",[e._v("clear")]),e._v("Clear\n                "),n("md-tooltip",[e._v("Clear workflow")])],1)],1)],1):e._e(),e._l(e.sortedRunnablePlugins(),(function(t){return n("div",{key:t.name},[n("md-divider"),n("md-badge",{staticClass:"md-square md-primary",class:t.update_available?"":"hide-badge",attrs:{"md-dense":"","md-content":"NEW"}},[n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-icon-button",class:t.running?"md-accent":"",attrs:{"md-menu-trigger":""}},[t.initializing||t.terminating?n("md-progress-spinner",{staticClass:"md-accent",attrs:{"md-diameter":20,"md-mode":"indeterminate"}}):n("plugin-icon",{attrs:{icon:t.config.icon}}),e.screenWidth>500?n("md-tooltip",[e._v(e._s(t.name+": "+t.config.description))]):e._e()],1),n("md-menu-content",[t.config.origin?n("md-menu-item",{class:t.update_available?"md-primary":"",on:{click:function(n){e.updatePlugin(t.id)}}},[n("md-icon",{class:t.update_available?"md-primary":""},[e._v("cloud_download")]),e._v("Update\n                  ")],1):e._e(),t._log_history&&t._log_history.length>0&&e.screenWidth<=400?n("md-menu-item",{on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),e._v("Log\n                  ")],1):e._e(),n("md-menu-item",{on:{click:function(n){e.showDoc(t.id)}}},[n("md-icon",[e._v("description")]),e._v("Docs\n                  ")],1),t.config.origin?n("md-menu-item",{on:{click:function(n){e.sharePlugin(t.id)}}},[n("md-icon",[e._v("share")]),e._v("Share\n                  ")],1):e._e(),n("md-menu-item",{on:{click:function(n){e.downloadPlugin(t.id)}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export\n                  ")],1),n("md-menu-item",{on:{click:function(n){e.editPlugin(t.id)}}},[n("md-icon",[e._v("edit")]),e._v("Edit\n                  ")],1),n("md-menu-item",{on:{click:function(n){e.reloadPlugin(t.config)}}},[n("md-icon",[e._v("autorenew")]),e._v("Reload\n                  ")],1),n("md-menu-item",{on:{click:function(n){e.unloadPlugin(t)}}},[n("md-icon",[e._v("clear")]),e._v("Terminate\n                  ")],1),n("md-menu-item",{staticClass:"md-accent",on:{click:function(n){e.removePlugin(t)}}},[n("md-icon",[e._v("delete_forever")]),e._v("Remove\n                  ")],1),t.config.engine_mode?n("div",[n("md-divider"),n("md-menu-item",{on:{click:function(n){e.switchEngine(t,"auto")}}},["auto"===t.config.engine_mode?n("md-icon",[e._v("check_box")]):n("md-icon",[e._v("check_box_outline_blank")]),n("span",{class:"auto"===t.config.engine_mode?"bold":""},[e._v("Auto")])],1),e._l(e.em.matchEngineByType(t.type),(function(i){return n("md-menu-item",{key:i.name,on:{click:function(n){e.switchEngine(t,i)}}},[t.config.engine_mode===i.name||t.engine&&t.engine.name===i.name?n("md-icon",[e._v("radio_button_checked")]):n("md-icon",[e._v("radio_button_unchecked")]),n("span",{class:t.engine&&t.engine.name===i.name?"bold":""},[e._v(e._s(i.name))])],1)})),n("md-divider"),e._l(t.config.tags,(function(i){return n("md-menu-item",{key:i,on:{click:function(n){e.switchTag(t,i)}}},[t.config.tag===i?n("md-icon",[e._v("radio_button_checked")]):n("md-icon",[e._v("radio_button_unchecked")]),n("span",{class:t.config.tag===i?"bold":""},[e._v("Tag: "+e._s(i))])],1)}))],2):e._e()],1)],1)],1),n("md-button",{staticClass:"joy-run-button",class:t.running?"busy-plugin":t._disconnected&&t.engine?"md-accent":"md-primary",attrs:{disabled:t._disconnected&&!t.engine},on:{click:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;t._disconnected?e.connectPlugin(t):e.runOp(t.ops[t.name])},contextmenu:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.logPlugin(t)}}},[e._v("\n              "+e._s(t.config.name+" "+t.config.badges)+"\n            ")]),n("div",{staticClass:"floating-right-buttons"},[t._log_history&&t._log_history.length>0&&e.screenWidth>400?n("md-button",{staticClass:"md-icon-button",on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),t._log_history._error||t._log_history._info?n("md-tooltip",[e._v(e._s(t._log_history._error||t._log_history._info))]):e._e()],1):n("md-button",{staticClass:"md-icon-button md-xsmall-hide",attrs:{disabled:""}}),n("md-button",{staticClass:"md-icon-button",on:{click:function(n){t.panel_expanded=!t.panel_expanded,e.$forceUpdate()}}},[t.panel_expanded?n("md-icon",[e._v("expand_less")]):n("md-icon",[e._v("expand_more")])],1)],1),(t.running||t.initializing||t.terminating)&&t._progress?n("md-progress-bar",{attrs:{"md-mode":"determinate","md-value":t._progress}}):e._e(),e._l(t.ops,(function(i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.panel_expanded,expression:"plugin.panel_expanded"}],key:i.plugin_id+i.name},[i.name!=t.name?n("md-button",{staticClass:"md-icon-button",attrs:{disabled:!0}},[n("md-icon",[e._v("chevron_right")])],1):e._e(),i.name!=t.name?n("md-button",{staticClass:"joy-run-button md-primary op-button",class:t.running?"md-accent":"md-primary",attrs:{disabled:t._disconnected},on:{click:function(t){if(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)return null;e.runOp(i)},contextmenu:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.logPlugin(t)}}},[e._v("\n                "+e._s(i.name)+"\n              ")]):e._e(),n("joy",{attrs:{config:i,show:t.panel_expanded||!1}})],1)})),n("md-divider")],2)})),n("md-divider"),n("div",e._l(e.sortedNonRunnablePlugins(),(function(t){return n("div",{key:t.name},[n("md-badge",{staticClass:"md-square md-primary",class:t.update_available?"":"hide-badge",attrs:{"md-dense":"","md-content":"NEW"}},[n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-icon-button",class:t.running?"md-accent":"",attrs:{"md-menu-trigger":""}},[t.initializing||t.terminating?n("md-progress-spinner",{staticClass:"md-accent",attrs:{"md-diameter":20,"md-mode":"indeterminate"}}):n("plugin-icon",{attrs:{icon:t.config.icon}}),e.screenWidth>500?n("md-tooltip",[e._v(e._s(t.name+": "+t.config.description))]):e._e()],1),n("md-menu-content",[t.config.origin?n("md-menu-item",{class:t.update_available?"md-primary":"",on:{click:function(n){e.updatePlugin(t.id)}}},[n("md-icon",{class:t.update_available?"md-primary":""},[e._v("cloud_download")]),e._v("Update\n                    ")],1):e._e(),t._log_history&&t._log_history.length>0&&e.screenWidth<=400?n("md-menu-item",{on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),e._v("Log\n                    ")],1):e._e(),n("md-menu-item",{on:{click:function(n){e.showDoc(t.id)}}},[n("md-icon",[e._v("description")]),e._v("Docs\n                    ")],1),t.config.origin?n("md-menu-item",{on:{click:function(n){e.sharePlugin(t.id)}}},[n("md-icon",[e._v("share")]),e._v("Share\n                    ")],1):e._e(),n("md-menu-item",{on:{click:function(n){e.downloadPlugin(t.id)}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export\n                    ")],1),n("md-menu-item",{on:{click:function(n){e.editPlugin(t.id)}}},[n("md-icon",[e._v("edit")]),e._v("Edit\n                    ")],1),n("md-menu-item",{on:{click:function(n){e.reloadPlugin(t.config)}}},[n("md-icon",[e._v("autorenew")]),e._v("Reload\n                    ")],1),n("md-menu-item",{on:{click:function(n){e.unloadPlugin(t)}}},[n("md-icon",[e._v("clear")]),e._v("Terminate\n                    ")],1),n("md-menu-item",{staticClass:"md-accent",on:{click:function(n){e.removePlugin(t)}}},[n("md-icon",[e._v("delete_forever")]),e._v("Remove\n                    ")],1)],1)],1)],1),n("md-button",{staticClass:"joy-run-button non-runnable-btn",class:t.running?"busy-plugin":t._disconnected&&t.engine?"md-accent":"",attrs:{disabled:!t.engine||!t._disconnected},on:{click:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.connectPlugin(t)},contextmenu:function(n){if(n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)return null;e.logPlugin(t)}}},[e._v("\n                "+e._s(t.config.name+" "+t.config.badges)+"\n              ")]),n("div",{staticClass:"floating-right-buttons"},[t._log_history&&t._log_history.length>0&&e.screenWidth>400?n("md-button",{staticClass:"md-icon-button md-xsmall-hide",on:{click:function(n){e.showLog(t)}}},[t._log_history._error?n("md-icon",{staticClass:"red"},[e._v("error_outline")]):n("md-icon",[e._v("info")]),t._log_history._error||t._log_history._info?n("md-tooltip",[e._v(e._s(t._log_history._error||t._log_history._info))]):e._e()],1):n("md-button",{staticClass:"md-icon-button md-xsmall-hide",attrs:{disabled:""}}),n("md-button",{staticClass:"md-icon-button",attrs:{disabled:!0}},[n("md-icon",[e._v("visibility_off")])],1)],1),n("md-divider")],1)}))),n("md-divider"),e.pm.installed_plugins.length<=0?n("md-empty-state",{attrs:{id:"plugin-empty-state","md-icon":"extension","md-label":"","md-description":""}},[n("md-button",{ref:"add_plugin_button",staticClass:"md-primary md-raised",on:{click:function(t){e.showPluginManagement()}}},[n("md-icon",[e._v("add")]),e._v("Add Plugins\n            ")],1)],1):e._e()],2)],1):e._e()],1),n("md-app-content",{staticClass:"whiteboard-content",class:e.workspace_dropping?"file-dropping":""},[n("md-progress-bar",{attrs:{"md-mode":"determinate","md-value":e.progress}}),e.wm?n("whiteboard",{attrs:{id:"whiteboard",mode:e.wm.window_mode,"window-manager":e.wm},on:{create:function(t){e.createWindow(t)}}}):e._e()],1)],1),n("md-snackbar",{staticClass:"md-accent",attrs:{id:"api-snackbar","md-position":"center","md-active":e.show_snackbar,"md-duration":e.snackbar_duration},on:{"update:mdActive":function(t){e.show_snackbar=t}}},[n("span",{on:{click:function(t){e.showAlert(null,e.snackbar_info)}}},[e._v(e._s(e.snackbar_info))]),n("md-button",{staticClass:"md-accent",on:{click:function(t){e.show_snackbar=!1}}},[n("md-icon",[e._v("clear")])],1)],1),n("md-dialog-alert",{staticClass:"api-dialog",attrs:{"md-active":e.alert_config.show,"md-title":e.alert_config.title,"md-content":e.alert_config.content,"md-confirm-text":e.alert_config.confirm_text},on:{"update:mdActive":function(t){e.$set(e.alert_config,"show",t)}}}),n("md-dialog-confirm",{staticClass:"api-dialog",attrs:{"md-active":e.confirm_config.show,"md-title":e.confirm_config.title,"md-content":e.confirm_config.content,"md-confirm-text":e.confirm_config.confirm_text,"md-cancel-text":e.confirm_config.canel_text},on:{"update:mdActive":function(t){e.$set(e.confirm_config,"show",t)},"md-confirm":e.confirm_config.confirm,"md-cancel":e.confirm_config.cancel}}),n("md-dialog-prompt",{staticClass:"api-dialog",attrs:{"md-active":e.prompt_config.show,"md-title":e.prompt_config.title,"md-content":e.prompt_config.content,"md-input-maxlength":"100000","md-input-placeholder":e.prompt_config.placeholder,"md-confirm-text":e.prompt_config.confirm_text},on:{"update:mdActive":function(t){e.$set(e.prompt_config,"show",t)},"md-confirm":e.prompt_config.confirm,"md-cancel":e.prompt_config.cancel},model:{value:e.prompt_config.value,callback:function(t){e.$set(e.prompt_config,"value",t)},expression:"prompt_config.value"}}),n("file-dialog",{ref:"file-dialog",attrs:{id:"engine-file-dialog",file_managers:e.selected_file_managers,"upload-file-to-url":e.uploadFileToUrl}}),n("md-dialog",{staticClass:"window-dialog-container",class:e.dialog_window_config.fullscreen||e.dialog_window_config.standalone?"fullscreen-dialog":"normal-dialog",style:{height:e.dialog_auto_height,width:"800px"},attrs:{"md-active":e.showPluginDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(t){e.showPluginDialog=t}}},[e.dialogWindows[0]?n("window",{key:e.dialogWindows[0].id+"_dialog",attrs:{w:e.dialogWindows[0],withDragHandle:!1},on:{close:function(t){e.closePluginDialog(e.dialogWindows[0])},fullscreen:function(t){e.dialog_window_config.fullscreen=!0,e.dialogWindows[0].fullscreen=!0,e.$forceUpdate()},normalsize:function(t){e.dialog_window_config.fullscreen=!1,e.dialogWindows[0].fullscreen=!1,e.$forceUpdate()}}}):e._e()],1),n("md-dialog",{attrs:{"md-active":e.showWorkspaceDialog,"md-click-outside-to-close":!0},on:{"update:mdActive":function(t){e.showWorkspaceDialog=t}}},[n("md-dialog-title",[e._v("Workspace Management\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showWorkspaceDialog=!1}}},[n("md-icon",[e._v("clear")])],1)],1),n("md-dialog-content",[n("md-toolbar",{staticClass:"md-dense",attrs:{"md-elevation":"0"}},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-field",[n("label",{attrs:{for:"workspace_name"}},[e._v("Workspace Name")]),n("md-input",{attrs:{type:"text",placeholder:"Create a new workspace",name:"workspace_name"},model:{value:e.new_workspace_name,callback:function(t){e.new_workspace_name=t},expression:"new_workspace_name"}})],1)],1),n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.switchWorkspace(e.new_workspace_name),e.showWorkspaceDialog=!1}}},[n("md-icon",[e._v("add")]),e._v("New")],1)],1)]),n("md-list",{staticClass:"md-double-line md-dense"},e._l(e.pm.workspace_list,(function(t){return n("md-list-item",{key:t},[n("span",[e._v(e._s(t))]),n("md-menu",[n("md-button",{staticClass:"md-icon-button md-list-action",attrs:{"md-menu-trigger":""}},[n("md-icon",{staticClass:"md-primary"},[e._v("more_horiz")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(n){e.showWorkspaceDialog=!1,e.switchWorkspace(t)}}},[n("md-icon",[e._v("forward")]),e._v(" Switch\n              ")],1),n("md-menu-item",{staticClass:"md-accent",on:{click:function(n){e.removeWorkspace(t)}}},[n("md-icon",[e._v("delete")]),e._v(" Delete\n              ")],1)],1)],1)],1)})))],1)],1),n("md-dialog",{staticStyle:{"max-width":"800px",width:"100%",height:"100%"},attrs:{"md-active":e.showAboutDialog,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(t){e.showAboutDialog=t}}},[n("md-dialog-title",[e._v("About ImJoy\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showAboutDialog=!1}}},[n("md-icon",[e._v("clear")])],1)],1),n("md-dialog-content",[n("about")],1)],1),n("md-dialog",{staticClass:"plugin-dialog",attrs:{"md-active":e.showAddPluginDialog,"md-click-outside-to-close":!0},on:{"update:mdActive":function(t){e.showAddPluginDialog=t}}},[n("md-dialog-title",[e._v(e._s(e.plugin4install?"Plugin Installation":"ImJoy Plugin Management")+"\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showAddPluginDialog=!1,e.clearPluginUrl()}}},[n("md-icon",[e._v("clear")])],1)],1),n("md-dialog-content",[e.show_plugin_templates?[n("md-menu",[n("md-button",{staticClass:"md-primary md-raised",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("add")]),e._v("Create a new plugin\n            "),n("md-tooltip",[e._v("Create a new plugin")])],1),n("md-menu-content",e._l(e.plugin_templates,(function(t){return n("md-menu-item",{key:t.name,on:{click:function(n){e.newPlugin(t.code),e.showAddPluginDialog=!1}}},[n("md-icon",[e._v(e._s(t.icon))]),e._v(e._s(t.name)+"\n            ")],1)})))],1),n("br"),n("br")]:e._e(),e.show_plugin_url?n("md-card",[n("md-card-header",[n("div",{staticClass:"md-title"},[e._v("Install from URL")]),n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("md-field",{staticClass:"md-toolbar-section-start",attrs:{"md-clearable":""}},[n("md-icon",[e._v("cloud_download")]),n("md-input",{attrs:{placeholder:"Please paste the URL here and press enter.",type:"text",name:"plugin_url"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.tag4install="",e.getPlugin4Install(e.plugin_url)}},model:{value:e.plugin_url,callback:function(t){e.plugin_url=t},expression:"plugin_url"}}),n("md-tooltip",[e._v("Press `Enter` to get the plugin")])],1)],1)],1)],1):e._e(),e.downloading_plugin&&!e.plugin4install?n("div",{staticClass:"md-toolbar-section-center"},[n("div",{staticClass:"loading loading-lg",staticStyle:{"padding-right":"30px"}})]):e._e(),e.downloading_error?n("h2",[e._v("  "+e._s(e.downloading_error))]):e._e(),e.plugin4install?n("md-card",[e.plugin4install.cover&&"string"===typeof e.plugin4install.cover?n("md-card-media",{attrs:{"md-ratio":"16:9"}},[n("img",{attrs:{src:e.plugin4install.cover,alt:"plugin-cover"}})]):e.plugin4install.cover?n("div",{staticClass:"carousel"},[e._m(0),n("div",{staticClass:"carousel-container"},e._l(e.plugin4install.cover,(function(e,t){return n("figure",{key:t,staticClass:"carousel-item"},[n("img",{staticClass:"img-responsive rounded",attrs:{src:e,alt:"plugin cover"}})])}))),n("div",{staticClass:"carousel-nav"},e._l(e.plugin4install.cover,(function(t,i){return n("label",{key:i,staticClass:"nav-item text-hide c-hand",attrs:{for:"slide-"+i}},[e._v(e._s(i))])})))],2):e._e(),n("md-card-header",[n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("div",{staticStyle:{"margin-top":"30px","margin-bottom":"30px"}},[n("h2",[n("plugin-icon",{attrs:{icon:e.plugin4install.icon}}),e._v("\n                "+e._s(e.plugin4install.name+" "+e.plugin4install.badges)+"\n              ")],1)]),e.installing||!e.plugin_loaded?n("div",{staticClass:"md-toolbar-section-end"},[n("div",{staticClass:"loading loading-lg",staticStyle:{"padding-right":"30px"}})]):e.tag4install?n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-button md-primary",on:{click:function(t){e.installPlugin(e.plugin4install,e.tag4install)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(e.plugin4install._installation_text||"Install")+"\n                "),n("md-tooltip",[e._v("Install "+e._s(e.plugin4install.name)+" (tag=`"+e._s(e.tag4install)+"`)")])],1)],1):n("div",{staticClass:"md-toolbar-section-end"},[e.plugin4install.tags&&e.plugin4install.tags.length>0?n("md-menu",[n("md-button",{staticClass:"md-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(e.plugin4install._installation_text||"Install")+"\n                  "),n("md-tooltip",[e._v("Choose a tag to install\n                    "+e._s(e.plugin4install.name))])],1),n("md-menu-content",e._l(e.plugin4install.tags,(function(t){return n("md-menu-item",{key:t,on:{click:function(n){e.installPlugin(e.plugin4install,t)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(t)+"\n                  ")],1)})))],1):n("md-button",{staticClass:"md-button md-primary",on:{click:function(t){e.installPlugin(e.plugin4install)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(e.plugin4install._installation_text||"Install")+"\n              ")],1)],1)])],1),n("md-card-content",[n("p",[e._v("Version: "+e._s(e.plugin4install.version))]),n("p",[e._v(e._s(e.plugin4install.description))]),e._l(e.plugin4install.tags,(function(t){return n("md-chip",{key:t,class:e.tag4install===t?"md-primary":"",on:{click:function(n){e.tag4install=t}}},[e._v(e._s(t))])})),n("br"),e.plugin4install.code?n("md-switch",{model:{value:e.show_plugin_source,callback:function(t){e.show_plugin_source=t},expression:"show_plugin_source"}},[e._v("Show plugin source code")]):e._e(),n("p",[e._v("\n            This plugin is "),n("strong",[e._v("NOT")]),e._v(" provided by ImJoy.io. Please\n            make sure the plugin is provided by a trusted source, otherwise it\n            may "),n("strong",[e._v("harm")]),e._v(" your computer.\n          ")]),e.show_plugin_source?n("plugin-editor",{staticClass:"code-editor",attrs:{title:e.plugin4install.name},model:{value:e.plugin4install.code,callback:function(t){e.$set(e.plugin4install,"code",t)},expression:"plugin4install.code"}}):e._e()],2)],1):e._e(),n("md-card",{directives:[{name:"show",rawName:"v-show",value:e.show_plugin_store,expression:"show_plugin_store"}]},[n("md-card-header",[n("div",{staticClass:"md-title"},[e._v("Install from the plugin repository")]),n("md-chips",{staticClass:"md-primary shake-on-error",attrs:{"md-placeholder":"Add a repository url (e.g. GITHUB REPO) and press enter."},on:{"md-insert":function(t){e.pm.addRepository(t)},"md-delete":function(t){e.pm.removeRepository(e.getRepository(t))}},scopedSlots:e._u([{key:"md-chip",fn:function(t){var i=t.chip;return[e.pm.selected_repository&&i===e.pm.selected_repository.name?n("strong",{staticClass:"md-primary"},[e._v(e._s(i))]):n("div",{on:{click:function(t){e.selectRepository(i)}}},[e._v(e._s(i))])]}}]),model:{value:e.pm.repository_names,callback:function(t){e.$set(e.pm,"repository_names",t)},expression:"pm.repository_names"}},[e.pm.selected_repository?n("div",{staticClass:"md-helper-text"},[e._v("\n              "+e._s(e.pm.selected_repository.name)+":\n              "+e._s(e.pm.selected_repository.description)+"\n            ")]):e._e()])],1),n("md-card-content",[e.pm?n("plugin-list",{attrs:{"plugin-manager":e.pm,"init-search":e.init_plugin_search,plugins:e.pm.available_plugins,workspace:e.pm.selected_workspace},on:{message:e.showMessage}}):e._e()],1)],1)],2)],1)],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return e._l(e.plugin4install.cover,(function(e,t){return n("input",{key:t,staticClass:"carousel-locator",attrs:{id:"slide-"+t,type:"radio",name:"carousel-radio",hidden:""},domProps:{checked:1===t}})}))}],l=(n("f751"),n("ac4d"),n("8a81"),n("f559"),n("a481"),n("6762"),n("2fdb"),n("4917"),n("6b54"),n("96cf"),n("1da1")),c=(n("28a5"),n("ac6a"),n("456d"),n("7f7f"),n("53ca")),d=n("2440"),u=n("bc3a"),m=n.n(u),_=n("cb3a"),p=n.n(_),h=n("ca41"),g=n.n(h),f=n("147d"),w=n.n(f),v=n("a4ec"),b=n.n(v),y=[{name:"Default template",code:p.a,icon:"code"},{name:"Web Worker (JS)",code:p.a,icon:"swap_horiz"},{name:"Window (HTML/CSS/JS)",code:g.a,icon:"picture_in_picture"},{name:"Native Python",code:w.a,icon:"🚀"},{name:"Web Python",code:b.a,icon:"🐍"}],k=n("464c"),x=n.n(k),C=n("9224"),j=n("025e"),P=n("c0c4"),O=n.n(P),E=n("acad"),$=n("2ef0"),W=n.n($),D=n("e61b"),I=n.n(D),M=n("783b"),A=n.n(M),S=new A.a,U={name:"imjoy",data:function(){return{imjoy:null,pm:null,em:null,wm:null,workflow_expand:!1,file_select:null,folder_select:null,selected_file:null,selected_files:null,showPluginDialog:!1,showSettingsDialog:!1,showAboutDialog:!1,showAddPluginDialog:!1,permission_message:"No permission message.",share_url_message:"No url",resolve_permission:null,reject_permission:null,plugin_url:null,downloading_plugin:!1,downloading_error:"",plugin4install:null,tag4install:"",show_plugin_source:!1,init_plugin_search:null,show_plugin_templates:!0,show_plugin_store:!0,show_plugin_url:!0,show_installed_plugins:!1,progress:0,status_text:"",showWorkspaceDialog:!1,showWelcomeDialog:!1,show_file_dialog:!1,plugins:null,registered:null,menuVisible:!1,snackbar_info:"",snackbar_duration:3e3,show_snackbar:!1,screenWidth:1024,plugin_loaded:!1,new_workspace_name:"",workspace_dropping:!1,max_window_buttons:9,installing:!1,dialog_auto_height:"100%",dialog_window_config:{},latest_version:null,is_latest_version:!1,checking:!1,alert_config:{show:!1},confirm_config:{show:!1,confirm:function(){},cancel:function(){}},prompt_config:{show:!1,confirm:function(){},cancel:function(){}},selected_file_managers:[]}},watch:{},computed:{version_badge_url:function(){if(this.latest_version){var e=this.is_latest_version?"success":"orange";return"https://img.shields.io/badge/imjoy-v"+this.imjoy_version+"-"+e+".svg"}return null},dialogWindows:function(){return this.wm.windows.filter((function(e){return e.dialog})).reverse()},windows:function(){return this.wm.windows.filter((function(e){return!e.dialog}))}},created:function(){var e=this;this.imjoy_version=C["a"],this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus||I.a.create();var t={alert:this.showAlert,prompt:this.showPrompt,confirm:this.showConfirm,showDialog:this.showDialog,showProgress:this.showProgress,showStatus:this.showStatus,showFileDialog:this.showFileDialog,showSnackbar:this.showSnackbar,uploadFileToUrl:this.uploadFileToUrl,downloadFileFromUrl:this.downloadFileFromUrl,showMessage:function(t,n,i){e.showMessage(n,i)},utils:{$forceUpdate:this.$forceUpdate,openUrl:this.openUrl,sleep:this.sleep,assert:j["b"]}};for(var n in this.imjoy_api)if("function"===typeof this.imjoy_api[n])this.imjoy_api[n]=this.imjoy_api[n].bind(this);else if("object"===Object(c["a"])(this.imjoy_api[n]))for(var i in this.imjoy_api[n])this.imjoy_api[n][i]=this.imjoy_api[n][i].bind(this);this.client_id=localStorage.getItem("imjoy_client_id"),this.client_id||(this.client_id="imjoy_web_"+Object(j["g"])(),localStorage.setItem("imjoy_client_id",this.client_id)),this.imjoy=new E["ImJoy"]({imjoy_api:t,event_bus:this.event_bus,show_message_callback:this.showMessage,update_ui_callback:function(){e.$forceUpdate()},add_window_callback:this.addWindowCallback,client_id:this.client_id,jailed_asset_url:"https://lib.imjoy.io/static/jailed/"}),this.pm=this.imjoy.pm,this.em=this.imjoy.em,this.fm=this.imjoy.fm,this.wm=this.imjoy.wm,this.IMJOY_PLUGIN={_id:"IMJOY_APP"},this.plugin_templates=y,this.workflow_joy_config={expanded:!0,name:"Workflow",ui:"{id:'workflow', type:'ops'}"};var o=function(e){var t=document.getElementById("whiteboard");return e&&t&&t.contains(e)},a=function(e){var t=document.getElementById("engine-file-dialog");return e&&t&&t.contains(e)};document.addEventListener("dragover",(function(t){t.preventDefault(),t.stopPropagation(),o(t.target)&&(e.workspace_dropping||(e.workspace_dropping=!0,e.$forceUpdate())),a(t.target)&&e.event_bus.emit("drag_upload_enter")})),document.addEventListener("dragenter",(function(t){t.preventDefault(),t.stopPropagation(),o(t.target)&&(e.workspace_dropping=!0,e.$forceUpdate()),a(t.target)&&e.event_bus.emit("drag_upload_enter")})),document.addEventListener("dragleave",(function(t){t.preventDefault(),t.stopPropagation(),e.workspace_dropping&&(e.workspace_dropping=!1,e.$forceUpdate()),a(t.target)||e.event_bus.emit("drag_upload_leave")}));var s=function(t){return new Promise((function(n,i){var o=[],a=!1,s=function e(t,i,a,s){if(i=i||"",t&&t.isFile)t.file((function(e){e.relativePath=i+e.name,e.loaders=a(e),o.push(e),s&&n(o)}));else if(t&&t.isDirectory){var r=t.createReader();r.readEntries((function(n){for(var o=0;o<n.length;o++)e(n[o],i+t.name+"/",a,s&&o===n.length-1)}))}else s&&n(o)},r=t.dataTransfer.items.length;if(0!==r){for(var l=0;l<r;l++)if(t.dataTransfer.items[l].webkitGetAsEntry){a=!0;var c=t.dataTransfer.items[l].webkitGetAsEntry();s(c,null,(function(t){return e.wm.getDataLoaders(t)}),l===r-1)}e.selected_files=a?o:t.dataTransfer.files}else i()}))};document.addEventListener("drop",(function(t){t.preventDefault(),o(t.target)?(s(t).then(e.loadFiles),e.workspace_dropping=!1,e.$forceUpdate()):a(t.target)&&(e.event_bus.emit("drag_upload_leave"),s(t).then((function(t){e.event_bus.emit("drag_upload",t)})))}))},beforeRouteLeave:function(e,t,n){if(this.wm&&this.wm.windows.length>0){var i=window.confirm("Do you really want to leave? you have unsaved changes!");i?n():n(!1)}else n()},mounted:function(){var e=this;this.event_bus.on("resize",this.updateSize),this.event_bus.on("plugin_loaded",(function(){e.$refs.workflow&&e.$refs.workflow.setupJoy&&e.$refs.workflow.setupJoy()})),this.event_bus.on("op_registered",(function(){e.$refs.workflow&&e.$refs.workflow.setupJoy&&e.$refs.workflow.setupJoy()})),this.event_bus.on("closing_window_plugin",(function(t){e.dialogWindows[0]&&e.dialogWindows[0].plugin===t&&(e.showPluginDialog=!1)})),this.updateSize({width:window.innerWidth}),this.wm&&(this.screenWidth>800?this.wm.window_mode="grid":this.wm.window_mode="single"),setInterval((function(){e.$forceUpdate()}),5e3),this.welcome?this.showWelcomeDialog=!0:this.startImJoy(this.$route).then((function(){e.showAddPluginDialog||e.pm.plugins&&!(Object.keys(e.pm.plugins)<=0)||e.pm.reloadPluginRecursively({uri:"imjoy-team/imjoy-plugins:Welcome"}).then((function(){e.showDialog(null,{type:"Welcome",name:"Welcome to ImJoy"})})),window.gtag&&window.gtag("config","UA-134837258-1",{page_location:location.href.split("#")[0],page_path:"/#/app"})}))},beforeDestroy:function(){this.imjoy.destroy()},methods:{startImJoy:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,i,o,a,s,r,l,c,d,u,_,p,h,g,f,w,v,b,y,k,C,P,O,E,$,W,D=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.imjoy.init();case 2:if(n=(t.query.repo||t.query.r||"").trim(),!n){e.next=22;break}return this.plugin_url=null,this.init_plugin_search=null,this.show_plugin_store=!0,this.show_plugin_url=!1,this.downloading_plugin=!0,e.prev=9,e.next=12,this.pm.addRepository(n);case 12:this.pm.selected_repository=e.sent,this.downloading_plugin=!1,e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](9),this.downloading_plugin=!1,this.downloading_error="Sorry, the repository URL is invalid: "+e.t0.toString();case 20:this.show_plugin_templates=!1,this.showAddPluginDialog=!0;case 22:if(i=(t.query.plugin||t.query.p||"").trim(),o=null,!i){e.next=52;break}if(!(i.match(j["h"])||i.includes("/")&&i.includes(":"))){e.next=44;break}return this.plugin_url=i,this.init_plugin_search=null,this.show_plugin_store=!1,this.show_plugin_url=!1,e.prev=30,e.next=33,this.getPlugin4Install(i);case 33:o=e.sent,!this.pm.plugin_names[o.name]||t.query.upgrade||o.version!==this.pm.plugin_names[o.name].config.version?(this.show_plugin_templates=!1,this.showAddPluginDialog=!0):this.showMessage('Plugin "'.concat(o.name,'" is already installed.')),e.next=42;break;case 37:return e.prev=37,e.t1=e["catch"](30),console.error(e.t1),e.next=42,this.showAlert(null,e.t1);case 42:e.next=50;break;case 44:this.plugin_url=null,this.init_plugin_search=i,this.show_plugin_store=!0,this.show_plugin_url=!1,this.show_plugin_templates=!1,this.showAddPluginDialog=!0;case 50:e.next=53;break;case 52:t.query.workflow&&this.loadWorkfowFromUrl();case 53:for(a=!0,s=!1,r=void 0,e.prev=56,l=this.getDefaultInputLoaders()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0)d=c.value,this.wm.registerInputLoader(d.loader_key,d,d.loader);e.next=64;break;case 60:e.prev=60,e.t2=e["catch"](56),s=!0,r=e.t2;case 64:e.prev=64,e.prev=65,a||null==l.return||l.return();case 67:if(e.prev=67,!s){e.next=70;break}throw r;case 70:return e.finish(67);case 71:return e.finish(64);case 72:return e.next=74,this.pm.loadRepositoryList();case 74:return this.repository_list=e.sent,this.pm.selected_repository=this.repository_list[0],e.prev=76,t.query.start||t.query.s?this.menuVisible=!1:this.menuVisible=!0,u=t.query.workspace||t.query.w||this.pm.workspace_list[0],e.next=81,this.pm.loadWorkspace(u);case 81:return e.next=83,this.pm.reloadPlugins();case 83:if(!t.query.jupyter_plugin){e.next=97;break}if(_="Jupyter-Notebook",this.pm.plugin_names[_]){e.next=96;break}return console.log('Loading internal plugin "'.concat(_,'"...')),e.prev=87,e.next=90,this.pm.reloadPluginRecursively({uri:this.pm.internal_plugins[_].uri},null,"eval is evil");case 90:console.log("".concat(_," plugin loaded.")),e.next=96;break;case 93:e.prev=93,e.t3=e["catch"](87),console.error(e.t3);case 96:this.pm.reloadPlugin({code:x.a.replace(/Untitled Plugin/g,t.query.jupyter_plugin)}).catch((function(e){console.error(e)}));case 97:if(t.query.engine&&t.query.start&&(p=this.em.getEngineByUrl(t.query.engine),h=this.pm.plugin_names[t.query.start],p&&h&&(console.log("setting plugin engine of ".concat(h.name," to ").concat(p.name)),h.engine_mode=p.name,h.config.engine_mode=p.name),p||this.showMessage("Plugin engine ".concat(t.query.engine," not found.")),h||this.showMessage("Plugin ".concat(t.query.start," not found."))),g=null,(t.query.token||t.query.t)&&(g=(t.query.token||t.query.t).trim()),t.query.engine||t.query.e){f=(t.query.engine||t.query.e).trim();try{this.em.addEngine({type:"default",url:f,token:g},!1)}finally{this.em.getEngineByUrl(f).connect(),this.$forceUpdate()}}this.plugin_loaded=!0,this.event_bus.emit("plugins_loaded",this.pm.plugins),e.prev=103,w=this.pm.reloadRepository(),this.event_bus.emit("repositories_loaded",w);case 106:if(e.prev=106,!t.query.start&&!t.query.s){e.next=155;break}if(v=t.query.start||t.query.s,b=this.pm.installed_plugins.filter((function(e){return e.name===v})),this.showAddPluginDialog||!(b.length<=0)){e.next=114;break}alert('Plugin "'.concat(v,'" cannot be started, please install it.')),e.next=155;break;case 114:if(y=Object(j["a"])(t.query),k=t.query.load||t.query.l,!k){e.next=129;break}return e.prev=117,e.next=120,m.a.get(k);case 120:C=e.sent,y.loaded=C.data,e.next=129;break;case 124:e.prev=124,e.t4=e["catch"](117),console.error(e.t4),this.showMessage("Failed to load data from:"+k+" Error:"+e.t4.toString()),y.loaded=null;case 129:if(this.showAddPluginDialog||!this.pm.registered.windows[v]&&!v.startsWith("imjoy/")){e.next=151;break}return e.prev=130,P=this.pm.registered.windows[v]||{},O=Object(j["a"])(P.defaults)||{},O.type=v,O.name=v,O.w=O.w||t.query.w,O.h=O.h||t.query.h,O.tag=P.tag,O.fullscreen=t.query.fullscreen||O.fullscreen||!1,O.standalone=t.query.standalone||O.standalone||!1,O.data=y,O.config={},e.next=144,this.createWindow(O);case 144:e.next=149;break;case 146:e.prev=146,e.t5=e["catch"](130),console.error("Plugin ".concat(v," failed to load data."),e.t5);case 149:e.next=155;break;case 151:E=null,$=function e(t){if(t.name===v){try{t.api.run({data:y,config:{}})}catch(n){console.error("Plugin ".concat(v," failed to load data."),n)}D.event_bus.off("plugin_loaded",e)}E&&E.api.close&&E.api.close(),E=t},W=function e(t){t.name===v&&(D.event_bus.on("plugin_loaded",$),D.event_bus.off("plugin_installed",e))},this.event_bus.on("plugin_installed",W);case 155:return this.$nextTick((function(){D.event_bus.emit("imjoy_ready")})),e.finish(106);case 157:e.next=162;break;case 159:e.prev=159,e.t6=e["catch"](76),this.showMessage(e.t6);case 162:this.$forceUpdate(),this.$nextTick((function(){D.checkImJoyUpdate(),window.setInterval((function(){D.checkImJoyUpdate(!0)}),12e5)}));case 164:case"end":return e.stop()}}),e,this,[[9,16],[30,37],[56,60,64,72],[65,,67,71],[76,159],[87,93],[103,,106,157],[117,124],[130,146]])})));return function(t){return e.apply(this,arguments)}}(),addWindowCallback:function(e){var t=this;return new Promise((function(n,i){if(t.wm.window_ids[e.id])try{e.api.on("refresh",(function(){t.$forceUpdate()}));var o=e.refresh;o&&(e.refresh=function(){t.$nextTick((function(){o()}))}),t.$nextTick((function(){t.$forceUpdate(),n()}))}catch(a){i(a)}else i("window was closed")}))},createWindow:function(e){return this.pm.createWindow(null,e)},restartImJoy:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.location.reload(!0);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),checkImJoyUpdate:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.checking=!0,e.prev=1,e.next=4,m.a.get("https://imjoy.io/version.json?"+Object(j["g"])());case 4:if(n=e.sent,n&&n.data){e.next=8;break}return this.showMessage("Failed to fetch imjoy version information."),e.abrupt("return");case 8:i=n.data,i&&i.version?(this.latest_version=i.version,this.is_latest_version=Object(j["c"])(this.imjoy_version,">=",i.version),this.is_latest_version?t||(Object(j["c"])(this.imjoy_version,">",i.version)?this.showMessage("🍻 Your ImJoy (v".concat(this.imjoy_version,") is newer than the release (v").concat(this.latest_version,").")):this.showMessage("🎉 ImJoy is up to date (version ".concat(this.latest_version,")."))):this.showMessage("📣 A newer version of ImJoy (version ".concat(this.latest_version,") is available, please restart ImJoy."))):this.latest_version=null,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),this.showMessage("Failed to fetch imjoy version information");case 15:return e.prev=15,this.checking=!1,e.finish(15);case 18:this.pm.checkUpdates();case 19:case"end":return e.stop()}}),e,this,[[1,12,15,18]])})));return function(t){return e.apply(this,arguments)}}(),getDefaultInputLoaders:function(){var e=this,t=function(t){var n=new FileReader;n.onload=function(){e.createWindow({name:t.name,type:"imjoy/image",data:{type:"imjoy/image",src:n.result,file:t}})},n.readAsDataURL(t)},n=function(t){var n={name:"New Plugin",type:"imjoy/plugin-editor",config:{},plugin_manager:e.pm,engine_manager:e.em,w:30,h:20,standalone:e.screenWidth<1200,plugin:{},data:{type:"imjoy/code",name:"new plugin",id:"plugin_"+Object(j["g"])(),code:"",local_file_obj:t}};e.createWindow(n)},i=function(t){var n={name:"New Plugin",type:"imjoy/plugin-editor",config:{},plugin_manager:e.pm,engine_manager:e.em,w:30,h:20,standalone:e.screenWidth<1200,plugin:{},data:{type:"imjoy/code",name:"new plugin",id:"plugin_"+Object(j["g"])(),code:"",engine_file_obj:t}};e.createWindow(n)},o=function(t){var n=t.url.split("/"),i=n[n.length-1];e.createWindow({name:i,type:"imjoy/image",data:{type:"imjoy/image",src:t.url}})};return[{loader_key:"Code Editor (file)",schema:S.compile({properties:{type:{type:"string"},name:{type:"string",pattern:".*\\.imjoy.html$",maxLength:1024},size:{type:"number"}},required:["name","size","type"]}),loader:n},{loader_key:"Code Editor (url)",schema:S.compile({properties:{type:{type:"string",enum:["imjoy/url"]},url:{type:"string",pattern:".*\\.imjoy.html$",maxLength:1024},path:{type:"string"},engine:{type:"string"}},required:["url","path","engine"]}),loader:i},{loader_key:"Image (file)",schema:S.compile({properties:{type:{type:"string",enum:["image/jpeg","image/png","image/gif"]},size:{type:"number"}},required:["type","size"]}),loader:t},{loader_key:"Image (url)",schema:S.compile({properties:{type:{type:"string",enum:["imjoy/url"]},url:{type:"string",maxLength:1024,pattern:"(.*\\.jpg|\\.jpeg|\\.png|\\.gif)$"},path:{type:"string"},engine:{type:"string"}},required:["url","path","engine","type"]}),loader:o}]},updateSize:function(e){this.screenWidth=e.width,this.wm&&(this.screenWidth>800?(0===this.windows.length&&(this.wm.window_mode="grid"),this.max_window_buttons=9):(0===this.windows.length&&(this.wm.window_mode="single"),this.max_window_buttons=parseInt(this.screenWidth/36-4),this.max_window_buttons>9&&(this.max_window_buttons=9)),this.wm.resizeAll()),this.$forceUpdate()},showEngineConnection:function(e,t){this.event_bus.emit("show_engine_dialog",{show:e,engine:t})},getRepository:function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=this.pm.repository_list[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.name===e)return s}}catch(r){n=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}},selectRepository:function(e){var t=this,n=!0,i=!1,o=void 0;try{for(var a,s=this.pm.repository_list[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var r=a.value;if(r.name===e)return this.pm.reloadRepository(r).then((function(){t.$forceUpdate()})),r}}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}},switchEngine:function(e,t){var n=this;e.config.engine_mode=t&&t.name||"auto",this.pm.savePlugin(e.config).then((function(e){n.pm.reloadPlugin(e)})).catch((function(e){n.showMessage("Failed to save settings: "+e.toString())}))},switchTag:function(e,t){var n=this;e.config.tag=t,this.pm.savePlugin(e.config).then((function(e){n.pm.reloadPlugin(e)})).catch((function(e){n.showMessage("Failed to save settings: "+e.toString())}))},connectPlugin:function(e){e._disconnected&&(e.engine&&!e.engine.connected?e.engine.connect():this.pm.reloadPlugin(e.config))},getPlugin4Install:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.plugin4install=null,this.downloading_error="",this.downloading_plugin=!0,e.prev=3,e.next=6,this.pm.getPluginFromUrl(t);case 6:return n=e.sent,this.pm.plugin_names[n.name]&&(Object(j["c"])(n.version,">",this.pm.plugin_names[n.name].config.version)?n._installation_text="Upgrade":Object(j["c"])(n.version,"<",this.pm.plugin_names[n.name].config.version)&&(n._installation_text="Downgrade")),this.plugin4install=n,this.tag4install=n.tag,this.downloading_plugin=!1,e.abrupt("return",n);case 14:throw e.prev=14,e.t0=e["catch"](3),this.downloading_plugin=!1,this.downloading_error="Failed to fetch plugin, error: ".concat(e.t0),this.showMessage(this.downloading_error),e.t0;case 20:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),showPluginManagement:function(){this.plugin4install=null,this.downloading_error="",this.downloading_plugin=!1,this.init_plugin_search="",this.show_plugin_templates=!0,this.show_plugin_store=!0,this.show_plugin_url=!0,this.showAddPluginDialog=!0;var e=!0,t=!1,n=void 0;try{for(var i,o=this.pm.repository_list[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.name===this.pm.default_repository_list[0].name&&this.selectRepository(a.name)}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},sortedRunnablePlugins:function(){return W.a.orderBy(this.pm.plugins,"name").filter((function(e){return e.config.runnable}))},sortedNonRunnablePlugins:function(){return W.a.orderBy(this.pm.plugins,"name").filter((function(e){return!e.config.runnable}))},switchWorkspace:function(e){if(!e||""==e.trim())throw this.showMessage("Workspace name should not be empty."),"Workspace name should not be empty.";var t={workspace:e};"default"===e&&(t=null),this.$router.push({name:"app",query:t}),window.location.reload()},removeWorkspace:function(e){var t=this,n=this.pm.selected_workspace===e.name;this.pm.removeWorkspace(e).then((function(){t.showMessage("Workspace ".concat(e," has been deleted.")),n&&t.$router.replace({query:{w:"default"}})})).catch((function(e){t.showMessage(e)}))},showMessage:function(e,t){e=String(e),this.snackbar_info=e,t&&(t*=1e3),this.snackbar_duration=t||1e4,this.show_snackbar=!0,this.status_text=e,this.$forceUpdate()},showFileManagerDialog:function(){var e=this;this.showFileDialog(this.IMJOY_PLUGIN,{uri_type:"url",root:"./"}).then((function(t){if(e.screenWidth<=800&&(e.menuVisible=!1),t){var n=e.wm.getDataLoaders(t),i=Object.keys(n);if(i.length>1){var o={name:"Engine Files",type:"imjoy/generic",scroll:!0,data:t};e.createWindow(o)}else if(1===i.length)e.wm.registered_loaders[n[i[0]]](t);else{Array.isArray(t)||(t=[t]);var a=[],s=!0,r=!1,l=void 0;try{for(var c,d=t[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var u=c.value;u.url?a.push(u):a.push({url:u})}}catch(_){r=!0,l=_}finally{try{s||null==d.return||d.return()}finally{if(r)throw l}}var m={name:"Files",type:"imjoy/url_list",scroll:!0,data:a};e.createWindow(m)}}})).catch((function(e){throw e}))},processPermission:function(e){e&&this.resolve_permission?(this.resolve_permission(),this.resolve_permission=null):this.reject_permission?(this.reject_permission("Permission Denied!"),this.reject_permission=null):console.error("permission handler not found.")},showDoc:function(e){var t=this.pm.plugins[e],n=t.config,i={name:"About "+n.name,type:"imjoy/markdown",w:20,h:10,scroll:!0,data:{name:n.name,id:t.id,plugin_info:n,source:n&&n.docs[0]&&n.docs[0].content}};this.createWindow(i)},clearPluginUrl:function(){var e=Object.assign({},this.$route.query);delete e.upgrade,this.$router.replace({query:e})},sharePlugin:function(e){var t=this.pm.plugins[e],n=t.config,i="".concat(location.protocol,"//").concat(location.hostname).concat(location.port?":"+location.port:"","/#/app/?p=").concat(n.origin);this.showAlert(null,{content:'<h3>Sharing "'.concat(t.name,'"</h3> <br> <a style="word-wrap: break-word;" href="').concat(encodeURI(i),'" target="_blank">').concat(i,'</a> <br> (Right click on the link and select "Copy Link Address")')});var o=Object.assign({},this.$route.query);o.p=n.origin,this.$router.replace({query:o})},downloadPlugin:function(e){var t=this.pm.plugins[e],n=t.config,i=t.name+"_"+Object(j["g"])()+".imjoy.html",o=new Blob([n.code],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(o,i)},installPlugin:function(e,t){var n=this;this.installing=!0,this.pm.installPlugin(e,t).then((function(e){n.showAddPluginDialog=!1,n.clearPluginUrl(e),n.$forceUpdate()})).finally((function(){n.installing=!1}))},updatePlugin:function(e){var t=this,n=this.pm.plugins[e],i=n.config;i.origin?(this.showMessage("Fetching plugin file..."),this.getPlugin4Install(i.origin).then((function(){t.showStatus(null," "),t.show_plugin_templates=!1,t.showAddPluginDialog=!0,t.init_plugin_search=null,t.show_plugin_store=!1,t.show_plugin_url=!1})).catch((function(e){t.showMessage("Failed to fetch plugin source code (".concat(e,").")),console.error(e)}))):this.showAlert(null,"Origin not found for this plugin.")},reloadPlugin:function(e){var t=this;this.pm.unloadPlugin(e),this.$nextTick((function(){t.pm.reloadPlugin(e).finally((function(){t.$forceUpdate()}))}))},unloadPlugin:function(e){this.pm.unloadPlugin(e)},removePlugin:function(e){var t=this;this.showConfirm(null,{title:"Removing Plugin",content:"Do you really want to <strong>delete</strong> this plugin",confirm_text:"Yes"}).then((function(n){n&&t.pm.removePlugin(e)}))},logPlugin:function(e){console.log(e,this.pm,this.em,this.fm)},startTerminal:function(e){e.startTerminal()},editPlugin:function(e){var t=this.pm.plugins[e],n=t.config,i={name:"Edit-"+n.name||!1,type:"imjoy/plugin-editor",config:t.config,plugin:t,plugin_manager:this.pm,engine_manager:this.em,w:30,h:20,standalone:this.screenWidth<1200,data:{name:n.name,id:t.id,code:n.code}};this.createWindow(i)},newPlugin:function(e){var t={name:"New Plugin",type:"imjoy/plugin-editor",config:{},plugin_manager:this.pm,engine_manager:this.em,w:30,h:20,standalone:this.screenWidth<1200,plugin:null,data:{type:"imjoy/code",name:"new plugin",id:"plugin_"+Object(j["g"])(),code:JSON.parse(JSON.stringify(e))}};this.createWindow(t)},loadFiles:function(e){if(1===e.length){var t=e[0],n=this.wm.getDataLoaders(t),i=Object.keys(n);if(1===i.length)try{return this.wm.registered_loaders[n[i[0]]](t)}catch(r){console.error("Failed to load with the matched loader ".concat(n[0]),r)}}for(var o=0;o<e.length;o++){var a=e[o];a.loaders=a.loaders||this.wm.getDataLoaders(a)}var s={name:"Files",type:"imjoy/files",config:{},select:-1,_op:"__file_loader__",_source_op:null,_workflow_id:"files_"+Object(j["g"])(),_transfer:!1,data:e};this.createWindow(s)},clearWorkflow:function(){this.workflow_joy_config.data=null,this.$refs.workflow.setupJoy(!0)},runWorkflow:function(e){var t=this;this.status_text="",this.progress=0;var n=this.wm.active_windows[this.wm.active_windows.length-1]||{},i=this.pm.plugin2joy(n)||{};i.target=i.target||{},i.target._op="workflow",i.target._source_op=null,i.target._workflow_id=i.target._workflow_id||"workflow_"+Object(j["g"])(),e.workflow.execute(i.target).catch((function(e){console.error(e),t.showMessage(e||"Error.",12)}))},loadWorkflow:function(e){this.workflow_joy_config.data=JSON.parse(e.workflow),this.$refs.workflow.setupJoy(!0)},loadWorkfowFromUrl:function(){var e=this,t=E["Joy"].decodeWorkflow(this.$route.query.workflow);if(t)try{this.workflow_expand=!0,this.workflow_joy_config.data=JSON.parse(t),this.$nextTick((function(){try{e.$refs.workflow.setupJoy(!0);var t=Object.assign({},e.$route.query);delete t.workflow,e.$router.replace({query:t})}catch(n){console.error(n),e.showMessage("Failed to load workflow: "+n)}}))}catch(n){console.error(n),this.showMessage("Failed to parse workflow: "+n)}else console.log("failed to workflow")},shareWorkflow:function(e){var t=E["Joy"].encodeWorkflow(e.workflow);this.showAlert(null,{content:'<h3>Sharing Workflow</h3><a style="word-wrap: break-word;" href="'.concat(location.protocol,"//").concat(location.hostname).concat(location.port?":"+location.port:"","/#/app/?workflow=").concat(t,'" target="_blank">').concat(location.protocol,"//").concat(location.hostname).concat(location.port?":"+location.port:"","/#/app/?workflow=").concat(t,'</a><br> (Right click on the link and select "Copy Link Address")')})},runOp:function(e){var t,n=this;if(!e||!e.name)throw"op not found.";if(this.status_text="",this.progress=0,e.inputs_schema){var i=this.wm.active_windows[this.wm.active_windows.length-1]||{};t=i.data&&e.inputs_schema(i.data)&&this.pm.plugin2joy(i)||{}}else t={};t.target=t.target||{},t.target._op=e.name,t.target._source_op=null,t.target._workflow_id=t.target._workflow_id||"op_"+e.name.trim().replace(/ /g,"_")+Object(j["g"])(),e.joy.__op__.execute(t.target).then((function(e){var t=n.pm.joy2plugin(e);t&&!e.__as_interface__&&(t.name=t.name||"result",t.type=t.type||"imjoy/generic",n.createWindow(t)),n.progress=100})).catch((function(t){n.showMessage("<"+e.name+">"+(t||"Error."),15)})),this.screenWidth<=800&&(this.menuVisible=!1)},selectFileChanged:function(e){this.selected_file=e.target.files[0],this.selected_files=e.target.files;for(var t=0;t<e.target.files.length;t++){var n=e.target.files[t];n.relativePath=n.webkitRelativePath,n.loaders=this.wm.getDataLoaders(n)}this.loadFiles(this.selected_files)},showSnackbar:function(e,t,n){t=String(t),this.snackbar_info=t,n&&(n*=1e3),this.snackbar_duration=n||1e4,this.show_snackbar=!0,this.$forceUpdate()},showFileDialog:function(e,t){if(t=t||{},e&&e.id){if(t.file_manager?"string"===typeof t.file_manager&&(t.file_manager=this.fm.getFileManagerByUrl(t.file_manager)):e.api.FILE_MANAGER_URL&&(t.file_manager=this.fm.getFileManagerByUrl(e.api.FILE_MANAGER_URL)),t.root=t.root||e.config&&e.config.work_dir,t.uri_type=t.uri_type||"path",t.root&&"string"!==typeof t.root)throw"You need to specify a root with string type ";e.config.api_version&&Object(j["c"])(e.config.api_version,"<=","0.1.3")?t.return_object=void 0!==t.return_object&&t.return_object:t.return_object=void 0===t.return_object||t.return_object}return t.file_manager&&t.hide_unselected?this.selected_file_managers=[t.file_manager]:this.selected_file_managers=this.fm.fileManagers,this.$refs["file-dialog"].showDialog(e,t)},uploadFileToUrl:function(e,t){var n=this;if("object"!==Object(c["a"])(t)||!t.file||!t.url)throw"You must pass an object contains keys named `file` and `url`";return console.warn("WARNING: api.uploadFileToUrl is deprecated and it will be removed soon."),e=e||{},new Promise((function(i,o){var a=new FormData;a.append("file",new Blob([t.file],{type:t.file.type||"application/octet-stream"})),n.showMessage("Uploading a file to "+t.url);var s=null;m()({method:"post",url:t.url,data:a,headers:t.headers||{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){if(s=s||e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length"),null!==s){var i=100*e.loaded/s;parseInt(i)%5==0&&(n.showProgress(null,i),n.$forceUpdate())}t.progress&&t.progress(e.loaded,s)}}).then((function(a){200!==a.status?(console.error(a),o(a.statusText)):(n.showMessage("File uploaded to ".concat(t.url)),e.log&&e.log("File uploaded to ".concat(t.url)),i(a.data))})).catch((function(e){n.showMessage("Failed to upload files, error: ".concat(e.status)),console.error(e),o(e.status)}))}))},downloadFileFromUrl:function(e,t){var n=this;if("object"!==Object(c["a"])(t)||!t.url)throw"You must pass an object contains keys named `url`";return console.warn("WARNING: api.uploadFileToUrl is deprecated and it will be removed soon."),new Promise((function(e,i){n.showMessage("Downloading from "+t.url);var o=null;m.a.get({url:t.url,method:t.method||"GET",responseType:t.responseType||"blob",onDownloadProgress:function(e){if(o=o||e.lengthComputable?e.total:e.target.getResponseHeader("content-length")||e.target.getResponseHeader("x-decompressed-content-length"),null!==o){var i=100*e.loaded/o;parseInt(i)%5==0&&(n.showProgress(null,i),n.$forceUpdate())}t.progress&&t.progress(e.loaded,o)}}).then((function(o){200!==o.status?(console.error(o),i(o.statusText)):(n.showMessage("File downloaded from ".concat(t.url)),e(o.data))})).catch((function(e){n.showMessage("Failed to download files, error: ".concat(e.statusText)),console.error(e),i(e.statusText)}))}))},showProgress:function(e,t){this.progress=t<1?100*t:t},showStatus:function(e,t){this.status_text=String(t),this.screenWidth<500&&this.showMessage(t)},showDialog:function(e,t){var n=this;return t.dialog=!0,t.type=t.type||"imjoy/joy",this.showPluginDialog=!0,this.dialog_auto_height="700px",this.dialog_window_config.fullscreen=t.fullscreen||t.standalone||!1,new Promise((function(i,o){n.pm.createWindow(e,t).then((function(e){e.on("window_size_changed",(function(e){n.dialog_auto_height="".concat(e.height+40,"px"),n.$forceUpdate()}),!0),e.on("close",(function(){n.showPluginDialog=!1})),"imjoy/joy"===t.type?(t.ok=function(){n.closePluginDialog(t),i(t.get_config())},t.cancel=function(){n.closePluginDialog(t),i()}):i(e)})).catch((function(e){n.showAlert(null,e),n.showPluginDialog=!1,o(e)}))}))},closePluginDialog:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.close();case 2:this.dialogWindows.forEach((function(e){e.close()})),this.showPluginDialog=!1;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),showAlert:function(e,t){console.log("alert: ",t),"string"===typeof t?(this.alert_config.title=null,this.alert_config.content=Object(j["d"])(t).replace(/\n/g,"<br>"),this.alert_config.confirm_text="OK"):"object"===Object(c["a"])(t)&&t.content?(this.alert_config.title=t.title,this.alert_config.content=O.a.sanitize(String(t.content))||"undefined",this.alert_config.confirm_text=t.confirm_text||"OK"):this.alert_config.content=JSON.stringify(t),this.alert_config.show=!0,this.$forceUpdate()},showPrompt:function(e,t,n){var i=this;return new Promise((function(e,o){if("string"===typeof t)i.prompt_config.title=null,i.prompt_config.content=Object(j["d"])(t).replace(/\n/g,"<br>"),i.prompt_config.placeholder=n,i.prompt_config.cancel_text="Cancel",i.prompt_config.confirm_text="OK";else{if("object"!==Object(c["a"])(t)||!t.content)throw o("unsupported prompt arguments"),"unsupported prompt arguments";i.prompt_config.title=t.title,i.prompt_config.content=O.a.sanitize(String(t.content))||"undefined",i.prompt_config.placeholder=t.placeholder||null,i.prompt_config.cancel_text=t.cancel_text||"Cancel",i.prompt_config.confirm_text=t.confirm_text||"OK"}i.prompt_config.confirm=function(){e(i.prompt_config.value||i.prompt_config.placeholder)},i.prompt_config.cancel=function(){o()},i.prompt_config.show=!0}))},showConfirm:function(e,t){var n=this;return new Promise((function(e,i){if("string"===typeof t)n.confirm_config.title=null,n.confirm_config.content=Object(j["d"])(t).replace(/\n/g,"<br>"),n.confirm_config.cancel_text="Cancel",n.confirm_config.confirm_text="OK";else{if("object"!==Object(c["a"])(t)||!t.content)throw i("unsupported prompt arguments"),"unsupported prompt arguments";n.confirm_config.title=t.title,n.confirm_config.content=O.a.sanitize(String(t.content))||"undefined",n.confirm_config.cancel_text=t.cancel_text||"Cancel",n.confirm_config.confirm_text=t.confirm_text||"OK"}n.confirm_config.confirm=function(){e(!0)},n.confirm_config.cancel=function(){e(!1)},n.confirm_config.show=!0}))},showLog:function(e){var t={name:"Log (".concat(e.name,")"),type:"imjoy/log",data:{plugin_id:e.id,plugin_name:e.name,log_history:e._log_history}};this.createWindow(t)},openUrl:function(e,t){Object(j["b"])(t),Object.assign(document.createElement("a"),{target:"_blank",href:t}).click()},sleep:function(e,t){return Object(j["b"])(t),new Promise((function(e){return setTimeout(e,Math.round(1e3*t))}))}}},T=U,R=(n("6f02"),n("2877")),L=Object(R["a"])(T,s,r,!1,null,"d81e54b6",null);L.options.__file="Imjoy.vue";var F=L.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("a",{attrs:{href:"https://github.com/imjoy-team/imjoy-engine",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/badge/imjoy-v"+e.app_version+"-success.svg",alt:"ImJoy"}})]),e._v(" \n  "),e._m(0),e._v(" \n  "),e._m(1),e._v(" \n\n  "),e._m(2),e._v(" \n  "),e._m(3),e._v(" \n  "),n("br"),n("br"),n("img",{staticStyle:{width:"300px"},attrs:{src:"static/img/imjoy-logo-black.svg"}}),n("br"),n("md-button",{staticClass:"normal-text",attrs:{href:"https://github.com/imjoy-team",target:"_blank"}},[e._v("Version: "+e._s(e.app_version)+" "),n("br"),e._v("\n    Made by the ImJoy-Team with "),n("span",{staticClass:"red"},[e._v("❤")])]),n("br"),n("br"),e._m(4),e._m(5),n("p",[e._v("Main Contributors:")]),e._m(6),e._m(7),n("p",[e._v("This project is mainly funded by")]),e._m(8)],1)},q=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/imjoy-engine",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/badge/dynamic/json.svg?color=success&label=imjoy%20engine&prefix=v&query=version&url=https%3A%2F%2Fraw.githubusercontent.com%2Fimjoy-team%2Fimjoy-engine%2Fmaster%2Fimjoy%2FVERSION",alt:"ImJoy-Engine"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy/actions",target:"_blank"}},[n("img",{attrs:{src:"https://github.com/imjoy-team/ImJoy/workflows/Build%20Site/badge.svg",alt:"Build Site"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://zenodo.org/badge/latestdoi/137741898",target:"_blank"}},[n("img",{attrs:{src:"https://zenodo.org/badge/137741898.svg",alt:"DOI"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/github/license/imjoy-team/imjoy-engine.svg",alt:"LICENSE"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    The ImJoy project was originally carried out in\n    "),n("a",{attrs:{href:"https://research.pasteur.fr/en/team/imaging-and-modeling/",target:"_blank"}},[e._v("Imaging and Modeling Unit")]),e._v("\n    at Institut Pasteur.\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    Ongoing development of ImJoy is mainly supported by the\n    "),n("a",{attrs:{href:"https://cellprofiling.org/",target:"_blank"}},[e._v("Cell Profiling Group")]),e._v("\n    headed by Emma Lundberg at\n    "),n("a",{attrs:{href:"https://www.scilifelab.se/",target:"_blank"}},[e._v("SciLifeLab")]),e._v(".\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("Wei OUYANG")]),n("li",[e._v("Florian MUELLER")]),n("li",[e._v("Martin HJELMARE")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("\n    We also thank\n    "),n("a",{attrs:{href:"https://sites.google.com/site/imagingandmodeling/people",target:"_blank"}},[e._v("all the team members")]),e._v("\n    from the Imaging and Modeling Unit and people who have been using,\n    testing, contributing valuable feedbacks and suggestions for improving\n    ImJoy.\n  ")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"https://www.pasteur.fr",target:"_blank"}},[n("img",{staticStyle:{width:"150px",margin:"10px"},attrs:{src:"static/img/Institut_Pasteur_logo.svg",alt:"Institut Pasteur"}}),e._v("\n        \n      "),n("img",{staticStyle:{width:"150px",margin:"10px"},attrs:{src:"static/img/logga-KAW-300x155.png"}})])])}],J={name:"about",created:function(){this.app_version=C["a"]}},K=J,B=(n("b339"),Object(R["a"])(K,z,q,!1,null,"1440f165",null));B.options.__file="About.vue";var N=B.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("a",{staticClass:"github-corner",attrs:{href:"https://github.com/imjoy-team/ImJoy","aria-label":"View source on Github"}},[n("svg",{attrs:{viewBox:"0 0 250 250","aria-hidden":"true"}},[n("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),n("path",{staticClass:"octo-arm",staticStyle:{"transform-origin":"130px 106px"},attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),n("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])]),n("section",{staticClass:"cover show",staticStyle:{background:"rgb(209, 220, 239)"}},[n("div",{attrs:{id:"particles-js"}}),n("div",{staticClass:"cover-main"},[e._m(0),n("h1",[e._v("Deep Learning Made Easy!")]),n("p",{staticClass:"badges"},[n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/badge/imjoy-v"+e.app_version+"-success.svg",alt:"ImJoy"}})]),e._v("\n         \n\n        "),e._m(1),e._v(" \n        "),e._m(2),e._v(" \n      ")]),e._m(3)]),n("div",{staticClass:"mask"})])])},H=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("img",{attrs:{src:"/static/img/imjoy-logo-black.svg?sanitize=true",width:"380"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy/actions",target:"_blank"}},[n("img",{attrs:{src:"https://github.com/imjoy-team/ImJoy/workflows/Build%20Site/badge.svg",alt:"Build Site"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("img",{attrs:{src:"https://img.shields.io/github/license/imjoy-team/imjoy-engine.svg",alt:"LICENSE"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("a",{attrs:{href:"https://rdcu.be/bYbGO",target:"_blank"}},[e._v("Publication")]),n("a",{attrs:{href:"/docs"}},[e._v("Docs")]),n("a",{attrs:{href:"/repo",onclick:"removeWelcomePage()",target:"_self"}},[e._v("Plugins")]),n("a",{attrs:{href:"/#/app",onclick:"removeWelcomePage()",target:"_self"}},[e._v("Start ImJoy")])])}],G={name:"home",created:function(){this.app_version=C["a"],document.addEventListener("DOMContentLoaded",(function(){particlesJS.load("particles-js","/static/js/particlesjs-config.json",(function(){console.log("particles.js config loaded")}))}))},beforeDestroy:function(){particlesJS.stop()}},Y=G,Z=(n("fdcf"),Object(R["a"])(Y,V,H,!1,null,"ee92088a",null));Z.options.__file="Home.vue";var Q=Z.exports;o["default"].use(a["a"]);var X={base:window.location.pathName,routes:[{path:"/",name:"Home",component:Q},{path:"/app",name:"app",component:F},{path:"/:)",redirect:{name:"joy"}},{path:"/%F0%9F%98%82",name:"joy",component:F},{path:"/imjoy",name:"Imjoy",component:F},{path:"/about",name:"About",component:N},{path:"*",redirect:"/404.html"}]},ee=new a["a"](X),te=n("43f9"),ne=n.n(te),ie=(n("51de"),n("e094"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-app",{attrs:{id:"app","md-waterfall":"","md-mode":"fixed"}},[n("md-app-content",[n("router-view")],1)],1)}),oe=[],ae={name:"app",data:function(){return{}},mounted:function(){var e=this;this.$nextTick((function(){var t=function(){e.$root.$data.store.event_bus.emit("resize",{height:window.innerHeight,width:window.innerWidth})};t(),window.addEventListener("resize",t),document.addEventListener("orientationchange",t);var n=document.getElementById("welcome-page");n&&n.parentNode.removeChild(n);var i=document.getElementById("loading-imjoy-section");i&&i.parentNode.removeChild(i)}))},methods:{},watch:{}},se=ae,re=(n("034f"),Object(R["a"])(se,ie,oe,!1,null,null,null));re.options.__file="App.vue";var le=re.exports,ce=n("7be8"),de=n.n(ce),ue=I.a.create(),me={event_bus:ue},_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-row",attrs:{flex:""}},[n("md-button",{staticClass:"site-title",on:{click:function(t){e.$router.push("/")}}},[n("img",{staticClass:"site-title",attrs:{src:"static/img/imjoy-logo-white.svg",alt:"ImJoy"}}),n("span",{staticClass:"superscript"},[e._v("beta")])]),n("span",{directives:[{name:"show",rawName:"v-show",value:"/"!=e.$route.path,expression:"$route.path != '/'"}],staticClass:"md-layout-item md-medium-hide subheader-title"},[e._v("Deep Learning Made Easy!")]),n("div",{staticClass:"md-toolbar-section-end"},[e.screenWidth<600?n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-primary md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("menu")])],1),n("md-menu-content",[n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/"!=e.$route.path,expression:"$route.path != '/'"}],staticClass:"md-primary md-button menu-button",on:{click:function(t){e.$router.push("/")}}},[e._v("Home")]),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/app"!=e.$route.path,expression:"$route.path != '/app'"}],staticClass:"md-primary md-button menu-button",on:{click:function(t){e.$router.push("/app")}}},[e._v("Start ImJoy")]),n("md-menu-item",{staticClass:"md-primary md-button menu-button",attrs:{href:"https://github.com/imjoy-team/ImJoy"}},[e._v("Source")]),n("md-menu-item",{staticClass:"md-primary md-button menu-button",attrs:{href:"/docs"}},[e._v("Docs")]),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/about"!=e.$route.path,expression:"$route.path != '/about'"}],staticClass:"md-primary md-button menu-button",on:{click:function(t){e.$router.push("/about")}}},[e._v("About")])],1)],1):e._e(),e.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/"!=e.$route.path,expression:"$route.path != '/'"}],staticClass:"md-accent",on:{click:function(t){e.$router.push("/")}}},[n("md-icon",[e._v("home")]),e._v(" Home\n        "),n("md-tooltip",[e._v("Home Page")])],1):e._e(),e._v("\n       \n      "),e.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/app"!=e.$route.path,expression:"$route.path != '/app'"}],staticClass:"md-accent",on:{click:function(t){e.$router.push("/app")}}},[n("md-icon",{staticClass:"md-size-1x svg-icon",attrs:{"md-src":"static/img/imjoy-icon-white.svg"}}),e._v("\n        ImJoy App\n        "),n("md-tooltip",[e._v("Start ImJoy App")])],1):e._e(),e._v("\n       \n      "),e.screenWidth>=600?n("md-button",{staticClass:"md-accent",attrs:{href:"https://github.com/imjoy-team/ImJoy",target:"_blank"}},[n("md-icon",{staticClass:"md-size-1x svg-icon",attrs:{"md-src":"static/img/github.svg"}}),e._v("source\n        "),n("md-tooltip",[e._v("Source code on Github")])],1):e._e(),e._v("\n       \n      "),e.screenWidth>=600?n("md-button",{staticClass:"md-accent",attrs:{href:"/docs"}},[n("md-icon",[e._v("library_books")]),e._v("Docs\n        "),n("md-tooltip",[e._v("Documentation")])],1):e._e(),e._v("\n       \n      "),e.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/about"!=e.$route.path,expression:"$route.path != '/about'"}],staticClass:"md-accent",on:{click:function(t){e.$router.push("/about")}}},[n("md-icon",[e._v("info")]),e._v(" About\n        "),n("md-tooltip",[e._v("About ImJoy.io")])],1):e._e()],1)],1)])},pe=[],he={name:"navbar",data:function(){return{screenWidth:window.innerWidth}},created:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus},mounted:function(){this.screenWidth=window.innerWidth,this.event_bus.on("resize",this.updateSize)},beforeDestroy:function(){this.event_bus.off("resize",this.updateSize)},methods:{updateSize:function(e){this.screenWidth=e.width},shareOnTwitter:function(){var e="https://imjoy.io",t=" #ImJoy ";window.open("http://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t),"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")}}},ge=he,fe=(n("2d2f"),Object(R["a"])(ge,_e,pe,!1,null,"fbddfd62",null));fe.options.__file="Navbar.vue";var we=fe.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"/app"!=e.$route.path&&"/app"!=e.$route.path?n("div",{staticClass:"footer"},[n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"md-accent footer-button",attrs:{target:"_blank",href:"https://github.com/imjoy-team/ImJoy/issues"}},[e._v("Create an issue on Github")])],1),n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"footer-button",attrs:{href:"https://creativecommons.org/licenses/by/4.0/",target:"_blank"}},[n("md-tooltip",[e._v("Except where otherwise noted, content on this site is licensed under\n        a Creative Commons Attribution 4.0 International license.")]),n("img",{attrs:{id:"cc-by-img",src:"static/img/by.svg",alt:"CC BY 4.0"}})],1),n("md-button",{staticClass:"footer-button",on:{click:function(t){e.$router.push("/about")}}},[e._v("About ImJoy.io")])],1),n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"footer-button",attrs:{href:"https://github.com/imjoy-team",target:"_blank"}},[e._v("Made by the ImJoy Team with "),n("span",{staticClass:"red"},[e._v("❤")])]),n("md-button",{staticClass:"footer-button",attrs:{target:"_blank",href:"https://sites.google.com/site/imagingandmodeling/"}},[e._v("Powered by Imaging and Modeling Unit")]),e._m(0)],1)]):e._e()},be=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"https://www.pasteur.fr",target:"_blank"}},[n("img",{attrs:{id:"ip-img",src:"static/img/Institut_Pasteur_logo.svg",alt:"Institut Pasteur"}})])}],ye={name:"main-footer",data:function(){return{mode:"about",showDialog:!1,showQuestion:!1}},created:function(){this.store=this.$root.$data.store},mounted:function(){},methods:{}},ke=ye,xe=(n("3145"),Object(R["a"])(ke,ve,be,!1,null,"48776f65",null));xe.options.__file="Footer.vue";var Ce=xe.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"whiteboard",staticClass:"whiteboard noselect",on:{mouseup:function(t){e.show_overlay=!1},click:function(t){e.unselectWindows(t)}}},[e.show_overlay?n("div",{staticClass:"overlay",on:{mousemove:e.overlayMousemove,click:function(t){e.show_overlay=!1}}}):e._e(),e.gridWindows?n("grid-layout",{directives:[{name:"show",rawName:"v-show",value:!e.wm.selected_window&&e.gridWindows.length>0,expression:"!wm.selected_window && gridWindows.length > 0"}],ref:"window_grid",staticStyle:{"min-height":"100%"},attrs:{layout:e.gridWindows,"col-num":e.col_num,"is-mirrored":!1,"auto-size":!0,"row-height":e.row_height,"is-responsive":!0,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,margin:[3,3],"use-css-transforms":!0},on:{"update:layout":function(t){e.gridWindows=t},"update:colNum":function(t){e.col_num=t},"update:rowHeight":function(t){e.row_height=t}}},e._l(e.gridWindows,(function(t){return n("grid-item",{key:t.id,attrs:{"drag-allow-from":".drag-handle","drag-ignore-from":".no-drag",x:t.x,y:t.y,w:t.w,h:t.h,i:t.i},on:{"update:w":function(n){e.$set(t,"w",n)},"update:h":function(n){e.$set(t,"h",n)},resize:function(n){e.viewChanging(t)},move:function(n){e.viewChanging(t)},resized:function(n){e.show_overlay=!1,t.resize&&t.resize(),e.focusWindow(t)},moved:function(n){e.show_overlay=!1,t.move&&t.move(),e.focusWindow(t)}}},[n("window",{attrs:{w:t,withDragHandle:!0,loaders:e.wm.registered_loaders},on:{detach:e.detach,duplicate:e.duplicate,select:e.selectWindow,close:e.close,fullscreen:e.fullScreen,normalsize:e.normalSize}})],1)}))):e._e(),e.gridWindows&&0!==e.gridWindows.length?e._e():n("div",{staticClass:"md-layout md-gutter md-alignment-center-center"},[n("md-empty-state",{attrs:{"md-icon":"static/img/imjoy-io-icon.svg","md-label":"","md-description":""}})],1),e._l(e.standaloneWindows,(function(t){return n("window",{directives:[{name:"show",rawName:"v-show",value:e.wm.selected_window===t,expression:"wm.selected_window === w"}],key:t.id+"_standalone",attrs:{w:t,loaders:e.wm.registered_loaders,withDragHandle:!1},on:{detach:e.detach,duplicate:e.duplicate,select:e.selectWindow,close:e.close,fullscreen:e.fullScreen,normalsize:e.normalSize}})}))],2)},Pe=[],Oe={name:"whiteboard",props:{mode:{type:String,default:function(){return"grid"}},windowManager:{type:Object,default:function(){return null}}},data:function(){return{row_height:30,column_width:30,col_num:20,active_windows:[],show_overlay:!1,scrolling:!1,scrollClientY:0,screenWidth:window.innerWidth,windows:[]}},created:function(){this.wm=this.windowManager,this.windows=this.wm&&this.wm.windows,Object(j["b"])(this.windows),this.event_bus=this.wm.event_bus,this.event_bus.on("add_window",this.onWindowAdd),this.event_bus.on("close_window",this.onWindowClose),this.event_bus.on("resize",this.updateSize)},mounted:function(){this.screenWidth=window.innerWidth,this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width),window.onbeforeunload=function(e){var t="Are you sure you want to leave?";return"undefined"==typeof e&&(e=window.event),e&&(e.returnValue=t),t}},beforeDestroy:function(){this.event_bus.off("add_window",this.onWindowAdd),this.event_bus.off("close_window",this.onWindowClose),this.event_bus.off("resize",this.updateSize)},computed:{gridWindows:function(){var e=this;return this.windows.filter((function(t){return!t.dialog&&!t.standalone&&"grid"===e.mode}))},standaloneWindows:function(){var e=this;return this.windows.filter((function(t){return!t.dialog&&("grid"!==e.mode||t.standalone)}))}},methods:{overlayMousemove:function(e){var t,n=this,i=this.$refs.whiteboard.getBoundingClientRect(),o=i.y,a=i.y+i.height;this.scrollClientY=e.clientY,this.scrollClientY<o+10?(t=function(){n.$refs.whiteboard.scrollTop=n.$refs.whiteboard.scrollTop-(o-n.scrollClientY)/2,n.show_overlay&&n.scrollClientY<o?(n.scrolling=!0,window.requestAnimationFrame(t)):n.scrolling=!1},this.scrolling||t()):this.scrollClientY>a-20&&(t=function(){n.$refs.whiteboard.scrollTop=n.$refs.whiteboard.scrollTop+(n.scrollClientY-a+20)/2,n.show_overlay&&n.scrollClientY>a-10?(n.scrolling=!0,window.requestAnimationFrame(t)):n.scrolling=!1},this.scrolling||t())},updateSize:function(e){this.screenWidth=e.width,this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width)},onWindowAdd:function(e){e.fullscreen&&this.fullScreen(e),this.selectWindow(e,{}),this.$forceUpdate()},onWindowClose:function(){this.$forceUpdate()},detach:function(e){var t=this;this.close(e);var n=Object.assign({},e,{name:e.name,type:e.window_type,data:e.data,config:e.config,w:e.w,h:e.h,fullscreen:e.fullscreen,standalone:!0});this.$nextTick((function(){t.$emit("create",n)}))},close:function(e){var t=this.active_windows.indexOf(e);t>=0&&(this.active_windows[t].selected=!1,this.active_windows[t].refresh(),this.active_windows.splice(t,1),this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,null)),e.close(),this.$emit("close",e)},isTypedArray:function(e){return!!e&&void 0!==e.byteLength},fullScreen:function(e){e.fullscreen=!0,this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width);var t=parseInt((this.$refs.whiteboard.clientHeight-76)/this.row_height),n=parseInt(this.$refs.whiteboard.clientWidth/this.column_width)+1;e._h=e.h,e._w=e.w,e.h=t,e.w=n,this.$refs.window_grid.layoutUpdate(),setTimeout((function(){e.resize(),e.refresh(),e.focus()}),500)},normalSize:function(e){this.col_num=parseInt(this.$refs.whiteboard.clientWidth/this.column_width),e.fullscreen=!1,e.h=e._h||5,e.w=e._w||5,e._w=null,e._h=null,this.$refs.window_grid.layoutUpdate(),setTimeout((function(){e.resize(),e.refresh(),e.focus()}),500)},duplicate:function(e){this.$emit("create",{name:e.name+Object(j["g"])(),type:e.window_type,data:e.data,config:e.config,w:e.w,h:e.h,fullscreen:e.fullscreen,standalone:e.standalone})},unselectWindows:function(e){if(e.target.classList.contains("vue-grid-layout")&&this.active_windows&&this.active_windows.length>0){for(var t=0;t<this.active_windows.length;t++)this.active_windows[t].selected=!1,this.active_windows[t].refresh();this.active_windows=[],this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,null),this.$forceUpdate()}},selectWindow:function(e,t){if(e.selected=!0,e.refresh&&e.refresh(),this.active_windows.length<=0||this.active_windows[this.active_windows.length-1]!==e){if(!t.shiftKey)for(var n=0;n<this.active_windows.length;n++)this.active_windows[n].selected=!1,this.active_windows[n].refresh();t.shiftKey&&this.active_windows.length>0?this.active_windows.push(e):this.active_windows=[e],this.wm.active_windows=this.active_windows,this.$emit("select",this.active_windows,e)}else if(!t.shiftKey&&this.active_windows.length>1){for(var i=0;i<this.active_windows.length;i++)this.active_windows[i]!==e&&(this.active_windows[i].selected=!1),this.active_windows[i].refresh();this.active_windows=[e]}this.$forceUpdate()},viewChanging:function(){this.show_overlay=!0},focusWindow:function(e){this.show_overlay=!1,this.selectWindow(e,{})},stopDragging:function(){var e=this;setTimeout((function(){e.show_overlay=!1,e.$forceUpdate()}),300)}}},Ee=Oe,$e=(n("6cd1"),Object(R["a"])(Ee,je,Pe,!1,null,"cad5ba2e",null));$e.options.__file="Whiteboard.vue";var We=$e.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joy"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"joy-container"},[n("div",{ref:"editor",staticClass:"joy-editor"})])])},Ie=[],Me={name:"joy",props:{show:{type:Boolean,default:function(){return!0}},config:{type:Object,default:function(){return{}}}},data:function(){return{joy:null,isRunning:!1}},created:function(){this.store=this.$root.$data.store},mounted:function(){setTimeout(this.setupJoy,500)},watch:{config:function(){this.setupJoy()}},methods:{editSource:function(){this.$emit("edit",this.config)},setupJoy:function(e){var t=this;!e&&this.joy&&(this.config.data=this.joy.top.data),this.$nextTick((function(){if(t.$refs.editor){t.$refs.editor.innerHTML="";var e={container:t.$refs.editor,init:E["Joy"].normalizeUI(t.config.ui)||"",data:t.config.data,modules:t.config.modules||["instructions","math"],onexecute:t.config.onexecute,onupdate:t.config.onupdate};try{t.joy=new E["Joy"](e)}catch(n){throw console.error("error occured when loading the workflow",n),e.data="",t.joy=new E["Joy"](e),n}t.config.joy=t.joy}}))},runJoy:function(){this.$emit("run",this.joy)},stopJoy:function(){this.$emit("stop")}}},Ae=Me,Se=(n("27e7"),Object(R["a"])(Ae,De,Ie,!1,null,null,null));Se.options.__file="Joy.vue";var Ue=Se.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"plugin-list"},[e.title?n("md-subheader",[e._v(e._s(e.title)+" "),e.name?n("span",[e._v(e._s(e.name))]):e._e()]):e._e(),e.description?n("p",[e._v(e._s(e.description))]):e._e(),n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("md-field",{staticClass:"md-toolbar-section-start",attrs:{"md-clearable":""}},[n("md-icon",[e._v("search")]),n("md-input",{attrs:{placeholder:"Search by name..."},on:{input:e.searchPlugin},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("md-button",{directives:[{name:"show",rawName:"v-show",value:!e.search&&e.pm&&e.pm.installPlugin,expression:"!search && pm && pm.installPlugin"}],staticClass:"md-button md-primary",attrs:{disabled:e.loading},on:{click:function(t){e.updateAll()}}},[n("md-icon",[e._v("update")]),n("span",{staticClass:"md-small-hide"},[e._v("Update All")])],1)],1),e.loading?n("div",{staticClass:"loading loading-lg floating",staticStyle:{left:"-30px"}}):e._e(),n("md-list",{staticClass:"md-triple-line md-dense"},e._l(e.searched_plugins,(function(t,i){return n("div",{key:i},[n("md-list-item",[n("md-avatar",{staticClass:"md-xsmall-hide"},[n("plugin-icon",{attrs:{icon:t.icon}})],1),n("div",{staticClass:"md-list-item-text"},[n("span",[e._v(e._s(t.name+" "+t.badges))]),n("p",[e._v(e._s(t.description))]),n("p",e._l(t.tags,(function(t){return n("span",{key:t},[e._v(e._s(t)+", ")])})))]),n("span",[e.pm&&e.pm.removePlugin&&t.installed?n("md-button",{staticClass:"md-icon-button md-list-action md-accent",attrs:{disabled:e.loading},on:{click:function(n){e.plugin2_remove_=t,e.showRemoveConfirmation=!0}}},[n("md-icon",[e._v("delete_forever")]),n("md-tooltip",[e._v("Delete "+e._s(t.name))])],1):e._e(),e.pm&&e.pm.installPlugin&&!t.installed&&t.tags&&t.tags.length>0?n("md-menu",[n("md-button",{staticClass:"md-icon-button md-list-action md-primary",attrs:{"md-menu-trigger":"",disabled:e.loading}},[n("md-icon",[e._v("cloud_download")]),n("md-tooltip",[e._v("Install "+e._s(t.name))])],1),n("md-menu-content",e._l(t.tags,(function(i){return n("md-menu-item",{key:i,on:{click:function(n){e.install(t,i)}}},[n("md-icon",[e._v("cloud_download")]),e._v(e._s(i)+"\n              ")],1)})))],1):!t.installed&&e.pm&&e.pm.installPlugin?n("md-button",{staticClass:"md-icon-button md-list-action md-primary",attrs:{disabled:e.loading},on:{click:function(n){e.install(t)}}},[n("md-icon",[e._v("cloud_download")]),n("md-tooltip",[e._v("Install "+e._s(t.name))])],1):e._e(),t.installed&&e.pm&&e.pm.installPlugin?n("md-button",{staticClass:"md-icon-button md-list-action md-primary",attrs:{disabled:e.loading},on:{click:function(n){e.install(t)}}},[n("md-icon",[e._v("update")]),n("md-tooltip",[e._v("Update "+e._s(t.name))])],1):e._e()],1),n("md-menu",[n("md-button",{staticClass:"md-icon-button md-list-action",attrs:{disabled:e.loading,"md-menu-trigger":""}},[n("md-icon",{staticClass:"md-primary"},[e._v("more_horiz")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(n){e.showDocs(t)}}},[n("md-icon",[e._v("description")]),e._v("Docs\n            ")],1),t.installed&&e.pm&&e.pm.installPlugin?n("md-menu-item",{on:{click:function(n){e.install(t)}}},[n("md-icon",[e._v("update")]),e._v("Update\n            ")],1):e._e(),t.installed&&e.pm&&e.pm.removePlugin?n("md-menu-item",{on:{click:function(n){e.plugin2_remove_=t.config,e.showRemoveConfirmation=!0}}},[n("md-icon",[e._v("delete_forever")]),e._v("Delete\n            ")],1):e._e(),n("md-menu-item",{on:{click:function(n){e.showCode(t)}}},[n("md-icon",[e._v("code")]),e._v("Code\n            ")],1)],1)],1)],1),n("md-divider")],1)}))),n("md-dialog-confirm",{attrs:{"md-active":e.showRemoveConfirmation,"md-title":"Removing Plugin","md-content":"Do you really want to <strong>delete</strong> this plugin","md-confirm-text":"Yes","md-cancel-text":"Cancel"},on:{"update:mdActive":function(t){e.showRemoveConfirmation=t},"md-cancel":function(t){e.showRemoveConfirmation=!1},"md-confirm":function(t){e.remove(e.plugin2_remove_),e.showRemoveConfirmation=!1}}}),n("md-dialog",{staticClass:"editor-dialog",attrs:{"md-active":e.showEditor},on:{"update:mdActive":function(t){e.showEditor=t}}},[n("md-dialog-title",[e._v(e._s(e.plugin_name))]),n("md-dialog-content",[e.showEditor?n("plugin-editor",{staticClass:"code-editor",attrs:{title:"Plugin Editor"},model:{value:e.editorCode,callback:function(t){e.editorCode=t},expression:"editorCode"}}):e._e()],1),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.downloadCode()}}},[e._v("Download")]),n("md-button",{staticClass:"md-primary",on:{click:function(t){e.showEditor=!1}}},[e._v("Exit")])],1)],1),n("md-dialog",{attrs:{"md-active":e.showDocsDialog},on:{"update:mdActive":function(t){e.showDocsDialog=t}}},[n("md-dialog-content",[e.docs&&""!=e.docs.trim()?n("div",{staticStyle:{"padding-left":"10px","padding-right":"5px"},domProps:{innerHTML:e._s(e.sanitizedMarked(e.docs))}}):n("h3",[e._v("Oops, this plugin has no documentation!")])]),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.showDocsDialog=!1}}},[e._v("OK")])],1)],1)],1)},Re=[],Le=(n("5df3"),n("3b2b"),n("386d"),n("b54a"),n("e0c1")),Fe=n.n(Le),ze={name:"plugin-list",props:{name:{type:String,default:null},description:{type:String,default:null},configUrl:{type:String,default:null},pluginManager:{type:[Object],default:null},workspace:{type:String,default:"default"},title:{type:String,default:null},initSearch:{type:String,default:null},center:{type:Boolean,default:!0},plugins:{type:Array,default:function(){return null}}},data:function(){return{loading:!1,search:"",editorCode:"",editorPlugin:null,showEditor:!1,plugin_name:"",containerWidth:500,uri_root:null,plugin_dir:null,manifest:null,available_plugins:[],searched_plugins:[],showRemoveConfirmation:!1,plugin2_remove_:null,showDocsDialog:!1,docs:null,pm:null}},created:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus;var e=new Fe.a.Renderer;e.link=function(e,t,n){var i=Fe.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Fe.a.setOptions({renderer:e}),O.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return O.a.sanitize(Fe()(e))}},mounted:function(){var e=this;if(this.search=this.initSearch||"",this.containerWidth=this.$refs.container.offsetWidth,this.event_bus.on("resize",this.updateSize),this.pm=this.pluginManager,this.plugins)this.available_plugins=this.plugins,this.searched_plugins=this.plugins,this.search&&this.searchPlugin();else if(this.configUrl){var t=this.configUrl;(t.startsWith("https://raw.githubusercontent.com")||t.startsWith("https://gist.githubusercontent.com"))&&-1===t.indexOf("?")&&(t=t+"?"+Object(j["g"])()),m.a.get(t).then((function(t){if(t&&t.data&&t.data.plugins){e.manifest=t.data,e.available_plugins=e.manifest.plugins,e.searched_plugins=e.manifest.plugins;var n=e.manifest.uri_root;n.startsWith("http")||(n=e.configUrl.replace(new RegExp("manifest.imjoy.json$"),W.a.trim(n,"/")));for(var i=0;i<e.available_plugins.length;i++){var o=e.available_plugins[i];o.uri=o.uri||o.name+".html",o.uri.startsWith(n)||o.uri.startsWith("http")||(o.uri=n+"/"+o.uri),o._id=o._id||o.name.replace(/ /g,"_")}e.plugin_dir=e.manifest.uri_root,e.plugin_dir?(e.uri_root=location.protocol+"//"+location.host,e.plugin_dir.startsWith("http")||(e.plugin_dir=e.uri_root+e.plugin_dir)):(e.uri_root="",e.plugin_dir=""),e.search&&e.searchPlugin()}}))}},beforeDestroy:function(){this.event_bus.off("resize",this.updateSize)},watch:{plugins:{handler:function(e){this.$data.available_plugins=e,this.$data.searched_plugins=e},deep:!0}},methods:{toLower:function(e){return e.toString().toLowerCase()},searchByName:function(e,t){var n=this;return t?e.filter((function(e){return n.toLower(e.name+" "+e.description).includes(n.toLower(t))})):e},searchPlugin:function(){this.searched_plugins=this.searchByName(this.available_plugins,this.search)},updateSize:function(){this.containerWidth=this.$refs.container.offsetWidth},downloadCode:function(){this.$emit("input",this.codeValue);var e=this.window&&this.window.plugin&&this.window.plugin.name?this.window.plugin.name+"_"+Object(j["g"])()+".imjoy.html":"plugin_"+Object(j["g"])()+".imjoy.html",t=new Blob([this.codeValue],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(t,e)},showDocs:function(e){var t=this;if(e.installed)this.pm.getPluginDocs(e._id).then((function(e){t.docs=e,t.showDocsDialog=!0,t.$forceUpdate()})).catch((function(t){console.log("error occured when editing ",e.name,t)}));else{var n=e.uri;(n.startsWith("https://raw.githubusercontent.com")||n.startsWith("https://gist.githubusercontent.com"))&&-1===n.indexOf("?")&&(n=n+"?"+Object(j["g"])()),m.a.get(n).then((function(e){if(e&&e.data){var i=Object(E["parseComponent"])(e.data);t.docs=i.docs&&i.docs[0]&&i.docs[0].content,t.showDocsDialog=!0,t.$forceUpdate()}else alert("failed to get plugin code from "+n)}))}},showCode:function(e){var t=this;if(e.installed)this.pm.getPluginSource(e._id).then((function(n){t.editorCode=n,t.editorPlugin=e,t.plugin_name="Plugin Source Code:"+e.name,t.showEditor=!0,t.$forceUpdate()})).catch((function(t){console.log("error occured when editing ",e.name,t)}));else{var n=e.uri;(n.startsWith("https://raw.githubusercontent.com")||n.startsWith("https://gist.githubusercontent.com"))&&-1===n.indexOf("?")&&(n=n+"?"+Object(j["g"])()),m.a.get(n).then((function(i){i&&i.data?(t.editorCode=i.data,t.editorPlugin=e,t.plugin_name="Plugin Source Code",t.showEditor=!0,t.$forceUpdate()):alert("failed to get plugin code from "+n)}))}},updateAll:function(){var e=this,t=[],n=!0,i=!1,o=void 0;try{for(var a,s=this.available_plugins[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var r=a.value;r.installed&&t.push(this.install(r,r.tag))}}catch(l){i=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}Promise.all(t).then((function(){console.log("All plugins updated successfully."),e.$emit("message","All plugins updated successfully.")})).catch((function(t){console.error("Plugins updated with error.",t),e.$emit("message","Plugins updated with error.")}))},install:function(e,t){var n=this;this.pm&&this.pm.installPlugin&&(this.loading=!0,this.$forceUpdate(),this.pm.installPlugin(e,t).then((function(){n.$forceUpdate()})).catch((function(e){n.$emit("message",e),n.$forceUpdate()})).finally((function(){n.loading=!1,n.$forceUpdate()})))},remove:function(e){var t=this;if(this.pm){var n=this.pm.removePlugin(e);n&&n.then((function(){t.$forceUpdate()})).catch((function(e){t.$emit("message",e),t.$forceUpdate()}))}}}},qe=ze,Je=(n("6ea7"),Object(R["a"])(qe,Te,Re,!1,null,"371783b1",null));Je.options.__file="PluginList.vue";var Ke=Je.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plugin-editor"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading loading-lg floating"}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"floating-text"},[e._v("Loading code...")]),n("form",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file_form"},[n("input",{ref:"file_select",staticClass:"md-file",attrs:{type:"file",multiple:""},on:{change:e.fileSelected}})]),e.window?n("md-toolbar",{staticClass:"md-dense editor-toolbar md-layout",attrs:{"md-elevation":"1"}},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-menu",{attrs:{"md-size":"big"}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("folder_open")]),n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Open File")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.$refs.file_form.reset(),e.$refs.file_select.click()}}},[n("md-icon",[e._v("insert_drive_file")]),e._v("Open Local File\n          ")],1),n("md-menu-item",{attrs:{disabled:e.window.engine_manager.engines.length<=0},on:{click:function(t){e.openEngineFile()}}},[n("md-icon",[e._v("add_to_queue")]),e._v("Open Engine File\n            "),n("md-tooltip",[e._v("Load files through Plugin Engine")])],1)],1)],1),e.code_origin||e.lastModified?n("md-switch",{on:{change:e.watchModeChanged},model:{value:e.watch_file,callback:function(t){e.watch_file=t},expression:"watch_file"}},[n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Watch content change automatically.\n        ")]),e._v("\n        Watch\n      ")],1):e._e(),e.watch_file?n("md-switch",{model:{value:e.run_changed_file,callback:function(t){e.run_changed_file=t},expression:"run_changed_file"}},[n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Run automatically when code changes.\n        ")]),e._v("\n        AutoRun\n      ")],1):e._e(),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.run()}}},[n("md-icon",[e._v("play_arrow")]),n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Save and run this plugin (Ctrl+E)")])],1),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.save()}}},[n("md-icon",[e._v("save")]),n("md-tooltip",{staticClass:"md-medium-hide"},[e._v("Save this plugin (Ctrl+S)")])],1),n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.saveAs()}}},[n("md-icon",[e._v("cloud_download")]),n("md-tooltip",[e._v("Export this plugin")])],1),e.window&&e.window.config&&e.window.config._id?n("md-button",{staticClass:"md-icon-button",on:{click:function(t){e.remove()}}},[n("md-icon",[e._v("delete")]),n("md-tooltip",[e._v("Remove this plugin")])],1):e._e(),this.editor&&e.window&&e.window.config&&e.window.config.tags&&e.window.config.tags.length>0?n("md-field",{staticStyle:{"max-width":"100px"}},[n("md-select",{attrs:{id:"tag",name:"tag"},on:{"md-selected":function(t){e.window.config.tags.includes(e.window.config.tag)&&e.reload()}},model:{value:e.window.config.tag,callback:function(t){e.$set(e.window.config,"tag",t)},expression:"window.config.tag"}},e._l(e.window.config.tags,(function(t){return n("md-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))),n("md-tooltip",[e._v("Select a tag for testing, the plugin will be reloaded.")])],1):e._e(),this.editor&&e.window&&e.window.config&&e.window.config.engine_mode&&e.window.engine_manager?n("md-field",{staticStyle:{"max-width":"220px"}},[n("md-select",{attrs:{id:"engine_mode",name:"tag"},on:{"md-selected":function(t){e.reload()}},model:{value:e.window.config.engine_mode,callback:function(t){e.$set(e.window.config,"engine_mode",t)},expression:"window.config.engine_mode"}},[n("md-option",{attrs:{value:"auto"}},[e._v("auto")]),e._l(e.window.engine_manager.matchEngineByType(e.window.config.type),(function(t){return n("md-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],2),n("md-tooltip",[e._v("Select an engine, the plugin will be reloaded.")])],1):e._e()],1)]):e._e(),n("div",{ref:"code_editor",staticClass:"code_editor",class:e.window?"editor-with-toolbar":"editor-without-toolbar",staticStyle:{}})],1)},Ne=[],Ve=n("c2c6"),He=n("69a0"),Ge=n.n(He);window.MonacoEnvironment={getWorkerUrl:function(){var e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");return"data:text/javascript;charset=utf-8,".concat(encodeURIComponent("\n      self.MonacoEnvironment = {\n        baseUrl: '".concat(e,"/static'\n      };\n      try {\n        importScripts('").concat(e,"/static/vs/base/worker/workerMain.js');\n      } catch (e) {\n        console.error(e)\n      } finally {\n\n      }\n      ")))}};var Ye={name:"joy",props:["value","title","pluginId","window"],data:function(){return{codeValue:"",editor:null,saved:!1,code_origin:null,watch_file:!1,run_changed_file:!1,loading:!1,watch_timer:null,lastModified:null,local_file:null}},created:function(){this.store=this.$root.$data.store,this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&this.event_bus.on("resize",this.updateSize)},beforeDestroy:function(){this.event_bus&&this.event_bus.off("resize",this.updateSize),this.watch_timer&&window.clearInterval(this.watch_timer)},mounted:function(){var e=this;this.$el.addEventListener("touchmove",(function(e){e.preventDefault()})),this.codeValue=this.value,this.editor=Ve["editor"].create(this.$refs.code_editor,{value:this.codeValue,language:"html",minimap:{enabled:this.$el.clientWidth>500}}),this.window.api.on("refresh",(function(){e.editor.layout()})),this.window&&this.window.api.on("resize",(function(){e.$nextTick(e.updateSize)})),this.updateSize(),this.editor.addCommand(window.monaco.KeyMod.CtrlCmd|window.monaco.KeyCode.KEY_S,(function(){e.save()})),this.editor.addCommand(window.monaco.KeyMod.CtrlCmd|window.monaco.KeyCode.KEY_E,(function(){e.run()})),this.editor.addCommand(window.monaco.KeyMod.CtrlCmd|window.monaco.KeyCode.KEY_L,(function(){e.loadCodeFromURL()}))},methods:{updateSize:function(){var e=this;if(this.editor){var t=this.$el.clientWidth>500,n=this.$el.clientWidth>900;this.editor.updateOptions({minimap:{enabled:n},lineNumbers:t?"on":"off",folding:t,lineDecorationsWidth:t?5:2}),this.editor.layout(),setTimeout((function(){e.editor.layout(),e.window.refresh()}),200),setTimeout((function(){e.editor.layout(),e.window.refresh()}),500)}},save:function(){var e=this;return Object(j["b"])(this.window.plugin_manager),new Promise((function(t,n){e.editor?(e.codeValue=e.editor.getValue(),e.$emit("input",e.codeValue),e.window.plugin_manager.savePlugin({pluginId:e.pluginId,code:e.codeValue,tag:e.window.config&&e.window.config.tag,origin:e.window.config&&e.window.config.origin}).then((function(n){e.window.data.config=n,e.saved=!0,e.reload().catch((function(){e.window.config=n})).finally((function(){e.window.data._id=n._id,e.window.name="Edit-"+n.name,e.window.data._name=n.name,e.$forceUpdate(),t()}))}))):n("editor is not available")}))},fileSelected:function(){this.lastModified=null,this.$refs.file_select.files&&(this.local_file=this.$refs.file_select.files[0],this.loadCodeFromFile(this.local_file,!1))},watchModeChanged:function(){var e=this;this.watch_file?(this.editor.updateOptions({readOnly:!0}),this.lastModified="old",this.watch_timer=setInterval((function(){e.$forceUpdate(),e.code_origin?e.loadCodeFromURL():e.loadCodeFromFile(e.local_file,!0)}),1e3)):(this.editor.updateOptions({readOnly:!1}),this.watch_timer&&(window.clearInterval(this.watch_timer),this.watch_timer=null),this.loading=!1,this.run_changed_file=!1,this.$forceUpdate())},loadCodeFromFile:function(e,t){var n=this;if(e=e||this.local_file,e){this.code_origin=null;var i=new FileReader;i.onload=function(){n.local_file=e;try{var o=i.result;n.lastModified==e.lastModified&&Ge.a.hash(o)===Ge.a.hash(n.editor.getValue())||(n.lastModified=e.lastModified,n.loading=!0,n.$forceUpdate(),n.window.plugin_manager.parsePluginCode(o),n.editor.setValue(o),n.run_changed_file?n.run():t&&n.save())}catch(a){n.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(a))}finally{n.loading&&setTimeout((function(){n.loading=!1,n.$forceUpdate()}),1e3)}},i.onerror=function(e){console.error(e),n.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(e)),n.watch_timer&&clearInterval(n.watch_timer),n.watch_file=!1,n.$forceUpdate()},i.readAsText(e)}},openEngineFile:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.window.plugin_manager.imjoy_api,e.prev=1,e.t0=t,e.t0){e.next=7;break}return e.next=6,n.showFileDialog(null,{title:"Load plugin source file",uri_type:"url",mode:"single",type:"file"});case 6:e.t0=e.sent;case 7:i=e.t0,this.code_origin=i,this.$refs.file_select.value="",this.loadCodeFromURL(),e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](1),this.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(e.t1));case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),loadCodeFromURL:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.code_origin&&this.code_origin.url){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,m.a.get(this.code_origin.url+"?"+Object(j["g"])());case 5:t=e.sent,t&&t.data?(n=t.data,Ge.a.hash(n)!==Ge.a.hash(this.editor.getValue())&&(this.loading=!0,this.$forceUpdate(),i=this.window.plugin_manager.parsePluginCode(n),this.window.name=i.name,this.editor.setValue(n),this.run_changed_file?this.run():this.save())):this.window.plugin_manager.showMessage("Failed to load plugin source code."),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.window.plugin_manager.showMessage("Failed to load plugin source code, error: ".concat(e.t0));case 12:return e.prev=12,this.loading&&setTimeout((function(){o.loading=!1,o.$forceUpdate()}),1e3),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[2,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),run:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(j["b"])(this.window.plugin_manager),e.next=3,this.save();case 3:if(t={},n=this.window.plugin,n&&n.api){e.next=8;break}return console.error("plugin is not loaded."),e.abrupt("return");case 8:if(this.window_plugin_id&&!this.window.plugin_manager.wm.window_ids[this.window_plugin_id]&&(this.window_plugin_id=null),this.window_plugin_id||!n.config||!n.config.ui){e.next=19;break}if(!(n.config.ui.indexOf("{")>-1)){e.next=16;break}return e.next=13,this.window.plugin_manager.imjoy_api.showDialog(n,n.config);case 13:t=e.sent,e.next=17;break;case 16:t={};case 17:e.next=20;break;case 19:t=this.window_plugin_config;case 20:return this.window_plugin_id&&(i=document.getElementById("iframe_"+this.window_plugin_id),i&&i.parentNode.removeChild(i)),e.next=23,n.api.run({id:this.window_plugin_id,config:t,data:{}});case 23:o=e.sent,(n.config&&"window"===n.config.type||"web-python-window"===n.config.type)&&(this.window_plugin_id=o&&o.__id__,this.window_plugin_config=t);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),remove:function(){var e=this;Object(j["b"])(this.window.plugin_manager),this.codeValue=this.editor.getValue(),this.$emit("input",this.codeValue),this.window.data._id=null,this.window.plugin_manager.removePlugin(this.window.config).then((function(){e.window.config={},e.window.plugin=null}))},reload:function(){var e=this;return Object(j["b"])(this.window.plugin_manager),this.$forceUpdate(),new Promise((function(t,n){if(e.editor){if(e.codeValue=e.editor.getValue(),e.codeValue){e.$emit("input",e.codeValue),e.window.config&&(e.window.config.code=e.codeValue);var i=e.window.config.tag,o=e.window.data&&e.window.data.config;o&&e.window.config&&e.window.config.tag&&(e.window.data.config.tags.includes(e.window.config.tag)||(i=e.window.data.config.tags[0]));var a=e.window.config&&e.window.config.engine_mode;e.window.plugin_manager.reloadPlugin({_id:e.window.data._id,engine_mode:a,tag:i,name:e.window.data._name,code:e.codeValue,origin:e.window.config&&e.window.config.origin}).then((function(n){e.window.config=n.config,e.window.plugin=n,e.$forceUpdate(),t()})).catch((function(e){n(e)}))}}else n("editor is not available.")}))},saveAs:function(){this.codeValue=this.editor.getValue(),this.$emit("input",this.codeValue);var e=this.window&&this.window.config&&this.window.config.name?this.window.config.name+"_"+Object(j["g"])()+".imjoy.html":"plugin_"+Object(j["g"])()+".imjoy.html",t=new Blob([this.codeValue],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(t,e)}}},Ze=Ye,Qe=(n("5865"),Object(R["a"])(Ze,Be,Ne,!1,null,"bd2d5016",null));Qe.options.__file="PluginEditor.vue";var Xe=Qe.exports,et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"plugin-icon"},[e.icon?e.icon.startsWith("http")?n("img",{staticClass:"icon-image",attrs:{src:e.icon}}):n("md-icon",[e._v(e._s(e.icon)+" ")]):n("md-icon",[e._v("extension")])],1)},tt=[],nt={name:"plugin-icon",props:{icon:{type:String,default:""}},created:function(){}},it=nt,ot=(n("2733"),Object(R["a"])(it,et,tt,!1,null,"5b5c9f74",null));ot.options.__file="PluginIcon.vue";var at=ot.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",[n("div",[e.isFolder?n("span",{on:{click:e.toggle}},[e._v("["+e._s(e.open?"-":"+")+"]")]):e._e(),n("span",{staticClass:"noselect",on:{click:function(t){(e.root===e.selected||e.selected&&Array.isArray(e.selected)&&e.selected.indexOf(e.root)>=0)&&"file"!==e.model.type?e.load():e.select({target:e.model,path:e.root},t.shiftKey)},dblclick:function(t){e.load()}}},["file"===e.model.type?n("md-icon",[e._v("insert_drive_file")]):n("md-icon",[e._v("folder_open")]),n("span",{staticClass:"noselect",class:{bold:e.isFolder,selected:e.root===e.selected||e.selected&&Array.isArray(e.selected)&&e.selected.indexOf(e.root)>=0}},[e._v(e._s(e.isFolder?e.root:e.model.name))])],1),e.isFolder||e.model.children&&0===e.model.children.length?n("span",{staticClass:"item",on:{click:function(t){e.up()}}},[n("md-icon",[e._v("arrow_upward")])],1):e._e(),e.model.drives?n("div",{staticClass:"drives"},e._l(e.model.drives,(function(t){return n("span",{key:t,staticClass:"noselect",on:{click:function(n){e.select({target:e.model,path:t}),e.load({target:e.model,path:t})}}},[n("md-icon",[e._v("storage")]),n("span",{staticClass:"noselect",class:{bold:e.isFolder,selected:t===e.selected||e.selected&&Array.isArray(e.selected)&&e.selected.indexOf(t)>=0}},[e._v(e._s(t))])],1)}))):e._e()]),e.open&&e.isFolder?n("ul",[e._l(e.sortedFiles,(function(t){return n("file-item",{key:t.name,staticClass:"item",attrs:{root:e.root+"/"+t.name,model:t,selected:e.selected},on:{load:function(t){e.load(t)},select:function(t){e.select(t)},select_append:function(t){e.select(t,!0)}}})})),e.model.children.length>e.max_files?n("md-button",{staticClass:"md-primary",on:{click:function(t){e.max_files=e.max_files+200}}},[e._v("Load more ...")]):e._e()],2):e._e()])},rt=[],lt=(n("55dd"),200),ct={name:"file-item",props:{model:Object,selected:[String,Array],root:{type:String,default:"."},file_manager:Object},data:function(){return{open:!0,max_files:lt}},mounted:function(){},computed:{isFolder:function(){return this.model.children&&this.model.children.length},sortedFiles:function(){function e(e,t){return e.name<t.name?-1:e.name>t.name?1:0}return this.model.children.slice(0,this.max_files).sort(e)}},methods:{up:function(e){this.$emit("load",e||{target:this.model,path:this.root+"/../"})},load:function(e){this.$emit("load",e||{target:this.model,path:this.root,file_manager:this.file_manager}),this.max_files=lt},select:function(e,t){t?this.$emit("select_append",e||{target:this.model,path:this.root+"/"+this.model.name}):this.$emit("select",e||{target:this.model,path:this.root+"/"+this.model.name})},toggle:function(){this.isFolder&&(this.open=!this.open)}}},dt=ct,ut=(n("9a0e"),Object(R["a"])(dt,st,rt,!1,null,"6d744f41",null));ut.options.__file="FileItem.vue";var mt=ut.exports,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-dialog",{attrs:{"md-active":e.show_,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(t){e.show_=t}}},[n("md-dialog-title",[e._v(e._s(this.options.title||"ImJoy File Dialog")+"\n    "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.show_=!1,e.reject("file dialog canceled by the user.")}}},[n("md-icon",[e._v("clear")])],1)],1),n("md-dialog-content",[e._l(e.file_managers,(function(t){return n("md-button",{directives:[{name:"show",rawName:"v-show",value:e.show_all_file_managers&&t.connected,expression:"show_all_file_managers && file_manager.connected"}],key:t.id,class:e.selected_file_manager===t?"md-raised":"",staticStyle:{"text-transform":"none"},on:{click:function(n){e.selectFileManager(t)}}},[e._v("\n      "+e._s(t.name)+"\n    ")])})),n("div",{staticClass:"loading-info"},[e.dropping?n("h5",[e._v("Drop files to upload to "+e._s(e.root))]):e._e()]),e.selected_file_manager&&e.file_tree?n("ul",{class:e.dropping?"dropping-files":"",attrs:{disabled:!e.selected_file_manager||!e.selected_file_manager.connected}},[n("file-item",{attrs:{model:e.file_tree,file_manager:e.selected_file_manager,root:e.root,selected:e.file_tree_selection},on:{load:e.loadFile,select:e.fileTreeSelected,select_append:e.fileTreeSelectedAppend}})],1):e.selected_file_manager&&e.selected_file_manager.connected?n("div",{staticClass:"loading loading-lg"}):n("p",[e._v("\n      No file manager is available.\n    ")])],2),n("md-dialog-actions",[n("md-menu",{staticStyle:{flex:"auto"}},[n("md-button",{staticClass:"md-button md-primary",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("menu")]),e._v("options\n      ")],1),n("md-menu-content",[n("md-menu-item",{staticClass:"md-primary",on:{click:function(t){e.go()}}},[n("md-icon",[e._v("forward")]),e._v(" Go to Folder\n        ")],1),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.file_tree_selection_info,expression:"file_tree_selection_info"}],staticClass:"md-primary",on:{click:function(t){e.downloadFiles()}}},[n("md-icon",[e._v("cloud_download")]),e._v(" Download\n        ")],1),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.file_tree_selection_info,expression:"file_tree_selection_info"}],staticClass:"md-accent",on:{click:function(t){e.remove()}}},[n("md-icon",[e._v("delete")]),e._v(" Delete\n        ")],1)],1)],1),e.status_text?n("p",{staticClass:"md-small-hide",staticStyle:{flex:"auto"}},[e._v("\n      "+e._s(e.status_text.slice(0,100))+"\n    ")]):e._e(),n("md-button",{staticClass:"md-primary",attrs:{disabled:!e.file_tree_selection},on:{click:function(t){e.show_=!1,e.resolve(e.file_tree_selection)}}},[e._v("OK\n      "),e.file_tree_selection?n("md-tooltip",{staticClass:"md-small-hide"},[e._v("Selected: "+e._s(e.file_tree_selection))]):e._e()],1),n("md-button",{staticClass:"md-primary",on:{click:function(t){e.show_=!1,e.reject("file dialog canceled by the user.")}}},[e._v("Cancel")])],1),n("md-progress-bar",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{"md-mode":"determinate","md-value":e.loading_progress}})],1)},pt=[],ht={name:"file-dialog",props:{file_managers:Array,uploadFileToUrl:Function},data:function(){return{root:null,options:{},show_:!1,file_tree_selection:null,file_tree_selection_info:null,file_tree:null,resolve:null,reject:null,selected_file_manager:null,show_all_file_managers:!0,dropping:!1,loading:!1,status_text:"Drag and drop here to upload files",loading_progress:0}},created:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&(this.event_bus.on("drag_upload_enter",this.showDropping),this.event_bus.on("drag_upload_leave",this.hideDropping),this.event_bus.on("drag_upload",this.uploadFiles))},beforeDestroy:function(){this.event_bus&&(this.event_bus.off("drag_upload_enter",this.showDropping),this.event_bus.off("drag_upload_leave",this.hideDropping),this.event_bus.off("drag_upload",this.uploadFiles))},computed:{no_file_manager_available:function(){if(this.file_managers){var e=!1,t=!0,n=!1,i=void 0;try{for(var o,a=this.file_managers[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;if(s.connected){e=!0;break}}}catch(r){n=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return!e}return!0}},methods:{upload:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,n){var i,o,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.show_){e.next=2;break}return e.abrupt("return");case 2:return this.status_text="requesting upload url from the file_manager...",e.next=5,this.selected_file_manager.requestUploadUrl({dir:this.root,path:t.relativePath,overwrite:!0,file_manager:this.selected_file_manager.url});case 5:return i=e.sent,console.log("loading file to url",i),this.status_text=n,e.next=10,this.uploadFileToUrl(null,{file:t,url:i,progress:function(e,t){a.loading_progress=100*e/t,a.status_text=n+" (".concat(Math.round(a.loading_progress),"%)"),a.$forceUpdate()}});case 10:o=e.sent,this.status_text="file uploaded to ".concat(o.path,".");case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),uploadFiles:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.status_text="Uploading...",this.loading=!0,e.prev=2,n=0;case 4:if(!(n<t.length)){e.next=19;break}if(!t[n].name.startsWith(".")){e.next=8;break}return console.log("skipping file: "+t[n].relativePath),e.abrupt("continue",16);case 8:if(!this.selected_file_manager.putFile){e.next=14;break}return this.status_text="Uploading ".concat(n+1,"/").concat(t.length,": ").concat(t[n].name),e.next=12,this.selected_file_manager.putFile(t[n],Object(j["f"])(this.root,t[n].name));case 12:e.next=16;break;case 14:return e.next=16,this.upload(t[n],"Uploading ".concat(n+1,"/").concat(t.length,": ").concat(t[n].name));case 16:n++,e.next=4;break;case 19:this.status_text="🎉Uploaded ".concat(t.length," files."),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](2),this.status_text="Failed to upload, error:"+(e.t0?e.t0.toString():"undefined");case 25:return e.prev=25,this.loading=!1,this.refreshList(),e.finish(25);case 29:case"end":return e.stop()}}),e,this,[[2,22,25,29]])})));return function(t){return e.apply(this,arguments)}}(),showDropping:function(){this.dropping=!0,this.$forceUpdate()},hideDropping:function(){this.dropping=!1,this.$forceUpdate()},fileTreeSelected:function(e){"file"===this.options.type&&"dir"===e.target.type||(this.file_tree_selection=e.path,this.file_tree_selection_info=e,this.$forceUpdate())},fileTreeSelectedAppend:function(e){Array.isArray(this.file_tree_selection)||(this.file_tree_selection=this.file_tree_selection?[this.file_tree_selection]:[],this.file_tree_selection_info=this.file_tree_selection_info?[this.file_tree_selection_info]:[]),this.file_tree_selection.push(e.path),this.file_tree_selection_info.push(e),this.$forceUpdate()},refreshList:function(){var e=this;this.selected_file_manager.listFiles(this.root,this.options.type,this.options.recursive).then((function(t){e.root=t.path,e.file_tree=t,e.$forceUpdate()}))},go:function(){var e=this,t=prompt("Go to the folder",this.root);t&&t!=this.root&&this.selected_file_manager.listFiles(t,"dir",!1).then((function(t){e.root=t.path,e.file_tree=t,e.selected_file_manager.listFiles(t.path,e.options.type,e.options.recursive).then((function(t){e.root=t.path,e.file_tree=t,e.$forceUpdate()})),e.$forceUpdate()})).catch((function(e){alert(e.toString())}))},loadFile:function(e){var t=this;if("file"!=e.target.type){if(e.path===this.root)return void this.go();this.selected_file_manager.listFiles(e.path,this.options.type,this.options.recursive).then((function(e){t.root=e.path,t.file_tree=e,t.$forceUpdate()}))}else this.show_=!1,"single"===this.options.mode&&"object"===Object(c["a"])(this.file_tree_selection)?this.resolve(this.file_tree_selection[0]):"multiple"===this.options.mode&&"string"===typeof this.file_tree_selection?this.resolve([this.file_tree_selection]):this.resolve(this.file_tree_selection)},showDialog:function(e,t){var n=this;return this.show_=!0,this.options=t,this.options.title=this.options.title||"ImJoy File Dialog",this.options.root=this.options.root||"./",this.options.mode=this.options.mode||"single|multiple",this.options.uri_type=this.options.uri_type||"path",this.options.return_object=void 0===this.options.return_object||this.options.return_object,this.$nextTick((function(){n.options.file_manager?n.selected_file_manager=n.options.file_manager:n.selected_file_manager=n.file_managers[0],n.refreshList()})),"file"!=this.options.type&&this.options.root?this.file_tree_selection=this.options.root:this.file_tree_selection=null,new Promise((function(e,t){if("path"===n.options.uri_type?(n.resolve=function(t){n.options.return_object?e({path:t,file_manager:n.selected_file_manager.url}):e(t)},n.reject=function(){n.options.return_object?e(null):t("User cancelled selection.")}):"url"===n.options.uri_type?(n.reject=function(){n.options.return_object?e(null):t("User cancelled selection.")},n.resolve=function(i){if("string"===typeof i)n.selected_file_manager.getFileUrl({path:i,file_manager:n.selected_file_manager.url}).then((function(t){n.options.return_object?e({type:"imjoy/url",url:t,file_manager:n.selected_file_manager.url,path:i}):e(t)})).catch(t);else{var o=[],a=!0,s=!1,r=void 0;try{for(var l,c=i[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;o.push(n.selected_file_manager.getFileUrl({path:d,file_manager:n.selected_file_manager.url}))}}catch(u){s=!0,r=u}finally{try{a||null==c.return||c.return()}finally{if(s)throw r}}Promise.all(o).then((function(t){n.options.return_object?e({type:"imjoy/url",url:t,file_manager:n.selected_file_manager.url,path:i}):e(t)})).catch(t)}}):t("unsupported uri_type: "+n.options.uri_type),n.root=n.options.root,n.show_all_file_managers){var i=!0,o=!1,a=void 0;try{for(var s,r=n.file_managers[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var l=s.value;if(l.connected){n.selectFileManager(l);break}}}catch(c){o=!0,a=c}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}}else n.selectFileManager(n.selected_file_manager);n.dropping=!1,n.loading_progress=0,n.status_text="Drag and drop here to upload files"}))},selectFileManager:function(e){var t=this;return new Promise((function(n,i){t.selected_file_manager=e,t.file_tree=null,t.$forceUpdate(),t.selected_file_manager.listFiles(t.options.root,t.options.type,t.options.recursive).then((function(e){t.root=e.path,t.file_tree=e,t.$forceUpdate(),n()})).catch(i)}))},remove:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n,i,o,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],e.prev=1,this.file_tree_selection_info){e.next=4;break}throw"no file selected";case 4:t=Array.isArray(this.file_tree_selection_info)?this.file_tree_selection_info:[this.file_tree_selection_info],this.file_tree_selection=null,this.file_tree_selection_info=null,n=!0,i=!1,o=void 0,e.prev=10,a=t[Symbol.iterator]();case 12:if(n=(s=a.next()).done){e.next=20;break}return r=s.value,e.next=16,this.selected_file_manager.removeFile(r.path,r.target.type,this.options.recursive);case 16:this.status_text='"'.concat(r.target.name,'" has been removed.');case 17:n=!0,e.next=12;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](10),i=!0,o=e.t0;case 26:e.prev=26,e.prev=27,n||null==a.return||a.return();case 29:if(e.prev=29,!i){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:this.refreshList(),e.next=40;break;case 37:e.prev=37,e.t1=e["catch"](1),this.status_text="Error occured when removing file or folder: ".concat(e.t1);case 40:case"end":return e.stop()}}),e,this,[[1,37],[10,22,26,34],[27,,29,33]])})));return function(){return e.apply(this,arguments)}}(),downloadFiles:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],this.file_tree_selection_info){e.next=3;break}throw"no file selected";case 3:for(t=Array.isArray(this.file_tree_selection_info)?this.file_tree_selection_info:[this.file_tree_selection_info],n=0;n<t.length;n++)"file"===t[n].target.type?this.download(t[n],"downloading ".concat(n+1,"/").concat(t.length,": ").concat(t[n].target.name)):this.status_text="Folder cannot be downloaded, please select files.";case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),download:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,n){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.show_){e.next=2;break}return e.abrupt("return");case 2:return this.status_text="requesting upload url from the file_manager...",e.next=5,this.selected_file_manager.getFileUrl({path:t.path,file_manager:this.selected_file_manager});case 5:i=e.sent,this.status_text=n,o=document.createElement("a"),o.href=i,o.target="_blank",o.download=t.name,o.click();case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}},gt=ht,ft=(n("7a61"),Object(R["a"])(gt,_t,pt,!1,null,"0cbe86cc",null));ft.options.__file="FileDialog.vue";var wt=ft.exports,vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w?n("md-card",[e.w.standalone?e._e():n("md-card-actions",{class:{"drag-handle":e.withDragHandle,"window-selected":e.w.selected,"window-header":!e.w.selected},attrs:{"md-alignment":"space-between"},nativeOn:{click:function(t){e.selectWindow(e.w,t)},dblclick:function(t){e.w.fullscreen?e.normalSize(e.w):e.fullScreen(e.w)}}},[n("md-button",{staticClass:"md-icon-button md-accent no-drag",on:{click:function(t){e.close(e.w)}}},[n("md-icon",[e._v("close")]),n("md-tooltip",[e._v("Close window")])],1),n("div",{staticClass:"window-title noselect"},[e._v("\n      "+e._s(e.w.name.slice(0,30)+"(#"+(e.w.index||"")+")")+"\n    ")]),n("div",{staticClass:"no-drag"},[n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end","md-active":e.options_menu_open},on:{"update:mdActive":function(t){e.options_menu_open=t}}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_vert")])],1),n("md-menu-content",[n("md-menu-item",{on:{click:function(t){e.options_menu_open=!1}}},[n("md-icon",[e._v("highlight_off")]),n("span",[e._v("Cancel")])],1),!e.w.standalone&&e.w.fullscreen?n("md-menu-item",{on:{click:function(t){e.normalSize(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("span",[e._v("Normal view")])],1):e.w.standalone?e._e():n("md-menu-item",{on:{click:function(t){e.fullScreen(e.w)}}},[n("md-icon",[e._v("fullscreen")]),n("span",[e._v("Fullscreen")])],1),e.w.standalone?e._e():n("md-menu-item",{on:{click:function(t){e.detach(e.w)}}},[n("md-icon",[e._v("launch")]),n("span",[e._v("Detach")])],1),n("md-menu-item",{on:{click:function(t){e.duplicate(e.w)}}},[n("md-icon",[e._v("filter")]),n("span",[e._v("Duplicate")])],1),n("md-menu-item",{on:{click:function(t){e.close(e.w)}}},[n("md-icon",[e._v("close")]),n("span",[e._v("Close")])],1),n("md-menu-item",{on:{click:function(t){e.printObject(e.w.type,e.w.data,e.w)}}},[n("md-icon",[e._v("bug_report")]),n("span",[e._v("Console.log")])],1),e._l(e.w.loaders,(function(t,i){return n("md-menu-item",{key:i,on:{click:function(n){e.loaders&&e.loaders[t](e.w.data)}}},[n("md-icon",[e._v("play_arrow")]),n("span",[e._v(e._s(i))])],1)}))],2)],1)],1)],1),n("md-card-content",{staticClass:"plugin-iframe-container allow-scroll",class:e.w.standalone?"taller-container":"shorter-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.w.loading,expression:"w.loading"}],staticClass:"loading loading-lg floating"}),e.componentNames[e.w.type]&&e.w.type.startsWith("imjoy/")?n(e.componentNames[e.w.type],{ref:"window-content",tag:"component",attrs:{w:e.w,loaders:e.loaders},on:{init:e.setAPI}}):e.w.type.startsWith("imjoy/")?n("md-empty-state",{ref:"window-content",attrs:{"md-icon":"hourglass_empty","md-label":"IMJOY.IO","md-description":""}}):n("div",{staticClass:"plugin-iframe"},[n("div",{staticClass:"plugin-iframe",attrs:{id:e.w.iframe_container}})])],1)],1):e._e()},bt=[],yt=n("6dd8"),kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list",{staticClass:"allow-scroll"},[e.loaders&&e.w.loaders&&Object.keys(e.w.loaders).length>0?n("md-list-item",{staticClass:"md-primary",on:{click:function(t){e.loaders[e.w.loaders[Object.keys(e.w.loaders)[0]]](e.w.data)}}},[n("span",{staticClass:"md-list-item-text md-primary"},[e._v('Open with "'+e._s(Object.keys(e.w.loaders)[0])+'"')]),n("md-tooltip",[e._v('click to open with "'+e._s(Object.keys(e.w.loaders)[0])+'".')])],1):n("md-list-item",[n("span",{staticClass:"md-list-item-text"},[e._v(e._s(e.dataSummary(e.w)))])]),e._l(e.w.data,(function(t,i){return n("md-list-item",{directives:[{name:"show",rawName:"v-show",value:!e.isTypedArray(e.w.data)&&(!i.startsWith||!i.startsWith("_"))&&e.w.data&&!e.w.data.length||(e.w.data.length||e.w.data.byteLength)&&(e.w.data.length||e.w.data.byteLength)>0&&i<=20,expression:"\n      (!isTypedArray(w.data) &&\n        (!k.startsWith || !k.startsWith('_')) &&\n        w.data &&\n        !w.data.length) ||\n        ((w.data.length || w.data.byteLength) &&\n          (w.data.length || w.data.byteLength) > 0 &&\n          k <= 20)\n    "}],key:i},[n("md-icon",[e._v("insert_drive_file")]),n("span",{staticClass:"md-list-item-text",on:{click:function(n){e.printObject(i,t)}}},[e._v(e._s(i))])],1)})),e.w.data&&(e.w.data.length||e.w.data.byteLength)&&(e.w.data.length||e.w.data.byteLength)>20?n("md-list-item",{on:{click:function(t){e.printObject(e.w.data)}}},[n("md-icon",[e._v("insert_drive_file")]),n("span",{staticClass:"md-list-item-text"},[e._v("...")]),n("md-tooltip",[e._v("click to print the data in your console.")])],1):e._e()],2)},xt=[],Ct={name:"generic-window",type:"imjoy/generic",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")},methods:{dataSummary:function(e){return Array.isArray(e.data)?"".concat(e.type,", ").concat(Object(c["a"])(e.data),", length: ").concat(e.data.length):e.data.buffer&&"[object ArrayBuffer]"===Object.prototype.toString.call(e.data.buffer)?"".concat(e.type,", typedarray, length: ").concat(e.data.length):"object"===Object(c["a"])(e.data)?"".concat(e.type,", ").concat(Object(c["a"])(e.data),", length: ").concat(Object.keys(e.data).length):"".concat(e.type)},printObject:function(e,t,n){console.log(e,t,n)},isTypedArray:function(e){return!!e&&void 0!==e.byteLength}}},jt=Ct,Pt=(n("0529"),Object(R["a"])(jt,kt,xt,!1,null,"7eb14dc3",null));Pt.options.__file="GenericWindow.vue";var Ot=Pt.exports,Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill-container"},[e.w.data&&e.w.data.src?n("img",{staticStyle:{height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e.w.data.src}}):n("p",[e._v("No image available for display.")])])},$t=[],Wt={name:"image-window",type:"imjoy/image",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},Dt=Wt,It=(n("9efd"),Object(R["a"])(Dt,Et,$t,!1,null,"f44818a6",null));It.options.__file="ImageWindow.vue";var Mt=It.exports,At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"allow-scroll fill-container"},[e.w.data&&e.w.data.images&&0!=e.w.data.images.length?e._l(e.w.data.images,(function(e,t){return n("img",{key:t,staticStyle:{height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e}})})):n("p",[e._v("\n    No image available for display.\n  ")])],2)},St=[],Ut={name:"image-list-window",type:"imjoy/images",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},Tt=Ut,Rt=(n("ceea"),Object(R["a"])(Tt,At,St,!1,null,"85bf7dcc",null));Rt.options.__file="ImageListWindow.vue";var Lt=Rt.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("joy",{attrs:{config:e.w.config}})},zt=[],qt={name:"panel-window",type:"imjoy/panel",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},Jt=qt,Kt=(n("84f3"),Object(R["a"])(Jt,Ft,zt,!1,null,"7bc13713",null));Kt.options.__file="PanelWindow.vue";var Bt=Kt.exports,Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.plugin_info?n("md-card",[e.plugin_info.cover&&"string"===typeof e.plugin_info.cover?n("md-card-media",{attrs:{"md-ratio":"16:9"}},[n("img",{attrs:{src:e.plugin_info.cover,alt:"plugin-cover"}})]):e.plugin_info.cover?n("div",{staticClass:"carousel"},[e._l(e.plugin_info.cover,(function(e,t){return n("input",{key:t,staticClass:"carousel-locator",attrs:{id:"slide-"+t,type:"radio",name:"carousel-radio",hidden:""}})})),n("div",{staticClass:"carousel-container"},e._l(e.plugin_info.cover,(function(e,t){return n("figure",{key:t,staticClass:"carousel-item"},[n("img",{staticClass:"img-responsive rounded",attrs:{src:e,alt:"plugin cover"}})])}))),n("div",{staticClass:"carousel-nav"},e._l(e.plugin_info.cover,(function(t,i){return n("label",{key:i,staticClass:"nav-item text-hide c-hand",attrs:{for:"slide-"+i}},[e._v(e._s(i))])})))],2):e._e(),n("md-card-header",[n("md-toolbar",{attrs:{"md-elevation":"0"}},[n("div",[n("h2",[n("plugin-icon",{attrs:{icon:e.plugin_info.icon}}),e._v("\n            "+e._s(e.plugin_info.name+" "+e.plugin_info.badges)+"\n          ")],1)]),n("div",{staticClass:"md-toolbar-section-end"},[n("p",[e._v("version:"+e._s(e.plugin_info.version))])])])],1),n("md-card-content",[e.w.data&&e.w.data.source&&""!=e.w.data.source.trim()?n("div",{staticStyle:{"padding-left":"10px","padding-right":"5px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(e.w.data.source))}}):n("h4",[e._v("\n        "+e._s(e.plugin_info&&e.plugin_info.description)+"\n        "),n("br"),e._v("\n        This plugin has no documentation!\n      ")])])],1):e._e()],1)},Vt=[],Ht={name:"markdown-window",type:"imjoy/markdown",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{plugin_info:null}},created:function(){var e=new Fe.a.Renderer;e.link=function(e,t,n){var i=Fe.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Fe.a.setOptions({renderer:e}),O.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return O.a.sanitize(Fe()(e))}},mounted:function(){this.plugin_info=this.w&&this.w.data&&this.w.data.plugin_info,this.$emit("init")}},Gt=Ht,Yt=(n("a6c7"),Object(R["a"])(Gt,Nt,Vt,!1,null,"3575b5fc",null));Yt.options.__file="MarkdownWindow.vue";var Zt=Yt.exports,Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("plugin-editor",{ref:"code_editor",staticClass:"no-drag fill-container",attrs:{pluginId:e.w.data.id,window:e.w,editorId:"editor_"+e.w.data.id},model:{value:e.w.data.code,callback:function(t){e.$set(e.w.data,"code",t)},expression:"w.data.code"}})},Xt=[],en={name:"plugin-editor-window",type:"imjoy/plugin-editor",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.w.data.engine_file_obj?this.$refs.code_editor.openEngineFile(this.w.data.engine_file_obj):this.w.data.local_file_obj&&this.$refs.code_editor.loadCodeFromFile(this.w.data.local_file_obj,!1),this.$emit("init")},methods:{dataSummary:function(e){return Array.isArray(e.data)?"".concat(e.type,", ").concat(Object(c["a"])(e.data),", length: ").concat(e.data.length):e.data.buffer&&"[object ArrayBuffer]"===Object.prototype.toString.call(e.data.buffer)?"".concat(e.type,", typedarray, length: ").concat(e.data.length):"object"===Object(c["a"])(e.data)?"".concat(e.type,", ").concat(Object(c["a"])(e.data),", length: ").concat(Object.keys(e.data).length):"".concat(e.type)},printObject:function(e,t,n){console.log(e,t,n)}}},tn=en,nn=(n("8307"),Object(R["a"])(tn,Qt,Xt,!1,null,"b88a3cbe",null));nn.options.__file="PluginEditorWindow.vue";var on=nn.exports,an=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"log-content"},[n("ul",e._l(e.log_history,(function(t,i){return n("li",{key:i},["image"===t.type?n("img",{attrs:{src:t.value}}):n("p",{class:"error"===t.type?"error":"info"},[e._v("\n        "+e._s(t.value||t)+"\n      ")])])}))),e.log_history&&e.log_history.length>0?n("md-button",{staticClass:"md-mini",on:{click:function(t){e.clearLog()}}},[n("md-icon",[e._v("clear")]),e._v("Clear\n  ")],1):e._e(),e.log_history&&e.log_history.length>0?n("md-button",{staticClass:"md-mini",on:{click:function(t){e.exportLog()}}},[n("md-icon",[e._v("cloud_download")]),e._v("Export\n  ")],1):n("p",[e._v("\n    No log available.\n  ")])],1)},sn=[],rn={name:"log-window",type:"imjoy/log",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{log_history:null}},mounted:function(){this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus,this.event_bus&&this.event_bus.on("plugin_loaded",this.fetchLog),this.log_history=this.w.data.log_history,this.plugin_id=this.w.data.plugin_id,this.plugin_name=this.w.data.plugin_name,this.$emit("init")},beforeDestroy:function(){this.event_bus&&this.event_bus.off("plugin_loaded",this.fetchLog)},methods:{fetchLog:function(e){e.name==this.w.data.plugin_name&&(this.log_history=e._log_history,this.plugin_id=e.id,this.plugin_name=e.name),this.$forceUpdate()},clearLog:function(){var e=this.log_history;e.splice(0,e.length),e._error="",e._info="",this.$forceUpdate()},exportLog:function(){var e=this.log_history,t=this.plugin_id||this.plugin_name+"_log.txt",n="",i=!0,o=!1,a=void 0;try{for(var s,r=e[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var l=s.value;n=l.type+":"+n+l.value+"\n"}}catch(u){o=!0,a=u}finally{try{i||null==r.return||r.return()}finally{if(o)throw a}}var c=new Blob([n],{type:"text/plain;charset=utf-8"});Object(d["saveAs"])(c,t)}}},ln=rn,cn=(n("f94b"),Object(R["a"])(ln,an,sn,!1,null,"d9b93984",null));cn.options.__file="LogWindow.vue";var dn=cn.exports,un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-list",{staticClass:"files-window"},e._l(e.w.data,(function(t,i){return n("md-list-item",{key:t.name+t.relativePath},[e.w.data&&e.w.data.length>1?n("md-radio",{attrs:{value:i},model:{value:e.w.data.select,callback:function(t){e.$set(e.w.data,"select",t)},expression:"w.data.select"}}):n("md-icon",[e._v("insert_drive_file")]),n("span",{staticClass:"md-list-item-text",staticStyle:{cursor:"pointer"},on:{click:function(n){e.loaders&&t.loaders&&Object.keys(t.loaders).length>0&&e.loaders[t.loaders[Object.keys(t.loaders)[0]]](t)}}},[e._v(e._s(t.name))]),t.loaders&&Object.keys(t.loaders).length>0?n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end"}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[e._v("more_horiz")])],1),n("md-menu-content",e._l(t.loaders,(function(i,o){return n("md-menu-item",{key:o,on:{click:function(n){e.loaders&&e.loaders[i](t)}}},[n("span",[e._v(e._s(o))]),n("md-icon",[e._v("play_arrow")])],1)})))],1):e._e()],1)})))},mn=[],_n={name:"files-window",type:"imjoy/files",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},pn=_n,hn=(n("0d19"),Object(R["a"])(pn,un,mn,!1,null,"59839dee",null));hn.options.__file="FilesWindow.vue";var gn=hn.exports,fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w.data&&e.w.data.length&&e.w.data.length>0?n("ul",e._l(e.w.data,(function(t){return n("li",{key:t.url||t},[n("a",{attrs:{href:t.url||t,target:"_blank"}},[e._v(e._s(t.text||t))])])}))):n("p",[e._v("No url.")])},wn=[],vn={name:"url-list-window",type:"imjoy/url_list",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){this.$emit("init")}},bn=vn,yn=(n("7dd5"),Object(R["a"])(bn,fn,wn,!1,null,"35dd28c2",null));yn.options.__file="UrlListWindow.vue";var kn=yn.exports,xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.w.data&&e.w.data.first&&e.w.data.second?n("comparify",{ref:"compare",staticClass:"bg-white h-64 w-full",attrs:{value:e.w.data.offset||50}},[n("img",{staticClass:"h-64 object-fit-first h-full w-full",attrs:{slot:"first",src:e.w.data.first,alt:""},slot:"first"}),n("img",{staticClass:"object-fit-second h-full w-full",attrs:{slot:"second",src:e.w.data.second,alt:""},slot:"second"})]):n("p",[e._v("No image available for display.")])},Cn=[],jn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"compare-wrapper"},[n("div",{staticClass:"compare"},[n("div",{staticClass:"compare__content",style:{width:e.width}},[e._t("first")],2),n("div",{staticClass:"handle-wrap",style:{left:"calc("+e.compareWidth+"% - var(--handle-line-width) / 2 "}},[n("div",{staticClass:"handle"},[n("svg",{staticClass:"handle__arrow handle__arrow--l feather feather-chevron-left",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("polyline",{attrs:{points:"15 18 9 12 15 6"}})]),n("svg",{staticClass:"handle__arrow handle__arrow--r feather feather-chevron-right",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[n("polyline",{attrs:{points:"9 18 15 12 9 6"}})])]),n("span",{staticClass:"handle-line"})]),n("div",{staticClass:"compare-overlay ",style:{width:"calc("+e.compareWidth+"%)"}},[n("div",{staticClass:"compare-overlay__content",style:{width:e.width}},[e._t("second")],2)])]),n("input",{staticClass:"compare__range",attrs:{type:"range",min:"0",max:"100",step:e.step,tabindex:"-1"},domProps:{value:e.compareWidth},on:{input:e.handleInput}})])},Pn=[],On={name:"comparify",props:{value:{default:50},step:{default:".1"}},data:function(){return{width:null,compareWidth:this.value}},watch:{value:function(){this.compareWidth=this.value}},mounted:function(){var e=this;this.$nextTick((function(){e.handleResize()})),this.$emit("init")},methods:{handleInput:function(e){this.compareWidth=e.target.value,this.$emit("input",e.target.value)},handleResize:function(){var e=this.getContainerWidth();e!==this.width&&(this.width=e)},getContainerWidth:function(){return window.getComputedStyle(this.$el,null).getPropertyValue("width")}}},En=On,$n=(n("f77d"),Object(R["a"])(En,jn,Pn,!1,null,null,null));$n.options.__file="Comparify.vue";var Wn=$n.exports,Dn=n("5118"),In={name:"image-compare-window",type:"imjoy/image-compare",components:{Comparify:Wn},props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},mounted:function(){var e=this;this.w.api.on("resize",(function(){Object(Dn["setTimeout"])((function(){e.$refs.compare&&e.$refs.compare.handleResize()}),0)})),this.w.api.on("refresh",(function(){Object(Dn["setTimeout"])((function(){e.$refs.compare&&e.$refs.compare.handleResize()}),0)})),this.$emit("init")}},Mn=In,An=(n("2a06"),Object(R["a"])(Mn,xn,Cn,!1,null,"65c7d5b8",null));An.options.__file="ImageCompareWindow.vue";var Sn=An.exports,Un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"terminal-window"},[e._l(this.buttons||[],(function(t){return n("md-button",{key:t.event_id,on:{click:function(n){e.button_click(t)}}},[t.icon?n("md-icon",[e._v(e._s(t.icon))]):e._e(),e._v(" "+e._s(t.label)+"\n  ")],1)})),n("div",{ref:"terminal_container",staticClass:"terminal-container",style:{height:e.window_height}})],2)},Tn=[],Rn=n("59bf"),Ln=(n("7449"),n("941b")),Fn=n("c554"),zn=n("95db"),qn=n("6a49");function Jn(e,t){var n;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=this;clearTimeout(n),n=setTimeout((function(){return e.apply(s,o)}),t)}}var Kn={name:"terminal-window",type:"imjoy/terminal",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{error:!1,window_height:"500px",buttons:[]}},created:function(){},mounted:function(){var e=this;Rn["Terminal"].applyAddon(Ln),Rn["Terminal"].applyAddon(Fn),Rn["Terminal"].applyAddon(zn),Rn["Terminal"].applyAddon(qn);var t=new Rn["Terminal"]({cursorBlink:!0,macOptionIsMeta:!0,scrollback:!0});t.open(this.$refs.terminal_container),this.term=t,this.$nextTick((function(){e.fitToscreen()})),this.w.api.on("write",(function(t){e.term.write(t)})),this.w.api.on("error",(function(t){e.error=t})),this.term.on("key",(function(t){e.w.api.emit("key",t)})),this.term.on("paste",(function(t){e.w.api.emit("paste",t)})),this.term.focus(),this.w.api.on("show_buttons",(function(t){e.buttons=t,e.$forceUpdate()}));var n=50,i=Jn(this.fitToscreen,n);window.addEventListener("resize",i),document.addEventListener("orientationchange",i),this.w.api.on("resize",i),this.w.api.on("refresh",i),this.buttons=this.w.data.buttons||[],this.$emit("init")},beforeDestroy:function(){},methods:{fitToscreen:function(){var e=this;this.window_height=this.$el.clientHeight+"px",this.$forceUpdate(),this.$nextTick((function(){e.term.focus(),e.term.fit(),e.w.api.emit("fit",{cols:e.term.cols,rows:e.term.rows}),e.$forceUpdate()}))},button_click:function(e){this.w.api.emit("button_clicked",e)}}},Bn=Kn,Nn=(n("1eb5"),Object(R["a"])(Bn,Un,Tn,!1,null,"425d4a2b",null));Nn.options.__file="TerminalWindow.vue";var Vn=Nn.exports,Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"joy-window"},[e.plugin_dialog_config?n("joy",{ref:"plugin_dialog_joy",attrs:{config:e.plugin_dialog_config,showHeader:!1,controlButtons:!1}}):e._e(),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(t){e.w.ok()}}},[e._v("OK")]),n("md-button",{staticClass:"md-accent",on:{click:function(t){e.w.cancel()}}},[e._v("Cancel")])],1)],1)},Gn=[],Yn={name:"joy-window",type:"imjoy/joy",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{plugin_dialog_config:null}},mounted:function(){var e=this;this.w&&(this.plugin_dialog_config=this.w,this.w.get_config=function(){return e.$refs.plugin_dialog_joy.joy.get_config()}),this.$emit("init")},methods:{getConfig:function(){}}},Zn=Yn,Qn=(n("151e"),Object(R["a"])(Zn,Hn,Gn,!1,null,null,null));Qn.options.__file="JoyWindow.vue";var Xn=Qn.exports,ei=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"schema-io"},e._l(e.ioPanels,(function(t){return n("div",{key:t.id},["form"===t.type?[t.title?n("div",{staticClass:"panel-heading"},[e._v(e._s(t.title))]):e._e(),t.description?n("div",{staticStyle:{"padding-left":"1px","padding-right":"1px","padding-bottom":"10px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(t.description))}}):e._e(),n("vue-form-generator",{attrs:{schema:t.schema,model:t.data,options:t.options}}),e._l(t.buttons,(function(i){return n("md-button",{key:i.label,class:i.class,on:{click:function(n){e.onSubmit(n,i.event_id,t.data)}}},[e._v("\n        "+e._s(i.label)+"\n      ")])}))]:e._e(),"vega"===t.type?[t.title?n("div",{staticClass:"panel-heading"},[e._v(e._s(t.title))]):e._e(),n("div",{staticClass:"overflow-auto"},[t.description?n("div",{staticStyle:{"padding-left":"1px","padding-right":"1px","padding-bottom":"10px",overflow:"auto"},domProps:{innerHTML:e._s(e.sanitizedMarked(t.description))}}):e._e(),n("vega",{ref:t.id,refInFor:!0,attrs:{schema:t.schema,options:t.options}}),n("br"),e._l(t.buttons,(function(i){return n("md-button",{key:i.label,class:i.class,on:{click:function(n){e.onSubmit(n,i.event_id,t.data)}}},[e._v("\n          "+e._s(i.label)+"\n        ")])}))],2)]:e._e()],2)})))},ti=[],ni=n("4309"),ii=n.n(ni),oi=(n("92bd"),n("037c")),ai=n("7ad3");o["default"].use(ii.a),o["default"].component("vega",{props:["schema","options"],mounted:function(){var e=this;Object(ai["a"])(this.$el,this.schema,this.options||{actions:!1}).then((function(t){e.embed=t,e.view=t.view}))},data:function(){return{view:null,embed:null}},methods:{updateView:function(e,t){var n=oi["changeset"]().insert(t);this.view.change(e,n).run()}},template:"<div></div>"});var si={name:"schema-io-window",type:"imjoy/schema-io",props:{w:{type:Object,default:function(){return null}},loaders:{type:Object,default:function(){return null}}},data:function(){return{ioPanels:[]}},mounted:function(){if(this.w.data)if(Array.isArray(this.w.data)){var e=!0,t=!1,n=void 0;try{for(var i,o=this.w.data[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.ioPanels.push(a)}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}else this.ioPanels.push(this.w.data);this.$emit("init")},created:function(){var e=new Fe.a.Renderer;e.link=function(e,t,n){var i=Fe.a.Renderer.prototype.link.call(this,e,t,n);return i.replace("<a","<a target='_blank' ")},Fe.a.setOptions({renderer:e}),O.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),O.a.addHook("afterSanitizeAttributes",(function(e){"target"in e&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),this.sanitizedMarked=function(e){return O.a.sanitize(Fe()(e))}},methods:{onSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.preventDefault(),this.w.api.emit(n,i);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),append:function(e){if(Array.isArray(e)){var t=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;this.ioPanels.push(s)}}catch(r){n=!0,i=r}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}else this.ioPanels.push(e)},remove:function(e){var t=this;this.ioPanels.filter((function(n,i){n.id===e&&t.ioPanels.splice(i,1)}))},appendDataPoint:function(e,t,n){this.$refs[e][0].updateView(t,n)},getData:function(e){if(e)return this.ioPanels[e].data;var t={};for(var n in this.ioPanels)t[n]=this.ioPanels[n].data;return t}}},ri=si,li=(n("77b0"),Object(R["a"])(ri,ei,ti,!1,null,null,null));li.options.__file="SchemaIOWindow.vue";var ci=li.exports,di={};for(var ui in i)di[i[ui].name]=i[ui];var mi={name:"window",components:di,props:{w:{type:Object,default:function(){return null}},withDragHandle:{type:Boolean,default:function(){return!1}},loaders:{type:Object,default:function(){return null}}},data:function(){return{componentNames:{},options_menu_open:!1}},created:function(){for(var e in di)this.componentNames[di[e].type]=di[e].name},mounted:function(){var e=this;this.w&&(this.w.$el=this.$el,this.w.api.on("refresh",(function(){e.refresh()})),this.w.api.on("focus",(function(){e.w.standalone||e.$el.scrollIntoView(!0)})),this.w.fullscreen&&this.fullScreen(this.w));var t=new yt["a"]((function(t){e.w.api.emit("resize",t[0].contentRect)}));t.observe(this.$el),setTimeout((function(){if(e.$refs["window-content"]){var t=e.$refs["window-content"],n=new yt["a"]((function(){setTimeout((function(){t.$el&&e.w.api.emit("window_size_changed",t.$el.getBoundingClientRect())}),500)}));n.observe(t.$el)}}),100)},beforeDestroy:function(){this.w.closed=!0},watch:{w:function(){var e=this;this.w.api.on("refresh",(function(){e.refresh()})),this.w.api.on("focus",(function(){e.w.standalone||e.$el.scrollIntoView(!0)})),this.w.api.on("fullscreen",(function(){e.fullScreen(e.w)})),this.w.standalone||this.$el.scrollIntoView(!0),this.w.fullscreen&&this.fullScreen(this.w)}},methods:{setAPI:function(){var e=this.$refs["window-content"];if(e)for(var t in this.w.api=this.w.api||{},e)!e.hasOwnProperty(t)||t.startsWith("$")||t.startsWith("_")||"function"!==typeof e[t]||(this.w.api[t]=e[t]);this.w.api.emit("ready")},refresh:function(){this.$forceUpdate()},close:function(e){this.$emit("close",e)},fullScreen:function(e){this.$emit("fullscreen",e)},detach:function(e){this.$emit("detach",e)},normalSize:function(e){this.$emit("normalsize",e)},duplicate:function(e){this.$emit("duplicate",e)},selectWindow:function(e,t){this.$emit("select",e,t)},printObject:function(e,t,n){console.log(e,t,n)}}},_i=mi,pi=(n("c0e0"),Object(R["a"])(_i,vt,bt,!1,null,"4dd5ce1d",null));pi.options.__file="Window.vue";var hi=pi.exports,gi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"engine-control-panel"},[n("md-menu",{attrs:{"md-size":"big","md-direction":"top-start"},on:{"md-closed":function(t){e.collapseProcesses()}}},[n("md-button",{staticClass:"md-icon-button md-primary",attrs:{"md-menu-trigger":"",disabled:!e.engineManager||0==e.engineManager.engine_factories.length&&0==e.engineManager.engines.length}},[n("md-icon",[e._v("🚀")]),n("md-tooltip",[e._v("ImJoy Plugin Engines")])],1),n("md-menu-content",{staticClass:"engine-panel"},[e._l(e.engineManager.engine_factories,(function(t){return n("md-menu-item",{key:t.name,on:{click:function(e){t.addEngine()}}},[n("md-button",{staticClass:"md-icon-button md-primary median-icon-button"},[n("md-icon",[e._v("add")])],1),n("span",[e._v("Add "+e._s(t.name)+" 🚀")])],1)})),e._l(e.engineManager.engines,(function(t){return[n("md-divider",{key:t.name+"_start_divider"}),t.connected&&t.getEngineStatus?n("md-menu-item",{key:t.name+t.url},[n("span",{staticClass:"md-list-item-content",staticStyle:{cursor:"pointer"},on:{click:function(n){n.stopPropagation(),t.show_processes?e.hide(t):e.expand(t)}}},[t.show_processes?n("md-icon",[e._v("remove")]):t.connected?n("md-icon",{staticClass:"md-primary"},[e._v("autorenew")]):t.connecting?n("div",{staticClass:"loading loading-lg"}):n("md-icon",[e._v("sync_disabled")]),n("span",[e._v(e._s(t.name.slice(0,20)))]),t.connected?n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.disconnectEngine(t)}}},[n("md-icon",[e._v("clear")]),n("md-tooltip",[e._v("Disconnect engine "+e._s(t.name)+"\n              ")])],1):e._e()],1)]):t.getEngineStatus?n("md-menu-item",{key:t.name,on:{click:function(e){e.stopPropagation(),t.connect(!1)}}},[n("span",{staticClass:"md-list-item-content",staticStyle:{cursor:"pointer"}},[n("md-icon",[e._v("sync_disabled")]),e._v(" "+e._s(t.name)+"\n            "),n("md-tooltip",[e._v("Connect to "+e._s(t.name)+" ")]),t.connected?e._e():n("md-button",{staticClass:"md-icon-button",on:{click:function(n){n.stopPropagation(),e.removeEngine(t)}}},[n("md-icon",[e._v("delete_forever")]),n("md-tooltip",[e._v("Remove engine "+e._s(t.name.slice(0,20))+"\n              ")])],1)],1)]):e._e(),t.connected&&t.show_processes?[n("md-menu-item",{key:t.name+"_show_info",on:{click:function(n){e.showAbout(t)}}},[e._v("\n              "),n("md-button",{staticClass:"md-icon-button"},[n("md-icon",[e._v("info")])],1),e._v("\n            About Engine\n          ")],1),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.engine_status.plugin_processes,expression:"engine.engine_status.plugin_processes"}],key:t.name+"_start_terminal",on:{click:function(n){e.startTerminal(t)}}},[e._v("\n              "),n("md-button",{staticClass:"md-icon-button"},[n("md-icon",[e._v("code")])],1),e._v("\n            Open terminal\n          ")],1),n("md-menu-item",{key:t.name+"_remove_engine",staticClass:"md-accent",on:{click:function(n){e.removeEngine(t)}}},[e._v("\n              "),n("md-button",{staticClass:"md-icon-button md-accent"},[n("md-icon",[e._v("delete_forever")])],1),e._v("Remove Engine\n          ")],1),e._l(t.engine_status.plugin_processes,(function(i){return n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.engine_status.plugin_processes,expression:"engine.engine_status.plugin_processes"}],key:t.name+i.pid},[e._v("\n              "),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.kill(t,i)}}},[n("md-icon",[e._v("clear")])],1),e._v("\n            "+e._s(i.name)+" (#"+e._s(i.pid)+")\n          ")],1)})),t.engine_status.plugin_processes?e._e():n("md-menu-item",{key:t.name+"_processes"},[n("md-button",[n("div",{staticClass:"loading loading-lg"})])],1),t.engine_status.plugin_num>1?n("md-menu-item",{key:t.name+"_running_plugins",attrs:{disabled:!0}},[e._v("\n                  "),n("span",[e._v("Running Plugins: "+e._s(t.engine_status.plugin_num)+"\n            ")]),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(n){n.stopPropagation(),e.kill(t)}}},[n("md-icon",[e._v("clear")]),n("md-tooltip",[e._v("Kill all the running plugins")])],1)],1):e._e(),n("md-divider",{key:t.name+"_end_divider"})]:e._e()]}))],2)],1),n("md-dialog",{attrs:{"md-active":e.showEngineInfoDialog,"md-click-outside-to-close":!0,"md-close-on-esc":!0},on:{"update:mdActive":function(t){e.showEngineInfoDialog=t}}},[n("md-dialog-title",[e._v("About Plugin Engine\n      "),n("md-button",{staticClass:"md-accent",staticStyle:{position:"absolute",top:"8px",right:"5px"},on:{click:function(t){e.showEngineInfoDialog=!1}}},[n("md-icon",[e._v("clear")])],1)],1),e.selected_engine?n("md-dialog-content",[n("h4",[n("a",{attrs:{href:e.selected_engine.url,target:"_blank"}},[e._v("\n          "+e._s(e.selected_engine.url.replace(e.local_engine_url,"My computer ("+e.local_engine_url+")"))+"\n        ")])]),n("md-field",[n("label",{attrs:{for:"connection_token"}},[e._v("Connection Token")]),n("md-input",{attrs:{type:"password",name:"connection_token"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.connectEngine(e.selected_engine)}},model:{value:e.selected_engine.config.token,callback:function(t){e.$set(e.selected_engine.config,"token",t)},expression:"selected_engine.config.token"}})],1),e.selected_engine.connected?n("md-button",{staticClass:"md-accent",on:{click:function(t){e.disconnectEngine(e.selected_engine)}}},[n("md-icon",[e._v("sync_disabled")]),e._v("Disconnect")],1):n("md-button",{staticClass:"md-primary md-raised",on:{click:function(t){e.connectEngine(e.selected_engine)}}},[n("md-icon",[e._v("sync")]),e._v(" Connect")],1),n("md-button",{staticClass:"md-primary",attrs:{disabled:!e.selected_engine.connected},on:{click:function(t){e.expand(e.selected_engine)}}},[n("md-icon",[e._v("autorenew")]),e._v(" Processes\n      ")],1),e.selected_engine.connected?n("md-button",{staticClass:"md-primary",attrs:{disabled:!e.selected_engine.connected},on:{click:function(t){e.startTerminal(e.selected_engine),e.showEngineInfoDialog=!1}}},[n("md-icon",[e._v("code")]),e._v(" Terminal\n      ")],1):e._e(),n("md-menu",[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",{staticClass:"md-primary"},[e._v("more_horiz")])],1),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!e.selected_engine.connected||e.show_sys_info,target:"_blank"},on:{click:function(t){t.stopPropagation(),e.show_sys_info=!0,e.hide(e.selected_engine)}}},[n("md-icon",[e._v("info")]),e._v(" System Information\n          ")],1),n("md-menu-item",{attrs:{target:"_blank"},on:{click:function(t){t.stopPropagation(),e.openEngineUrl(e.selected_engine.url)}}},[n("md-icon",[e._v("launch")]),e._v(" Open Engine Site\n          ")],1),e.selected_engine.connected?n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){t.stopPropagation(),e.resetEngine(e.selected_engine)}}},[n("md-icon",[e._v("restore")]),e._v(" Reset\n          ")],1):e._e(),n("md-menu-item",{staticClass:"md-accent",on:{click:function(t){e.removeEngine(e.selected_engine),e.showEngineInfoDialog=!1,e.selected_engine=null}}},[n("md-icon",[e._v("delete_forever")]),e._v("Remove\n          ")],1)],1)],1),n("md-divider"),e.selected_engine.connected&&e.selected_engine.engine_info?n("div",[n("br"),n("code",[e._v("\n          ImJoy Plugin Engine (v"+e._s(e.selected_engine.engine_info.version)+",\n          api: v"+e._s(e.selected_engine.engine_info.api_version)+")\n        ")])]):e._e(),e.selected_engine.connected&&e.show_sys_info&&e.selected_engine.engine_info.platform?n("div",{staticClass:"platform-info"},[n("div",[n("br"),n("code",[e._v("## Platform")]),n("br"),e._l(e.selected_engine.engine_info.platform,(function(t,i){return n("code",{key:i},[e._v("\n            - "+e._s(i)+": "+e._s(t)+"\n            "),n("br")])}))],2),e._l(e.selected_engine.engine_info.GPUs,(function(t){return n("div",{key:t.id},[n("br"),n("code",[e._v("## GPU "+e._s(t.id))]),n("br"),e._l(t,(function(t,i){return n("code",{key:i},[e._v("- "+e._s(i)+": "+e._s(t)),n("br")])}))],2)}))],2):e._e(),e.selected_engine.connected&&e.selected_engine.show_processes?n("div",[n("br"),n("md-divider"),n("ul",[e._l(e.selected_engine.engine_status.plugin_processes,(function(t){return n("li",{directives:[{name:"show",rawName:"v-show",value:e.selected_engine.engine_status.plugin_processes,expression:"selected_engine.engine_status.plugin_processes"}],key:t.pid},[e._v("\n             "),n("md-button",{staticClass:"md-icon-button md-accent small-icon-button",on:{click:function(n){n.stopPropagation(),e.kill(e.selected_engine,t)}}},[n("md-icon",[e._v("clear")])],1),e._v("\n            "+e._s(t.name)+" (#"+e._s(t.pid)+")\n          ")],1)})),e.selected_engine.engine_status.plugin_processes?e._e():n("li",[n("md-button",[n("div",{staticClass:"loading loading-lg"})])],1),e.selected_engine.engine_status.plugin_num>1?n("li",{attrs:{disabled:!0}},[n("md-button",{staticClass:"md-accent ",on:{click:function(t){t.stopPropagation(),e.kill(e.selected_engine)}}},[n("md-icon",[e._v("clear")]),e._v(" Kill All ("+e._s(e.selected_engine.engine_status.plugin_num)+"\n              Running Plugins)\n            ")],1)],1):e._e()],2)],1):e._e()],1):e._e()],1)],1)},fi=[],wi={name:"engine-control-panel",props:["engineManager"],data:function(){return{engine_url:"",local_engine_url:"http://127.0.0.1:9527",engine_url_list:[],connection_token:null,showEngineInfoDialog:!1,selected_engine:null,show_sys_info:!1,showAddEngineDialog:!1,url_type:"localhost"}},created:function(){this.is_mobile_or_tablet=Object(j["e"])(),this.event_bus=this.$root.$data.store&&this.$root.$data.store.event_bus},mounted:function(){this.is_mobile_or_tablet&&(this.url_type="remote",this.engine_url="")},beforeDestroy:function(){},methods:{showDialog:function(e){e.engine?(this.showAddEngineDialog=!1,this.selected_engine=e.engine,this.showEngineInfoDialog=e.show):(this.showEngineInfoDialog=!1,this.showAddEngineDialog=e.show)},forceUpdate:function(){this.$forceUpdate()},expand:function(e){this.show_sys_info=!1,e.show_processes=!0,this.$forceUpdate(),this.update(e)},hide:function(e){e.show_processes=!1,this.$forceUpdate()},update:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.engine_status.plugin_processes=null,this.$forceUpdate(),e.next=4,t.getEngineStatus();case 4:t.engine_status=e.sent,this.$forceUpdate();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),kill:function(e,t){var n=this;e.engine_status.plugin_processes=null,e.killPluginProcess(t).finally((function(){n.update(e)}))},collapseProcesses:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=this.engineManager.engines[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.show_processes=!1}}catch(s){t=!0,n=s}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.$forceUpdate()},showAddEngine:function(){this.showAddEngineDialog=!0},hideAddEngine:function(){this.showAddEngineDialog=!1},removeEngine:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.engineManager.getFactory(t.factory),!n){e.next=10;break}return e.next=4,n.removeEngine({name:t.name,url:t.url});case 4:if(i=e.sent,!i){e.next=8;break}return e.next=8,this.engineManager.unregister(t);case 8:e.next=11;break;case 10:throw"Engine factory not found for "+t.name;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),connectEngine:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.connected){e.next=5;break}return t.connecting=!0,e.next=5,t.connect();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:return e.prev=10,t.connecting=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),disconnectEngine:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.connected){e.next=4;break}return e.next=3,t.disconnect();case 3:t.connected=!1;case 4:this.$forceUpdate();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),startTerminal:function(e){this.$emit("start-terminal",e)},showToken:function(e){this.engine_url=e.config.url,this.connection_token=e.config.token},resetEngine:function(e){e.resetEngine()},showAbout:function(e){e.about?e.about():(this.show_sys_info=!1,this.selected_engine=e,this.showEngineInfoDialog=!0)},openEngineUrl:function(e){window.open(e,"_blank")}}},vi=wi,bi=(n("32c4"),Object(R["a"])(vi,gi,fi,!1,null,"16a37a3e",null));bi.options.__file="EngineControlPanel.vue";var yi=bi.exports,ki=n("9483");Object(ki["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; please refresh.");var t=e.waiting;t.postMessage({action:"skipWaiting"})},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].config.productionTip=!1,o["default"].use(ne.a),o["default"].component("navbar",we),o["default"].component("imjoy",F),o["default"].component("main-footer",Ce),o["default"].component("about",N),o["default"].component("whiteboard",We),o["default"].component("joy",Ue),o["default"].component("plugin-list",Ke),o["default"].component("plugin-editor",Xe),o["default"].component("plugin-icon",at),o["default"].component("file-item",mt),o["default"].component("file-dialog",wt),o["default"].component("window",hi),o["default"].component("grid-layout",de.a.GridLayout),o["default"].component("grid-item",de.a.GridItem),o["default"].component("engine-control-panel",yi);var xi=function(e,t,n){n=n||"...";var i=document.createElement("div");i.innerHTML=e;var o=i.textContent;return o.length>t?o.slice(0,t)+n:o};o["default"].filter("truncate",xi),new o["default"]({el:"#imjoy-app",router:ee,data:{store:me,router:ee},template:"<App/>",components:{App:le}})},5721:function(e,t,n){},5865:function(e,t,n){"use strict";var i=n("fd0e"),o=n.n(i);o.a},"5e6b":function(e,t,n){},"659e":function(e,t,n){},"6b72":function(e,t,n){},"6cd1":function(e,t,n){"use strict";var i=n("5721"),o=n.n(i);o.a},"6ea7":function(e,t,n){"use strict";var i=n("f2c1"),o=n.n(i);o.a},"6f02":function(e,t,n){"use strict";var i=n("7021"),o=n.n(i);o.a},7021:function(e,t,n){},"735f":function(e,t,n){},"77b0":function(e,t,n){"use strict";var i=n("f51c"),o=n.n(i);o.a},"7a61":function(e,t,n){"use strict";var i=n("5e6b"),o=n.n(i);o.a},"7c77":function(e,t,n){},"7dba":function(e,t,n){},"7dd5":function(e,t,n){"use strict";var i=n("3de5"),o=n.n(i);o.a},8307:function(e,t,n){"use strict";var i=n("cade"),o=n.n(i);o.a},"84f3":function(e,t,n){"use strict";var i=n("11a5"),o=n.n(i);o.a},8848:function(e,t,n){},9224:function(e){e.exports={a:"0.10.28"}},9428:function(e,t,n){},"9a0e":function(e,t,n){"use strict";var i=n("8848"),o=n.n(i);o.a},"9b3e":function(e,t,n){},"9efd":function(e,t,n){"use strict";var i=n("735f"),o=n.n(i);o.a},a0ab:function(e,t,n){},a4ec:function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "web-python",\n  "version": "0.1.0",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "tags": [],\n  "ui": "",\n  "cover": "",\n  "inputs": null,\n  "outputs": null,\n  "flags": [],\n  "icon": "extension",\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": []\n}\n</config>\n\n<script lang="python">\nfrom imjoy import api\n\nclass ImJoyPlugin():\n    def setup(self):\n        api.log(\'initialized\')\n\n    def run(self, ctx):\n        api.alert(\'hello world.\')\n\napi.export(ImJoyPlugin())\n<\/script>\n'},a6c7:function(e,t,n){"use strict";var i=n("d4d1"),o=n.n(i);o.a},a773:function(e,t,n){},b339:function(e,t,n){"use strict";var i=n("9b3e"),o=n.n(i);o.a},c0e0:function(e,t,n){"use strict";var i=n("c146"),o=n.n(i);o.a},c146:function(e,t,n){},ca41:function(e,t){e.exports='<docs lang="markdown">\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "window",\n  "tags": [],\n  "ui": "",\n  "version": "0.1.0",\n  "cover": "",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "icon": "extension",\n  "inputs": null,\n  "outputs": null,\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": [],\n  "defaults": {"w": 20, "h": 10}\n}\n</config>\n\n<script lang="javascript">\nclass ImJoyPlugin {\n  async setup() {\n    api.log(\'initialized\')\n  }\n\n  async run(ctx) {\n\n  }\n}\n\napi.export(new ImJoyPlugin())\n<\/script>\n\n<window lang="html">\n  <div>\n    <p>\n    Hello World\n    </p>\n  </div>\n</window>\n\n<style lang="css">\n\n</style>\n'},ca44:function(e,t,n){},cade:function(e,t,n){},cb3a:function(e,t){e.exports='<docs>\n[TODO: write documentation for this plugin.]\n</docs>\n\n<config lang="json">\n{\n  "name": "Untitled Plugin",\n  "type": "web-worker",\n  "tags": [],\n  "ui": "",\n  "version": "0.1.0",\n  "cover": "",\n  "description": "[TODO: describe this plugin with one sentence.]",\n  "icon": "extension",\n  "inputs": null,\n  "outputs": null,\n  "api_version": "0.1.7",\n  "env": "",\n  "permissions": [],\n  "requirements": [],\n  "dependencies": []\n}\n</config>\n\n<script lang="javascript">\nclass ImJoyPlugin {\n  async setup() {\n    api.log(\'initialized\')\n  }\n\n  async run(ctx) {\n    api.alert(\'hello world.\')\n  }\n}\n\napi.export(new ImJoyPlugin())\n<\/script>\n'},ceea:function(e,t,n){"use strict";var i=n("9428"),o=n.n(i);o.a},d4d1:function(e,t,n){},f2c1:function(e,t,n){},f51c:function(e,t,n){},f77d:function(e,t,n){"use strict";var i=n("0798"),o=n.n(i);o.a},f94b:function(e,t,n){"use strict";var i=n("fba3"),o=n.n(i);o.a},f9cf:function(e,t,n){},fba3:function(e,t,n){},fd0e:function(e,t,n){},fdcf:function(e,t,n){"use strict";var i=n("a0ab"),o=n.n(i);o.a}});
//# sourceMappingURL=app.e718ac8e.js.map