webpackJsonp([1],{0:function(t,e){},"4+hh":function(t,e){},"4lzL":function(t,e){},"7BL7":function(t,e){},"8BMv":function(t,e){},"A+BG":function(t,e){},GG6k:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW"),o=n("/ocq"),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("md-app-toolbar",{staticClass:"md-primary"},[n("div",{staticClass:"md-toolbar-row",attrs:{flex:""}},[n("navbar")],1)]),t._v(" "),n("div",{staticClass:"md-toolbar-row md-layout md-alignment-center-center"},[n("div",{staticClass:"banner-container"},[n("img",{attrs:{src:"static/img/perspective-hr.jpg",alt:"banner"}}),t._v(" "),n("div",{staticClass:"subtitle"},[t._v("Image processing with joy."),n("br"),t._v(" "),n("md-button",{staticClass:"md-raised md-accent",on:{click:function(e){t.showDialog=!0}}},[t._v("Getting Started")])],1)])]),t._v(" "),n("br"),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showDialog},on:{"update:mdActive":function(e){t.showDialog=e}}},[n("md-dialog-title",[t._v("Getting Started with ImJoy")]),t._v(" "),n("md-dialog-content",[n("p",[t._v("With the ImJoy web app, you process your images within the browser, instantly, no installation.")]),t._v(" "),n("md-button",{staticClass:"md-raised md-primary",attrs:{to:":)"}},[t._v("Start")]),t._v(" "),n("p",[t._v("You can process your data with the Imjoy app locally and anonymously, by default, no data will be transferred to the internet (also depends on the plugin you installed).")])],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showDialog=!1}}},[t._v("OK")])],1)],1),t._v(" "),n("br"),t._v(" "),n("plugin-list",{attrs:{"config-url":"static/plugins/manifest.json",title:"Plugins"}}),t._v(" "),n("br"),t._v(" "),n("md-divider"),t._v(" "),n("main-footer")],1)},staticRenderFns:[]};var s=n("VU/8")({name:"home",data:function(){return{showDialog:!1,router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){this.$nextTick(function(){})},methods:{}},a,!1,function(t){n("UkRA")},"data-v-7e1ddd54",null).exports,r=n("pFYg"),d=n.n(r),l=n("d7EF"),c=n.n(l),u=n("mvHQ"),m=n.n(u),p=n("Xxa5"),g=n.n(p),h=n("exGp"),f=n.n(h),v=n("//Fk"),_=n.n(v),w=n("mtWM"),b=n.n(w),y=n("kkYf"),C=n.n(y),k=C()({_id:[null,String],name:String,url:[null,String],code:String,lang:[null,String],script:[null,String],style:[null,String],window:[null,String]}),x=C()({name:String,type:String,mode:String,tags:Array,ui:String,show_panel:[null,Boolean]}),$=C()({name:String,type:String,config:Object,data:[null,Object],panel:[null,Object],force_show:Boolean});String,String,String,Array,String;function P(){return Math.random().toString(36).substr(2,10)}var S=n("OvRC"),j=n.n(S),D=n("u2KI"),E=/\r?\n/g,W=/^\s*$/,A=/^(\r?\n)*[\t\s]/,I=function(t){if(!A.test(t))return t;for(var e,n,i,o=t.split(E),a=1/0,s=0;s<o.length;s++){var r=o[s];if(!W.test(r))if(e)(n=O(r,e))<a&&(a=n);else{if(" "!==(i=r.charAt(0))&&"\t"!==i)return t;(n=O(r,e=i))<a&&(a=n)}}return o.map(function(t){return t.slice(a)}).join("\n")};function O(t,e){for(var n=0;t.charAt(n)===e;)n++;return n}n.n(D)()({});Object.prototype.toString;function z(t,e){for(var n=j()(null),i=t.split(","),o=0;o<i.length;o++)n[i[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}z("slot,component",!0),z("key,ref,slot,slot-scope,is");Object.prototype.hasOwnProperty;var J,U,R=/-(\w)/g;J=function(t){return t.replace(R,function(t,e){return e?e.toUpperCase():""})},U=j()(null);Function.prototype.bind;var B=function(t,e,n){return!1};z("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),z("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source");var T=z("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),N=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,F="[a-zA-Z_][\\w\\-\\.]*",L="((?:"+F+"\\:)?"+F+")",q=new RegExp("^<"+L),H=/^\s*(\/?)>/,V=new RegExp("^<\\/"+L+"[^>]*>"),G=/^<!DOCTYPE [^>]+>/i,M=/^<!\--/,K=/^<!\[/,Q=!1;"x".replace(/x(.)?/g,function(t,e){Q=""===e});var Y=z("script,style,textarea",!0),X={},Z={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},tt=/&(?:lt|gt|quot|amp);/g,et=/&(?:lt|gt|quot|amp|#10|#9);/g,nt=z("pre,textarea",!0),it=function(t,e){return t&&nt(t)&&"\n"===e[0]};function ot(t,e){var n=e?et:tt;return t.replace(n,function(t){return Z[t]})}var at=/\r?\n/g,st=/./g,rt=z("script,style,template",!0);function dt(t,e){void 0===e&&(e={});var n={template:null,script:null,styles:[],customBlocks:[]},i=0,o=null;return function(t,e){for(var n,i,o=[],a=e.expectHTML,s=e.isUnaryTag||B,r=e.canBeLeftOpenTag||B,d=0;t;){if(n=t,i&&Y(i)){var l=0,c=i.toLowerCase(),u=X[c]||(X[c]=new RegExp("([\\s\\S]*?)(</"+c+"[^>]*>)","i")),m=t.replace(u,function(t,n,i){return l=i.length,Y(c)||"noscript"===c||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),it(c,n)&&(n=n.slice(1)),e.chars&&e.chars(n),""});d+=t.length-m.length,t=m,P(c,d-l,d)}else{var p=t.indexOf("<");if(0===p){if(M.test(t)){var g=t.indexOf("--\x3e");if(g>=0){e.shouldKeepComment&&e.comment(t.substring(4,g)),k(g+3);continue}}if(K.test(t)){var h=t.indexOf("]>");if(h>=0){k(h+2);continue}}var f=t.match(G);if(f){k(f[0].length);continue}var v=t.match(V);if(v){var _=d;k(v[0].length),P(v[1],_,d);continue}var w=x();if(w){$(w),it(i,t)&&k(1);continue}}var b=void 0,y=void 0,C=void 0;if(p>=0){for(y=t.slice(p);!(V.test(y)||q.test(y)||M.test(y)||K.test(y)||(C=y.indexOf("<",1))<0);)p+=C,y=t.slice(p);b=t.substring(0,p),k(p)}p<0&&(b=t,t=""),e.chars&&b&&e.chars(b)}if(t===n){e.chars&&e.chars(t),!o.length&&e.warn&&e.warn('Mal-formatted tag at end of template: "'+t+'"');break}}function k(e){d+=e,t=t.substring(e)}function x(){var e=t.match(q);if(e){var n,i,o={tagName:e[1],attrs:[],start:d};for(k(e[0].length);!(n=t.match(H))&&(i=t.match(N));)k(i[0].length),o.attrs.push(i);if(n)return o.unarySlash=n[1],k(n[0].length),o.end=d,o}}function $(t){var n=t.tagName,d=t.unarySlash;a&&("p"===i&&T(n)&&P(i),r(n)&&i===n&&P(n));for(var l=s(n)||!!d,c=t.attrs.length,u=new Array(c),m=0;m<c;m++){var p=t.attrs[m];Q&&-1===p[0].indexOf('""')&&(""===p[3]&&delete p[3],""===p[4]&&delete p[4],""===p[5]&&delete p[5]);var g=p[3]||p[4]||p[5]||"",h="a"===n&&"href"===p[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;u[m]={name:p[1],value:ot(g,h)}}l||(o.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:u}),i=n),e.start&&e.start(n,u,l,t.start,t.end)}function P(t,n,a){var s,r;if(null==n&&(n=d),null==a&&(a=d),t&&(r=t.toLowerCase()),t)for(s=o.length-1;s>=0&&o[s].lowerCasedTag!==r;s--);else s=0;if(s>=0){for(var l=o.length-1;l>=s;l--)(l>s||!t)&&e.warn&&e.warn("tag <"+o[l].tag+"> has no matching end tag."),e.end&&e.end(o[l].tag,n,a);o.length=s,i=s&&o[s-1].tag}else"br"===r?e.start&&e.start(t,[],!0,n,a):"p"===r&&(e.start&&e.start(t,[],!1,n,a),e.end&&e.end(t,n,a))}P()}(t,{start:function(t,e,a,s,r){0===i&&(o={type:t,content:"",start:r,attrs:e.reduce(function(t,e){var n=e.name,i=e.value;return t[n]=i||!0,t},{})},rt(t)?(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];"lang"===i.name&&(t.lang=i.value),"scoped"===i.name&&(t.scoped=!0),"module"===i.name&&(t.module=i.value||!0),"src"===i.name&&(t.src=i.value)}}(o,e),"style"===t?n.styles.push(o):n[t]=o):n.customBlocks.push(o)),a||i++},end:function(n,a,s){if(1===i&&o){o.end=a;var r=I(t.slice(o.start,o.end));"template"!==o.type&&e.pad&&(r=function(e,n){if("space"===n)return t.slice(0,e.start).replace(st," ");var i=t.slice(0,e.start).split(at).length,o="script"!==e.type||e.lang?"\n":"//\n";return Array(i).join(o)}(o,e.pad)+r),o.content=r,o=null}i--}}),n}var lt=n("DmT9"),ct=n.n(lt),ut=(n("M4fF"),{name:"imjoy",props:["title"],data:function(){return{file_select:null,folder_select:null,selected_file:null,selected_files:null,showPluginDialog:!1,showSettingsDialog:!1,showAddPluginDialog:!1,showAboutEngineDialog:!1,plugin_dialog_config:null,_plugin_dialog_promise:{},loading:!1,progress:0,status_text:"",engine_status:"disconnected",engine_connected:!1,engine_url:"http://localhost:8080",windows:[],panels:{},active_windows:[],preload_main:["/static/tfjs/tfjs.js","https://rawgit.com/nicolaspanel/numjs/893016ec40e62eaaa126e1024dbe250aafb3014b/dist/numjs.min.js"],workflow_joy_config:{expanded:!0,name:"Workflow",ui:"{id:'workflow', type:'ops'}"},default_window_pos:{i:0,x:0,y:0,w:5,h:5},plugins:null,registered:{ops:{},windows:{}},installed_plugins:[],plugin_api:null,plugin_context:null,plugin_loaded:!1,menuVisible:!0,snackbar_info:"",snackbar_duration:3e3,show_snackbar:!1,db:null,store:this.$root.$data.store,api:this.$root.$data.store.api}},watch:{menuVisible:function(){}},created:function(){var t=this;window.onbeforeunload=function(t){return modified?"":null},window.addEventListener("dragover",function(t){t.preventDefault(),document.querySelector("#dropzone").style.visibility="",document.querySelector("#dropzone").style.opacity=1,document.querySelector("#textnode").style.fontSize="48px"}),window.addEventListener("dragenter",function(t){t.preventDefault(),document.querySelector("#dropzone").style.visibility="",document.querySelector("#dropzone").style.opacity=1,document.querySelector("#textnode").style.fontSize="48px"}),window.addEventListener("dragleave",function(t){t.preventDefault(),document.querySelector("#dropzone").style.visibility="hidden",document.querySelector("#dropzone").style.opacity=0,document.querySelector("#textnode").style.fontSize="42px"}),window.addEventListener("drop",function(e){e.preventDefault(),document.querySelector("#dropzone").style.visibility="hidden",document.querySelector("#dropzone").style.opacity=0,document.querySelector("#textnode").style.fontSize="42px",t.selected_files=e.dataTransfer.files,t.loadData()}),this.importScripts.apply(null,this.preload_main).then(function(){console.log("preload done.")})},beforeRouteLeave:function(t,e,n){this.windows&&this.windows.length>0?window.confirm("Do you really want to leave? you have unsaved changes!")?n():n(!1):n()},mounted:function(){var t=this;this.plugin_api={alert:alert,register:this.register,createWindow:this.createWindow,showDialog:this.showDialog,showProgress:this.showProgress,showStatus:this.showStatus,run:this.runPlugin},this.pluing_context={},this.plugin_loaded=!1,this.loading=!0,this.db=new PouchDB("imjoy_plugins",{revs_limit:2,auto_compaction:!0});location.protocol,location.host;setTimeout(function(){t.reloadPlugins()},100)},beforeDestroy:function(){for(var t in console.log("terminating plugins"),this.plugins)if(this.plugins.hasOwnProperty(t)){var e=this.plugins[t];try{"function"==typeof e.terminate&&e.terminate()}catch(t){}}this.plugins=null,this.disconnectEngine()},methods:{show:function(t,e){this.snackbar_info=t,this.snackbar_duration=e||3e3,this.show_snackbar=!0},connectEngine:function(t){var e=this;this.socket&&this.socket.disconnect(),this.engine_status="Connecting, please wait...";var n=ct()(t),i=setTimeout(function(){n&&(e.engine_status="Error: connection timeout, please make sure you have started the plugin engine.",e.show("Error: connection timeout, please make sure you have started the plugin engine.",5e3),n.disconnect())},3e3);n.on("connect",function(t){console.log("plugin engine connected."),clearTimeout(i),e.socket=n,e.engine_connected=!0,e.engine_status="Plugin Engine connected.",e.show("Plugin Engine connected."),e.store.event_bus.$emit("engine_connected",t)}),n.on("disconnect",function(){console.log("plugin engine disconnected."),e.engine_connected=!1,e.show("Plugin Engine disconnected."),e.engine_status="Plugin Engine disconnected.",e.socket=null}),this.socket=n,this.pluing_context.socket=n},disconnectEngine:function(){this.socket&&this.socket.disconnect()},importScript:function(t){return new _.a(function(e,n){var i=document.createElement("script");i.src=t,i.onload=e,i.onreadystatechange=e,i.onerror=n,document.head.appendChild(i)})},importScripts:function(){var t=arguments,e=this;return f()(g.a.mark(function n(){var i,o,a;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=Array.prototype.slice.call(t),o=i.length,a=0;case 1:if(!(a<o)){n.next=7;break}return n.next=4,e.importScript(i[a]);case 4:a++,n.next=1;break;case 7:case"end":return n.stop()}},n,e)}))()},editPlugin:function(t){var e=this.plugins[t.id],n=e.template,i={name:n.name,type:"imjoy/plugin-editor",config:{},plugin:e,reload:this.reloadPlugin,save:this.savePlugin,data:{name:n.name,id:e.id,code:n.code}};this.addWindow(i)},addPlugin:function(){var t={name:"New Plugin",type:"imjoy/plugin-editor",config:{},reload:this.reloadPlugin,save:this.savePlugin,data:{name:"new plugin",id:"plugin_"+P(),code:JSON.parse(m()('\n<docs>\nDescribe your plugin here.\n</docs>\n\n<config>\n{\n  "name": "Untitled Plugin",\n  "type": "image/processing",\n  "mode": "webworker",\n  "tags": ["op", "image"],\n  "ui": "image processing",\n  "version": "0.1.0",\n  "api_version": "0.1.0",\n  "url": "",\n  "description": "A plugin for image processing.",\n  "icon": "extension",\n  "dependencies": []\n}\n</config>\n\n<script>\nclass UntitledPlugin {\n  async setup() {\n    //await importScripts("http://xxxx/xxx.js")\n  }\n\n  run(my) {\n    console.log(\'running in the plugin \', my)\n\n  }\n}\n\napi.export(new UntitledPlugin())\n<\/script>\n\n'))}};this.addWindow(t)},reloadPlugin:function(t){var e=this;return new _.a(function(n,i){if(t.plugin&&t.plugin.id&&delete e.panels[t.plugin.id],t.plugin&&t.plugin.type&&Joy.remove(t.plugin.type),t.plugin&&t.plugin.terminate)try{console.log("terminating plugin ",t.plugin),t.plugin.terminate(),console.log("terminated.")}finally{delete t.plugin}t.plugin=null,console.log("reloading plugin ",t);var o=e.parsePluginCode(t.code,t);("iframe"==o.mode&&o.tags.includes("window")?e.preLoadPlugin(o):e.loadPlugin(o)).then(function(i){n(i),console.log("new plugin loaded",i),t.plugin=i,e.$refs.workflow&&e.$refs.workflow.setupJoy()}).catch(function(e){t.plugin=null,i(e)})})},savePlugin:function(t){var e=this,n=t.code,i=this.parsePluginCode(n,{});i.code=n,i._id=i.name;var o=function(){e.db.put(i,{force:!0}).then(function(t){console.log("Successfully installed!"),e.api.show(i.name+" has been sucessfully saved.")}).catch(function(t){e.api.show("failed to save the plugin."),console.error(t)})};this.db.get(i.name).then(function(t){return e.db.remove(t)}).then(function(t){o()}).catch(function(t){o()})},reloadOps:function(){this.$refs.workflow&&this.$refs.workflow.setupJoy()},reloadPlugins:function(){var t=this;if(this.plugins)for(var e in this.plugins)if(this.plugins.hasOwnProperty(e)){var n=this.plugins[e];if("function"==typeof n.terminate)try{n.terminate()}catch(t){console.error(t)}finally{this.plugins[e]=null}}this.plugins={},this.panels={},this.db.allDocs({include_docs:!0,attachments:!0,sort:"name"}).then(function(e){var n=[];t.plugins={},t.installed_plugins=[];for(var i=0;i<e.total_rows;i++){var o=e.rows[i].doc;t.installed_plugins.push(o);try{var a=t.parsePluginCode(o.code,o);"iframe"==a.mode&&a.tags.includes("window")?n.push(t.preLoadPlugin(a)):n.push(t.loadPlugin(a))}catch(t){console.error(t),alert('error occured when loading plugin "'+o.name+'": '+t.toString())}}t.plugin_loaded=!0,t.loading=!1,t.$forceUpdate()}).catch(function(e){console.error(e),t.loading=!1})},closeAll:function(){this.windows=[],this.default_window_pos={i:0,x:0,y:0,w:5,h:5}},showProgress:function(t){this.progress=t<1?100*t:t},showStatus:function(t){this.status_text=t},addWindow:function(t){this.generateGridPosition(t),this.windows.push(t),this.store.event_bus.$emit("add_window",t)},closePluginDialog:function(t){this.showPluginDialog=!1;var e=c()(this._plugin_dialog_promise,2),n=e[0],i=e[1];t?n(this.$refs.plugin_dialog_joy.joy.data):i(),this._plugin_dialog_promise=null},windowSelected:function(t){console.log("activate window: ",t),this.active_windows=t},generateGridPosition:function(t){t.i=this.default_window_pos.i.toString(),t.w=this.default_window_pos.w,t.h=this.default_window_pos.h,t.x=this.default_window_pos.x,t.y=this.default_window_pos.y,this.default_window_pos.x=this.default_window_pos.x+this.default_window_pos.w,this.default_window_pos.x>=20&&(this.default_window_pos.x=0,this.default_window_pos.y=this.default_window_pos.y+this.default_window_pos.h),this.default_window_pos.i=this.default_window_pos.i+1},loadData:function(){var t={name:"Files",type:"imjoy/files",config:{},data:{files:this.selected_files}};this.addWindow(t)},runWorkflow:function(t){var e=this;console.log("run workflow.",this.active_windows);var n=this.active_windows[this.active_windows.length-1]||{};t.workflow.execute(n.data||{}).then(function(t){t&&!t.op.tags.includes("window")&&(console.log("result",t),t.name="result",t.type="imjoy/generic",t.config=t.data,t.data=t.target,e.createWindow(t)),e.progress=100,e.status_text=""}).catch(function(t){console.error(t),e.status_text=t.toString()||"Error."})},runPanel:function(t,e){var n=this;console.log("run panel.",this.active_windows);var i=this.active_windows[this.active_windows.length-1]||{};t._panel.execute(i.data||{}).then(function(t){t&&!t.op.tags.includes("window")&&(console.log("result",t),t.name="result",t.type="imjoy/generic",t.config=t.data,t.data=t.target,n.createWindow(t)),n.progress=100,n.status_text=""}).catch(function(t){console.error(t),n.status_text=e.name+"->"+(t.toString()||"Error.")})},selectFileChanged:function(t){console.log(t),this.selected_file=t[0],this.selected_files=t},closePanel:function(t){},parsePluginCode:function(t,e){var n=(e=e||{}).url;if(n&&n.endsWith(".js"))e.lang=e.lang||"javascript",e.script=t,e.style=null,e.window=null;else{console.log("parsing the plugin file");var i=dt(t);console.log("code parsed from",i);for(var o=0;o<i.customBlocks.length;o++)if("config"==i.customBlocks[o].type){e=JSON.parse(i.customBlocks[o].content),console.log("loading config from .html file",e);break}e.script=i.script.content,e.lang=i.script.attrs.lang||"javascript";for(var a=0;a<i.customBlocks.length;a++)if("window"==i.customBlocks[a].type){e.window=i.customBlocks[a].content;break}e.window=e.window||null,i.styles.length>0?e.style=i.styles[0].content:e.style=null}if(e._id=e._id||null,e.url=n,e.code=t,e.id=e.name.trim().replace(/ /g,"_")+"_"+P(),!k(e)){var s=k.errors(e);throw console.error("Invalid plugin config: "+e.name,s),s}return e},preLoadPlugin:function(t){var e=this,n={name:t.name,mode:t.mode,type:t.type,tags:t.tags,ui:t.ui};return new _.a(function(i,o){n.id=t.name.trim().replace(/ /g,"_")+"_"+P();var a={id:n.id,name:n.name,type:n.type,config:n,template:t,mode:t.mode};e.plugins[a.id]=a,n.force_show=!1,a.api={run:function(n){var i={};i.type=t.type,i.name=t.name,i.data=n.data,i.config=n.config,e.createWindow(i)}},e.register(n,{id:n.id}),console.log("sucessfully preloaded plugin: ",a),i(a)})},loadPlugin:function(t){var e=this;return t=function t(e){if(!e)return e;var n,i,o;for(o in n=Array.isArray(e)?[]:{},e)i=e[o],n[o]="object"===(void 0===i?"undefined":d()(i))?t(i):i;return n}(t),new _.a(function(n,i){var o={};o.id=t.name.trim().replace(/ /g,"_")+"_"+P(),o.context=e.pluing_context,"pyworker"==t.mode&&(e.socket||console.error("plugin engine is not connected."));var a=new jailed.DynamicPlugin(t,o,e.plugin_api);a.whenConnected(function(){if(!a.api)throw console.error("error occured when loading plugin."),"error occured when loading plugin.";e.plugins[a.id]=a,t.type&&t.ui&&e.register(t,{id:a.id}),a.api.setup().then(function(t){console.log("sucessfully setup plugin: ",a),n(a)}).catch(function(e){console.error("error occured when loading plugin "+t.name+": ",e),i(e),a.terminate()})}),a.whenFailed(function(e){console.error("error occured when loading "+t.name+":",e),alert("error occured when loading "+t.name),a.terminate()})})},runPlugin:function(t,e,n){var i=this;return f()(g.a.mark(function n(){var o;return g.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=i.plugins[t],n.next=3,o.api.run(e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,i)}))()},register:function(t,e){var n,i=this;try{var o=this.plugins[e.id];if(t.mode=t.mode||"webworker",t.show_panel=t.show_panel||!1,console.log("registering op",t),!x(t)){var a=x.errors(t);throw console.error("Error occured during registering "+t.name,a),a}if(t.tags.includes("op")){if(console.log("creating Op: ",t,o),o&&o.api&&o.api.run){var s=(n=f()(g.a.mark(function t(e){var n;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.api.run({op:{name:e.op.name,type:e.op.type},config:e.data,data:e.target});case 2:return n=t.sent,e.data=n&&n.config,e.target=n&&n.data,t.abrupt("return",e);case 6:case"end":return t.stop()}},t,i)})),function(t){return n.apply(this,arguments)});t.onexecute=s}else console.log("WARNING: no run function found in the config, this op won't be able to do anything: "+t.name),t.onexecute=function(){console.log("WARNING: no run function defined.")};if(t.onupdate&&"object"==d()(t.onupdate))for(var r in t.onupdate)if(t.onupdate.hasOwnProperty(r)){var l=o.api[t.onupdate[r]];t.onupdate[r]=l}console.log("adding joy op",t);var c=t;c.init=c.ui,c.ui=null,Joy.add(c),this.$refs.workflow&&this.$refs.workflow.setupJoy(),o.type=t.type,console.log("register op plugin: ",o.template),this.registered.ops[t.type]=o.template;var u={name:t.name,id:e.id,ui:"{id: '_panel', type: '"+t.type+"'}",onexecute:t.onexecute};o.panel_config=u,console.log("creating panel: ",u),this.panels[u.id]=u,this.$forceUpdate()}if(t.tags.includes("window")){if("iframe"!=t.mode)throw'Window plugin must be with type "iframe"';console.log("register window plugin: ",o.template),this.registered.windows[t.type]=o.template}if(t.tags.includes("file_importer"))throw"file importer not supported yet";if(t.tags.includes("file_exporter"))throw"file importer not supported yet";return!0}catch(t){throw console.error(t),t}},renderWindow:function(t){var e=this;console.log("rendering window",t);var n=new jailed.DynamicPlugin(t.plugin,t,this.plugin_api);n.whenConnected(function(){n.api||console.error("the window plugin seems not ready."),e.plugins[n.id]=n,n.api.setup().then(function(i){console.log("sucessfully setup the window plugin: ",n,t),n.api.run({data:t.data,config:t.config,op:t.op}).catch(function(t){e.status_text=n.name+"->"+t,console.error("error in the run function of plugin "+n.name,t)})}).catch(function(e){console.error("error occured when loading the window plugin "+t.name+": ",e),n.terminate()})}),n.whenFailed(function(e){console.error("error occured when loading "+t.name+":",e),alert("error occured when loading "+t.name),n.terminate()})},createWindow:function(t,e){var n=this;try{if(t.config=t.config||{},t.data=t.data||null,t.force_show=t.force_show||!1,t.panel=t.panel||null,!$(t)){var i=$.errors(t);throw console.error("Error occured during creating window "+t.name,i),i}if(console.log("window config",t),t.type.startsWith("imjoy"))return this.addWindow(t),!0;var o=this.registered.windows[t.type];if(console.log(o),!o)throw console.error("no plugin registered for window type: ",t.type),t.type;var a=t;if(a.mode=o.mode,a.id=o.name.trim().replace(/ /g,"_")+"_"+P(),console.log("creating window: ",a),"iframe"!=a.mode)throw'Window plugin must be with mode "iframe"';a.iframe_container="plugin_window_"+a.id+P(),console.log("changing id..."),a.iframe_window=null,a.plugin=o,a.context=this.pluing_context,t.force_show?(a.click2load=!1,a.loadWindow=null,this.showPluginWindow(a).then(function(){n.renderWindow(a)})):(a.click2load=!0,a.renderWindow=this.renderWindow,this.showPluginWindow(a))}catch(t){throw console.error(t),t}return!0},showDialog:function(t,e){var n=this;return new _.a(function(i,o){var a=n.plugins[e.id];if(t.onupdate&&"object"==d()(t.onupdate))for(var s in t.onupdate)if(t.onupdate.hasOwnProperty(s)){var r=a.api[t.onupdate[s]];t.onupdate[s]=r}console.log("creating dialog: ",t,a),n.plugin_dialog_config=t,n.showPluginDialog=!0,n._plugin_dialog_promise=[i,o]})},showPluginWindow:function(t){var e=this;return new _.a(function(n,i){if(t.type=t.type||"joy_panel",t.data=t.data||null,t.config=t.config||{},t.panel=t.panel||null,!$(t)){var o=$.errors(t);throw console.error("Error occured during creating window "+t.name,o),o}console.log("creating plugin window: ",t),e.addWindow(t),console.log("added the window")})}}}),mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"imjoy noselect"},[t._m(0),t._v(" "),n("md-app",[n("md-app-toolbar",{staticClass:"md-dense",attrs:{"md-elevation":"0"}},[n("div",{staticClass:"md-toolbar-section-start"},[t.menuVisible?t._e():n("md-button",{staticClass:"md-primary md-icon-button",on:{click:function(e){t.menuVisible=!0}}},[n("md-icon",[t._v("menu")]),t._v(" "),n("md-tooltip",[t._v("show sidebar")])],1),t._v(" "),t.menuVisible?t._e():n("md-button",{attrs:{to:"/"}},[n("div",{staticClass:"site-title"},[t._v("ImJoy.io"),n("span",{staticClass:"superscript md-small-hide"},[t._v("alpha")])]),t._v(" "),n("md-tooltip",[t._v("ImJoy home")])],1),t._v(" "),n("span",{staticClass:"subheader-title md-medium-hide",staticStyle:{flex:"1"}},[t._v("Image Processing with Joy")])],1),t._v(" "),n("span",{staticClass:"status-text md-small-hide",class:t.status_text.includes("rror")?"error-message":""},[t._v(t._s(t.status_text))]),t._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[n("md-snackbar",{staticClass:"md-accent",attrs:{"md-position":"center","md-active":t.show_snackbar,"md-duration":t.snackbar_duration},on:{"update:mdActive":function(e){t.show_snackbar=e}}},[n("span",[t._v(t._s(t.snackbar_info))]),t._v(" "),n("md-button",{staticClass:"md-accent",on:{click:function(e){t.show_snackbar=!1}}},[t._v("close")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:t.closeAll}},[n("md-icon",[t._v("cancel")]),t._v(" "),n("md-tooltip",[t._v("Close all windows")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button",attrs:{disabled:!0}},[n("md-icon",[t._v("save")]),t._v(" "),n("md-tooltip",[t._v("Save all windows")])],1),t._v(" "),n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end"}},[n("md-button",{staticClass:"md-icon-button",class:t.engine_connected?"md-primary":"md-accent",attrs:{"md-menu-trigger":""}},[n("md-icon",[t._v(t._s(t.engine_connected?"sync":"sync_disabled"))]),t._v(" "),n("md-tooltip",[t._v("Connection to the Plugin Engine")])],1),t._v(" "),n("md-menu-content",[n("md-menu-item",{attrs:{disabled:!0}},[n("span",[t._v(t._s(t.engine_status))])]),t._v(" "),n("md-menu-item",{on:{click:function(e){t.connectEngine(t.engine_url)}}},[n("span",[t._v("Connect")]),t._v(" "),n("md-icon",[t._v("settings_ethernet")])],1),t._v(" "),n("md-menu-item",{on:{click:function(e){t.disconnectEngine()}}},[n("span",[t._v("Disconnect")]),t._v(" "),n("md-icon",[t._v("clear")])],1),t._v(" "),n("md-menu-item",{on:{click:function(e){t.showAboutEngineDialog=!0}}},[n("span",[t._v("About Plugin Engine")]),t._v(" "),n("md-icon",[t._v("info")])],1)],1)],1),t._v(" "),n("md-button",{staticClass:"md-icon-button"},[n("md-icon",[t._v("help")]),t._v(" "),n("md-tooltip",[t._v("Open help information.")])],1)],1)]),t._v(" "),n("md-app-drawer",{attrs:{"md-active":t.menuVisible,"md-persistent":"full"},on:{"update:mdActive":function(e){t.menuVisible=e}}},[n("md-speed-dial",{staticClass:"md-top-left speed-dial",attrs:{"md-event":"hover","md-effect":"scale","md-direction":"bottom"}},[n("md-speed-dial-target",{staticClass:"md-primary"},[n("md-icon",[t._v("add")])],1),t._v(" "),n("md-speed-dial-content",[n("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(e){t.$refs.file_select.openPicker()}}},[n("md-icon",[t._v("insert_drive_file")]),t._v(" "),n("md-tooltip",[t._v("Open a file")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(e){t.$refs.folder_select.openPicker()}}},[n("md-icon",[t._v("folder_open")]),t._v(" "),n("md-tooltip",[t._v("Open a folder")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button md-accent",on:{click:function(e){t.showAddPluginDialog=!0}}},[n("md-icon",[t._v("extension")]),t._v(" "),n("md-tooltip",[t._v("Install or create a new plugin")])],1)],1)],1),t._v(" "),n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-section-start"},[n("md-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("md-file",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"file_select",on:{"md-change":t.selectFileChanged},model:{value:t.folder_select,callback:function(e){t.folder_select=e},expression:"folder_select"}})],1),t._v(" "),n("md-field",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[n("md-file",{ref:"folder_select",attrs:{webkitdirectory:"",mozdirectory:"",msdirectory:"",odirectory:"",directory:"",multiple:""},on:{"md-change":t.selectFileChanged},model:{value:t.file_select,callback:function(e){t.file_select=e},expression:"file_select"}})],1),t._v(" "),n("md-button",{staticClass:"site-button",attrs:{to:"/"}},[n("div",{staticClass:"site-title"},[t._v("ImJoy.io"),n("span",{staticClass:"superscript"},[t._v("alpha")])])])],1),t._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-icon-button md-primary",on:{click:function(e){t.showSettingsDialog=!0}}},[n("md-icon",[t._v("settings")]),t._v(" "),n("md-tooltip",[t._v("Show settings and installed plugins")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button md-dense md-raised",on:{click:function(e){t.menuVisible=!t.menuVisible}}},[n("md-icon",[t._v("keyboard_arrow_left")]),t._v(" "),n("md-tooltip",[t._v("Hide sidebar")])],1)],1)]),t._v(" "),n("br"),t._v(" "),n("md-card",[n("md-card-header",[n("div",{staticClass:"md-layout md-gutter md-alignment-center-space-between"},[n("div",{staticClass:"md-layout-item md-size-70"},[n("span",{staticClass:"md-subheading"},[t._v("Workflow")])]),t._v(" "),n("div",{staticClass:"md-layout-item"},[n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.reloadOps()}}},[n("md-icon",[t._v("autorenew")]),t._v(" "),n("md-tooltip",[t._v("Reload workflow")])],1)],1)])]),t._v(" "),n("md-card-content",[t.plugin_loaded?n("joy",{ref:"workflow",attrs:{config:t.workflow_joy_config,showHeader:!1},on:{run:t.runWorkflow}}):t._e()],1)],1),t._v(" "),t.plugin_loaded?n("div",[n("md-card",[n("md-card-header",[n("div",{staticClass:"md-layout md-gutter md-alignment-center-space-between"},[n("div",{staticClass:"md-layout-item md-size-70"},[n("span",{staticClass:"md-subheading"},[t._v("Plugins")])]),t._v(" "),n("div",{staticClass:"md-layout-item"},[n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.reloadPlugins()}}},[n("md-icon",[t._v("autorenew")]),t._v(" "),n("md-tooltip",[t._v("Reload plugins")])],1)],1)])]),t._v(" "),n("md-card-content",[t._l(t.panels,function(e,i){return n("div",{key:e.id},[n("md-divider"),t._v(" "),n("joy",{attrs:{config:e},on:{edit:t.editPlugin,run:function(n){t.runPanel(n,e)}}})],1)}),t._v(" "),n("md-divider")],2)],1)],1):t._e()],1),t._v(" "),n("md-app-content",{staticClass:"whiteboard-content"},[n("md-progress-bar",{attrs:{"md-mode":"determinate","md-value":t.progress}}),t._v(" "),n("whiteboard",{attrs:{windows:t.windows},on:{select:t.windowSelected}})],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showAboutEngineDialog,"md-click-outside-to-close":!1},on:{"update:mdActive":function(e){t.showAboutEngineDialog=e}}},[n("md-dialog-content",[n("h2",[t._v("About Plugin Engine")]),t._v(" "),n("p",[t._v("Plugin Engine is a Python program running locally(or remotely) on your computer in order to utilize the full computation power of your computer.")]),t._v(" "),n("p",[t._v("With the Plugin Engine running in the background, you can send heavy compuation to the python backend.")]),t._v(" "),n("p",[t._v("TODO: how to setup the plugin engine?")]),t._v(" "),n("p",[t._v("For developers, develop plugin which run in the plugin engine is as easy as javascript plugins.")]),t._v(" "),n("p",[t._v("TODO: how it works?")])]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showAboutEngineDialog=!1}}},[t._v("OK")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showPluginDialog,"md-click-outside-to-close":!1},on:{"update:mdActive":function(e){t.showPluginDialog=e}}},[n("md-dialog-content",[t.plugin_dialog_config?n("div",[n("joy",{ref:"plugin_dialog_joy",attrs:{config:t.plugin_dialog_config,showHeader:!1,controlButtons:!1}})],1):t._e()]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.closePluginDialog(!0)}}},[t._v("OK")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.closePluginDialog(!1)}}},[t._v("Cancel")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showSettingsDialog},on:{"update:mdActive":function(e){t.showSettingsDialog=e}}},[n("md-dialog-content",[n("md-tabs",[n("md-tab",{attrs:{id:"tab-settings","md-label":"General Settings"}},[n("md-field",[n("label",{attrs:{for:"engine_url"}},[t._v("Plugin Engine URL")]),t._v(" "),n("md-input",{attrs:{type:"text",name:"engine_url"},model:{value:t.engine_url,callback:function(e){t.engine_url=e},expression:"engine_url"}})],1),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.connectEngine(t.engine_url)}}},[t._v("Connect Plugin Engine")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.disconnectEngine()}}},[t._v("Disconnect Plugin Engine")]),t._v(" "),n("p",[t._v(t._s(t.engine_status))])],1),t._v(" "),n("md-tab",{attrs:{id:"tab-installed","md-label":"Installed Plugins"}},[n("plugin-list",{attrs:{plugins:t.installed_plugins,title:"Installed Plugins"}})],1),t._v(" "),n("md-tab",{attrs:{id:"tab-plugin-store","md-label":"Plugin Store"}},[n("plugin-list",{attrs:{"config-url":"static/plugins/manifest.json",title:"Available Plugins"}})],1)],1)],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showSettingsDialog=!1}}},[t._v("OK")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showAddPluginDialog},on:{"update:mdActive":function(e){t.showAddPluginDialog=e}}},[n("md-dialog-content",[n("md-subheader",[t._v("Create a New Plugin")]),t._v(" "),n("md-button",{staticClass:"md-primary md-raised",on:{click:function(e){t.addPlugin(),t.showAddPluginDialog=!1}}},[t._v("Create")]),t._v(" "),n("plugin-list",{attrs:{"config-url":"static/plugins/manifest.json",title:"Or, install from the Plugin Store"}})],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showAddPluginDialog=!1}}},[t._v("OK")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{visibility:"hidden",opacity:"0"},attrs:{id:"dropzone"}},[e("div",{attrs:{id:"textnode"}},[this._v("Drop files to add data.")])])}]};var pt=n("VU/8")(ut,mt,!1,function(t){n("GG6k")},"data-v-297be18f",null).exports,gt={name:"about",props:{faq:{type:Boolean,default:!0},footer:{type:Boolean,default:!0}},data:function(){return{router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){},methods:{}},ht={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("md-subheader",[t._v("About ImJoy.io")]),t._v(" "),n("md-card",[n("md-card-header"),t._v(" "),n("md-card-content",{staticClass:"centered-fixed"},[n("md-icon",{staticClass:"md-size-5x md-small-hide",attrs:{"md-src":"static/img/anna-palm-icon-circle.svg"}}),t._v(" "),n("h2",[t._v("Acknowledgements")]),t._v(" "),n("p",[t._v("ImJoy.io project is mainly supported by\n      ")]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.pasteur.fr",target:"_blank"}},[n("img",{attrs:{id:"ip-img",src:"static/img/Institut_Pasteur_logo.svg",alt:"Institut Pasteur"}})])]),t._v(" "),n("br"),t._v(" "),n("md-button",{staticClass:"md-raised",on:{click:t.api.contact}},[t._v("Contact us")])],1)],1),t._v(" "),t.faq?n("faq"):t._e(),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),t.footer?n("md-divider"):t._e(),t._v(" "),t.footer?n("main-footer"):t._e()],1)},staticRenderFns:[]};var ft=n("VU/8")(gt,ht,!1,function(t){n("UpWs")},"data-v-2925121e",null).exports;var vt=n("EFqf"),_t=n.n(vt),wt={name:"faq",data:function(){return{source:"\n\n## How to import script in the plugin?\nThere are two different mode for the plugin to run a certain code: in webworker mode, you can use the original importScripts function, notice that it's synchronized version;\nin iframe mode, we provided a importScripts function, but it's an async version, means you can use promise or await on that.\n\nIn order to unify the code, the recommended way is, if you want to load multiple scripts in order, and use Promise.resolve to normalize the result into a promise.\n\nFor example the following code will behave the same in webworker mode or iframe mode:\n\n```\nPromise.resolve(importScripts(\"https://xxxx/script1.js\", \"https://xxxx/script2.js\")).then(()=>{\n  console.log('scripts loaded.')\n})\n```\n\n\n\n",router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},computed:{compiledMarkdown:function(){return _t()(this.source,{sanitize:!0})}},mounted:function(){},methods:{}},bt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"faq"},[e("md-subheader",[this._v("FREQUENTLY ASKED QUESTIONS")]),this._v(" "),e("md-card",[e("md-card-header"),this._v(" "),e("md-card-content",[e("div",{domProps:{innerHTML:this._s(this.compiledMarkdown)}})])],1)],1)},staticRenderFns:[]};var yt=n("VU/8")(wt,bt,!1,function(t){n("A+BG")},"data-v-62bff1b8",null).exports;i.default.use(o.a);var Ct=new o.a({base:window.location.pathName,routes:[{path:"/",name:"Home",component:s},{path:"/home",redirect:"/"},{path:"/:)",name:":)",component:pt},{path:"/imjoy",name:"Imjoy",component:pt},{path:"/about",name:"About",component:ft},{path:"/faq",name:"FAQ",component:yt},{path:"*",redirect:"/"}]}),kt=n("Lgyv"),xt=n.n(kt),$t=(n("4+hh"),n("giDI"),n("GDE4")),Pt=n.n($t),St={name:"navbar",data:function(){return{snackbar_info:"",snackbar_duration:1e3,showSnackbar:!1,screenWidth:window.innerWidth,router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){var t=this;this.screenWidth=window.innerWidth;this.store.event_bus.$on("resize",function(e){t.screenWidth=e.width})},methods:{shareOnTwitter:function(){window.open("http://twitter.com/share?url="+encodeURIComponent("https://imjoy.io")+"&text="+encodeURIComponent(" #ImJoy "),"","left=0,top=0,width=550,height=450,personalbar=0,toolbar=0,scrollbars=0,resizable=0")}}},jt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"md-toolbar-row"},[n("div",{staticClass:"md-toolbar-row",attrs:{flex:""}},[n("md-button",{attrs:{to:"/"}},[n("div",{staticClass:"site-title"},[t._v("ImJoy.io"),n("span",{staticClass:"superscript"},[t._v("alpha")])])]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:"/"!=t.$route.path,expression:"$route.path!='/'"}],staticClass:"md-layout-item md-medium-hide subheader-title"},[t._v("Image processing with joy.")]),t._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[t.screenWidth<600?n("md-menu",{attrs:{"md-size":"medium"}},[n("md-button",{staticClass:"md-primary md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[t._v("menu")])],1),t._v(" "),n("md-menu-content",[n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/"!=t.$route.path,expression:"$route.path != '/'"}],staticClass:"md-primary md-button menu-button",attrs:{to:"/"}},[t._v("Home")]),t._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/:)"!=t.$route.path,expression:"$route.path != '/:)'"}],staticClass:"md-primary md-button menu-button",attrs:{to:"/:)"}},[t._v("Start ImJoy")]),t._v(" "),n("md-menu-item",{staticClass:"md-primary md-button menu-button",attrs:{href:"https://github.com/oeway/ImJoy"}},[t._v("Source")]),t._v(" "),n("md-menu-item",{staticClass:"md-primary md-button menu-button",on:{click:t.shareOnTwitter}},[t._v("Share")]),t._v(" "),n("md-menu-item",{directives:[{name:"show",rawName:"v-show",value:"/about"!=t.$route.path,expression:"$route.path != '/about'"}],staticClass:"md-primary md-button menu-button",attrs:{to:"/about"}},[t._v("About")])],1)],1):t._e(),t._v(" "),t.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/"!=t.$route.path,expression:"$route.path != '/'"}],staticClass:"md-accent",attrs:{to:"/"}},[n("md-icon",[t._v("home")]),t._v(" Home\n            "),n("md-tooltip",[t._v("Home Page")])],1):t._e(),t._v("\n           \n          "),t.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/:)"!=t.$route.path,expression:"$route.path != '/:)'"}],staticClass:"md-accent",attrs:{to:"/:)"}},[n("md-icon",[t._v("mood")]),t._v(" ImJoy\n            "),n("md-tooltip",[t._v("Start ImJoy App")])],1):t._e(),t._v("\n           \n          "),t.screenWidth>=600?n("md-button",{staticClass:"md-accent",attrs:{href:"https://github.com/oeway/ImJoy",target:"_blank"}},[n("md-icon",{staticClass:"md-size-1x svg-icon",attrs:{"md-src":"static/img/github.svg"}}),t._v("source\n            "),n("md-tooltip",[t._v("Source code on Github")])],1):t._e(),t._v("\n           \n          "),t.screenWidth>=600?n("md-button",{staticClass:"md-accent",on:{click:t.shareOnTwitter}},[n("md-icon",{staticClass:"md-size-1x svg-icon",attrs:{"md-src":"static/img/twitter.svg"}}),t._v("share\n            "),n("md-tooltip",[t._v("Share ImJoy on Twitter")])],1):t._e(),t._v("\n           \n          "),t.screenWidth>=600?n("md-button",{directives:[{name:"show",rawName:"v-show",value:"/about"!=t.$route.path,expression:"$route.path != '/about'"}],staticClass:"md-accent",attrs:{to:"/about"}},[n("md-icon",[t._v("info")]),t._v(" About\n            "),n("md-tooltip",[t._v("About ImJoy.io")])],1):t._e()],1)],1),t._v(" "),n("md-snackbar",{staticClass:"md-accent",attrs:{"md-position":"center","md-active":t.showSnackbar,"md-duration":t.snackbar_duration},on:{"update:mdActive":function(e){t.showSnackbar=e}}},[n("span",[t._v(t._s(t.snackbar_info))]),t._v(" "),n("md-button",{staticClass:"md-accent",on:{click:function(e){t.showSnackbar=!1}}},[t._v("close")])],1)],1)},staticRenderFns:[]};var Dt=n("VU/8")(St,jt,!1,function(t){n("mrKP")},"data-v-66c82b52",null).exports,Et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return"/:)"!=t.$route.path&&"/:)"!=t.$route.path?n("div",{staticClass:"footer"},[n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"md-accent footer-button",attrs:{target:"_blank"},on:{click:function(e){t.contact()}}},[t._v("Ask a question")]),t._v(" "),n("md-button",{staticClass:"md-accent footer-button",attrs:{target:"_blank",href:"https://github.com/oeway/ImJoy/issues"}},[t._v("Create an issue on Github")])],1),t._v(" "),n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"footer-button",attrs:{href:"https://creativecommons.org/licenses/by/4.0/",target:"_blank"}},[n("md-tooltip",[t._v("Except where otherwise noted, content on this site is licensed under a Creative Commons Attribution 4.0 International license.")]),t._v(" "),n("img",{attrs:{id:"cc-by-img",src:"static/img/by.svg",alt:"CC BY 4.0"}}),t._v(" Site content licensed under CC BY 4.0\n    ")],1),t._v(" "),n("md-button",{staticClass:"footer-button",on:{click:function(e){t.mode="about",t.showDialog=!0}}},[t._v("About ImJoy.io")])],1),t._v(" "),n("div",{staticClass:"md-layout md-alignment-center-center"},[n("md-button",{staticClass:"footer-button",attrs:{href:"https://github.com/oeway",target:"_blank"}},[t._v("Made by Wei OUYANG with "),n("span",{staticClass:"red"},[t._v("❤")])]),t._v(" "),n("md-button",{staticClass:"footer-button",attrs:{target:"_blank",href:"https://sites.google.com/site/imagingandmodeling/"}},[t._v("Powered by Imaging and Modeling Unit")]),t._v(" "),t._m(0)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showDialog},on:{"update:mdActive":function(e){t.showDialog=e}}},[n("md-dialog-content",["about"==t.mode?n("about",{attrs:{footer:!1,faq:!1}}):t._e(),t._v(" "),"tos"==t.mode?n("tos"):t._e()],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showDialog=!1}}},[t._v("OK")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showQuestion,id:"question-dialog"},on:{"update:mdActive":function(e){t.showQuestion=e}}},[n("md-toolbar",{staticClass:"md-primary"},[n("div",{staticClass:"md-toolbar-row",attrs:{flex:""}},[n("md-subheader",[t._v("\n          Contact us\n        ")]),t._v(" "),n("div",{staticClass:"md-toolbar-section-end"},[n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.showQuestion=!1}}},[n("md-icon",[t._v("close")])],1)],1)],1)]),t._v(" "),n("md-dialog-content",[n("div",{staticClass:"holds-the-iframe"},[n("iframe",{attrs:{id:"typeform-full",width:"100%",height:"100%",frameborder:"0",src:"https://oeway.typeform.com/to/qyJOIy"}})])]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showQuestion=!1}}},[t._v("Close")])],1)],1)],1):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"https://www.pasteur.fr",target:"_blank"}},[e("img",{attrs:{id:"ip-img",src:"static/img/Institut_Pasteur_logo.svg",alt:"Institut Pasteur"}})])}]};var Wt=n("VU/8")({name:"main-footer",data:function(){return{mode:"about",showDialog:!1,showQuestion:!1,router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){this.api.contact=this.contact},methods:{contact:function(){this.showQuestion=!0}}},Et,!1,function(t){n("8BMv")},"data-v-99787256",null).exports,At=n("woOf"),It=n.n(At),Ot={name:"whiteboard",props:{windows:{type:Array,default:function(){return null}},pluginWindows:{type:Array,default:function(){return null}}},data:function(){return{active_windows:[],dragging:!1,router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},created:function(){this.store.event_bus.$on("add_window",this.onWindowAdd)},mounted:function(){},beforeDestroy:function(){this.store.event_bus.$off("add_window",this.onWindowAdd)},methods:{onWindowAdd:function(t){this.selectWindow(t,{})},close:function(t){console.log("close",t),this.windows.splice(t,1)},fullScreen:function(t){},duplicate:function(t){var e=It()({},t);e.iframe_container&&(e.iframe_container="plugin_window_"+e.id+P()),e.i=e.i+"_",e.click2load||(e.click2load=!0),t.renderWindow&&(e.renderWindow=t.renderWindow),this.windows.push(e)},selectWindow:function(t,e){if(t.selected=!0,this.active_windows.length<=0||this.active_windows[this.active_windows.length-1]!==t){if(!e.shiftKey)for(var n=0;n<this.active_windows.length;n++)this.active_windows[n].selected=!1;e.shiftKey&&this.active_windows.length>0?this.active_windows.push(t):this.active_windows=[t],this.$emit("select",this.active_windows,t)}else if(!e.shiftKey&&this.active_windows.length>1){for(var i=0;i<this.active_windows.length;i++)this.active_windows[i]!==t&&(this.active_windows[i].selected=!1);this.active_windows=[t]}this.$forceUpdate()},startDragging:function(t){this.dragging=!0,this.selectWindow(t,{})},stopDragging:function(){var t=this;setTimeout(function(){t.dragging=!1,t.$forceUpdate()},300)}}},zt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"whiteboard",staticClass:"whiteboard noselect"},[t.dragging?n("div",{staticClass:"overlay",on:{click:function(e){t.dragging=!1}}}):t._e(),t._v(" "),n("grid-layout",{attrs:{layout:t.windows,"col-num":20,"is-mirrored":!1,"auto-size":!0,"row-height":30,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!1,margin:[10,10],"use-css-transforms":!0}},t._l(t.windows,function(e,i){return n("grid-item",{key:e.iframe_container,attrs:{"drag-ignore-from":".ace_editor",x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},on:{resize:function(n){t.startDragging(e)},move:function(n){t.startDragging(e)},resized:function(e){t.dragging=!1},moved:function(e){t.dragging=!1}}},[n("md-card",[n("md-card-expand",[n("md-card-actions",{class:e.selected?"window-selected":"window-header",attrs:{"md-alignment":"space-between"}},[e.panel?n("md-card-expand-trigger",[n("md-button",{staticClass:"md-icon-button"},[n("md-icon",[t._v("keyboard_arrow_down")])],1)],1):t._e(),t._v(" "),e.panel?t._e():n("div"),t._v(" "),n("div",{staticClass:"window-title noselect",on:{click:function(n){t.selectWindow(e,n)}}},[t._v(t._s(e.name+"(#"+e.i+")"))]),t._v(" "),n("div",[n("md-menu",{attrs:{"md-size":"big","md-direction":"bottom-end"}},[n("md-button",{staticClass:"md-icon-button",attrs:{"md-menu-trigger":""}},[n("md-icon",[t._v("more_vert")])],1),t._v(" "),n("md-menu-content",[n("md-menu-item",{on:{click:function(n){n.stopPropagation(),t.duplicate(e)}}},[n("span",[t._v("Duplicate")]),t._v(" "),n("md-icon",[t._v("filter")])],1),t._v(" "),n("md-menu-item",{on:{click:function(n){n.stopPropagation(),t.fullScreen(e)}}},[n("span",[t._v("Fullscreen")]),t._v(" "),n("md-icon",[t._v("fullscreen")])],1),t._v(" "),"main"!=e.type?n("md-menu-item",{on:{click:function(e){t.close(i)}}},[n("span",[t._v("Close")]),t._v(" "),n("md-icon",[t._v("close")])],1):t._e()],1)],1)],1)],1),t._v(" "),e.panel?n("md-card-expand-content",[n("md-card-content",[n("joy",{attrs:{config:e.panel}})],1)],1):t._e()],1),t._v(" "),n("md-card-content",{staticClass:"plugin-iframe-container"},["empty"==e.type?n("md-empty-state",{attrs:{"md-icon":"hourglass_empty","md-label":"IMJOY.IO","md-description":""}}):t._e(),t._v(" "),"imjoy/files"==e.type?n("div",t._l(e.data.files,function(e){return n("md-chip",{key:e.name},[t._v(t._s(e.name))])})):"imjoy/image"==e.type?n("div",[n("img",{attrs:{src:e.data.image}})]):"imjoy/images"==e.type?n("div",t._l(e.data.images,function(t){return n("img",{attrs:{src:t}})})):"imjoy/panel"==e.type?n("div",[n("joy",{attrs:{config:e.config}})],1):"imjoy/generic"==e.type?n("div",t._l(e.data,function(e,i){return n("md-chip",{key:i},[t._v(t._s(i))])})):"imjoy/plugin-editor"==e.type?n("plugin-editor",{attrs:{pluginId:e.data.id,window:e,editorId:"editor_"+e.data.id},model:{value:e.data.code,callback:function(n){t.$set(e.data,"code",n)},expression:"w.data.code"}}):n("div",{staticClass:"plugin-iframe"},[e.click2load?n("md-button",{staticClass:"iframe-load-button",on:{click:function(t){e.click2load=!1,e.renderWindow(e)}}},[t._v("Click to load the window")]):t._e(),t._v(" "),n("div",{staticClass:"plugin-iframe",attrs:{id:e.iframe_container}})],1)],1)],1)],1)})),t._v(" "),n("div",{staticClass:"md-layout md-gutter md-alignment-center-center"},[t.windows&&0!=t.windows.length?t._e():n("md-empty-state",{attrs:{"md-icon":"static/img/anna-palm-icon-circle-animation.svg","md-label":"IMJOY.IO","md-description":""}})],1)],1)},staticRenderFns:[]};var Jt=n("VU/8")(Ot,zt,!1,function(t){n("sw2J")},"data-v-821111b2",null).exports,Ut=this,Rt={name:"joy",props:{showHeader:{type:Boolean,default:function(){return!0}},controlButtons:{type:Boolean,default:function(){return!0}},config:{type:Object,default:function(){return{}}}},data:function(){return{joy:null,isRunning:!1,router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){setTimeout(this.setupJoy,500)},watch:{config:function(t,e){console.log("Prop changed: ",t," | was: ",e),Ut.setupJoy()}},methods:{editSource:function(){this.$emit("edit",this.config)},setupJoy:function(){this.$refs.editor.innerHTML="";var t={container:this.$refs.editor,init:this.config.ui||"",data:this.config.data||Joy.loadFromURL(),modules:this.config.modules||["instructions","math","random"],onexecute:this.config.onexecute};for(var e in this.config)this.config.hasOwnProperty(e)&&e.endsWith("onupdate")&&"function"==typeof this.config[e]&&(t[e]=this.config[e]);console.log("setting up joy ",this.config),this.joy=Joy(t)},runJoy:function(){this.$emit("run",this.joy)},stopJoy:function(){this.$emit("stop")}}},Bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"joy"},[t.showHeader?n("md-button",{staticClass:"md-icon-button",on:{click:t.editSource}},[t.config.icon?n("md-icon",[t._v(t._s(t.config.icon))]):n("md-icon",[t._v("extension")])],1):t._e(),t._v(" "),t.showHeader?n("md-button",{staticClass:"run-button md-primary",on:{click:function(e){t.runJoy()}}},[t._v("\n    "+t._s(t.config.name)+"\n  ")]):t._e(),t._v(" "),t.showHeader?n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.config.expanded=!t.config.expanded,t.$forceUpdate()}}},[t.config.expanded?n("md-icon",[t._v("expand_less")]):n("md-icon",[t._v("expand_more")])],1):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.config.expanded||!t.showHeader,expression:"config.expanded ||!showHeader"}],staticClass:"joy-container"},[n("div",{ref:"editor",staticClass:"joy-editor"}),t._v(" "),t.controlButtons?n("md-button",{staticClass:"md-button md-primary",attrs:{disabled:t.isRunning},on:{click:function(e){t.runJoy()}}},[n("md-icon",[t._v("play_arrow")]),t._v("Run\n        ")],1):t._e(),t._v(" "),t.controlButtons?n("md-button",{staticClass:"md-button md-primary",attrs:{disabled:!t.isRunning},on:{click:function(e){t.stopJoy()}}},[n("md-icon",[t._v("stop")]),t._v("Stop\n        ")],1):t._e()],1)],1)},staticRenderFns:[]};var Tt=n("VU/8")(Rt,Bt,!1,function(t){n("7BL7")},"data-v-24b75a12",null).exports,Nt={name:"plugin-list",props:{configUrl:{type:String,default:null},title:{type:String,default:null},center:{type:Boolean,default:!0},plugins:{type:Array,default:function(){return null}}},data:function(){return{editorCode:"",editorPlugin:null,editorOptions:{},showEditor:!1,containerWidth:500,root_url:null,plugin_dir:null,manifest:null,available_plugins:[],showRemoveConfirmation:!1,_plugin2_remove:null,db:null,router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){var t=this;this.containerWidth=this.$refs.container.offsetWidth,this.store.event_bus.$on("resize",this.updateSize),this.db=new PouchDB("imjoy_plugins",{revs_limit:2,auto_compaction:!0}),this.plugins?(this.available_plugins=this.plugins,this.updatePluginList()):this.configUrl&&b.a.get(this.configUrl).then(function(e){e&&e.data&&e.data.plugins&&(t.manifest=e.data,t.available_plugins=t.manifest.plugins,t.plugin_dir=t.manifest.root_path,t.root_url=location.protocol+"//"+location.host,t.plugin_dir.startsWith("http")||(t.plugin_dir=t.root_url+t.plugin_dir,console.log(t.plugin_dir)),t.updatePluginList())})},beforeDestroy:function(){this.store.event_bus.$off("resize",this.updateSize)},methods:{updateSize:function(){this.containerWidth=this.$refs.container.offsetWidth},updatePluginList:function(){for(var t=this,e=function(e){var n=t.available_plugins[e];console.log(n),n.url&&(n.url.startsWith("http")||(n.url="/"+n.url),n.url=t.plugin_dir+n.url),n._id=n._id||n.name.replace(/ /g,"_"),t.db.get(n._id).then(function(e){n.installed=!0,t.$forceUpdate(),console.log(n)}).catch(function(t){console.log(n.name,t)})},n=0;n<this.available_plugins.length;n++)e(n)},edit:function(t){var e=this;this.db.get(t._id).then(function(n){e.editorCode=n.code,e.editorOptions={mode:"ace/mode/html",selectionStyle:"text"},e.editorPlugin=t,e.showEditor=!0,e.$forceUpdate()}).catch(function(e){console.log("error occured when editing ",t.name,e)})},saveCode:function(){var t=this;this.editorPlugin.code=this.editorCode,this.db.get(this.editorPlugin._id).then(function(e){return t.editorPlugin._id=t.editorPlugin.name.replace(/ /g,"_"),t.editorPlugin._rev=e._rev,t.db.put(t.editorPlugin)}).then(function(e){t.api.show("changes has been saved.")}).catch(function(e){console.error(e),t.api.show("something went wrong during saving.")})},remove:function(t){var e=this;this.db.get(t._id).then(function(t){return e.db.remove(t)}).then(function(n){console.log("plugin has been removed"),e.api.show("the plugin has been removed."),t.installed=!1,e.$forceUpdate()}).catch(function(e){console.log("error occured when removing ",t.name,e)})},install:function(t){var e=this;b.a.get(t.url).then(function(n){if(n&&n.data&&""!=n.data){if(t.code=n.data,t._id=t.name.replace(/ /g,"_"),t.dependencies)for(var i=function(n){var i=e.available_plugins.filter(function(e){return e.name==t.dependencies[n]});i.length<=0?alert(t.name+" plugin depends on "+t.dependencies[n]+", but it can not be found in the repository."):(console.log("installing dependency ",i[0]),i[0].installed||e.install(i[0]))},o=0;o<t.dependencies.length;o++)i(o);var a=function(){e.db.put(t,{force:!0}).then(function(n){console.log("Successfully installed!"),t.installed=!0,e.$forceUpdate(),e.api.show(t.name+" has been sucessfully installed.")}).catch(function(t){e.api.show("failed to install the plugin."),console.error(t)})};e.db.get(t._id).then(function(t){return e.db.remove(t)}).then(function(t){a()}).catch(function(t){a()})}else alert("failed to get plugin code from "+t.url)})}}},Ft={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"plugin-list"},[t.title?n("md-subheader",[t._v(t._s(t.title))]):t._e(),t._v(" "),t._l(t.available_plugins,function(e,i){return t.containerWidth<=500?n("md-card",{key:i},[n("md-card-header",[t._v("\n      "+t._s(e.createdAt)+"\n      "),n("h2",[t._v(t._s(e.name))]),t._v(" "),n("p",[t._v(t._s(e.description))]),t._v(" "),t._l(e.tags,function(e){return n("md-chip",{key:e},[t._v(t._s(e))])})],2),t._v(" "),n("md-card-content",[e.installed?t._e():n("md-button",{staticClass:"md-button md-primary",on:{click:function(n){t.install(e)}}},[n("md-icon",[t._v("cloud_download")]),t._v("Install")],1),t._v(" "),e.installed?n("md-button",{staticClass:"md-button md-primary",on:{click:function(n){t.install(e)}}},[n("md-icon",[t._v("update")]),t._v("Update")],1):t._e(),t._v(" "),e.installed?n("md-button",{staticClass:"md-accent",on:{click:function(n){t._plugin2_remove=e,t.showRemoveConfirmation=!0}}},[n("md-icon",[t._v("delete_forever")]),t._v("Delete")],1):t._e(),t._v(" "),e.installed?n("md-button",{staticClass:"md-button md-primary",on:{click:function(n){t.edit(e)}}},[n("md-icon",[t._v("edit")]),t._v("Edit")],1):t._e()],1)],1):t._e()}),t._v(" "),t.containerWidth>500?n("grid",{staticClass:"grid-container",attrs:{center:t.center,draggable:!1,sortable:!0,items:t.available_plugins,"cell-width":380,"cell-height":280,"grid-width":t.containerWidth},scopedSlots:t._u([{key:"cell",fn:function(e){return[n("md-card",[n("md-card-header",[t._v("\n         "+t._s(e.item.createdAt)+"\n         "),n("h2",[t._v(t._s(e.item.name))]),t._v(" "),n("p",[t._v(t._s(e.item.description))]),t._v(" "),t._l(e.item.tags,function(e){return n("md-chip",{key:e},[t._v(t._s(e))])})],2),t._v(" "),n("md-card-content",[e.item.installed?t._e():n("md-button",{staticClass:"md-button md-primary",on:{click:function(n){t.install(e.item)}}},[n("md-icon",[t._v("cloud_download")]),t._v("Install")],1),t._v(" "),e.item.installed?n("md-button",{staticClass:"md-button md-primary",on:{click:function(n){t.install(e.item)}}},[n("md-icon",[t._v("update")]),t._v("Update")],1):t._e(),t._v(" "),e.item.installed?n("md-button",{staticClass:"md-accent",on:{click:function(n){t._plugin2_remove=e.item,t.showRemoveConfirmation=!0}}},[n("md-icon",[t._v("delete_forever")]),t._v("Delete")],1):t._e(),t._v(" "),e.item.installed?n("md-button",{staticClass:"md-button md-primary",on:{click:function(n){t.edit(e.item)}}},[n("md-icon",[t._v("edit")]),t._v("Edit")],1):t._e()],1)],1)]}}])}):t._e(),t._v(" "),n("br"),t._v(" "),n("md-dialog-confirm",{attrs:{"md-active":t.showRemoveConfirmation,"md-title":"Removing Plugin","md-content":"Do you really want to <strong>delete</strong> this plugin","md-confirm-text":"Yes","md-cancel-text":"Cancel"},on:{"update:mdActive":function(e){t.showRemoveConfirmation=e},"md-cancel":function(e){t.showRemoveConfirmation=!1},"md-confirm":function(e){t.remove(t._plugin2_remove),t.showRemoveConfirmation=!1}}}),t._v(" "),n("md-dialog",{staticClass:"editor-dialog",attrs:{"md-active":t.showEditor},on:{"update:mdActive":function(e){t.showEditor=e}}},[n("md-dialog-content",[n("plugin-editor",{staticClass:"code-editor",attrs:{title:"Plugin Editor",options:t.editorOptions},model:{value:t.editorCode,callback:function(e){t.editorCode=e},expression:"editorCode"}})],1),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(e){t.saveCode(),t.showEditor=!1}}},[t._v("Save")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:function(e){t.showEditor=!1}}},[t._v("Cancel")])],1)],1)],2)},staticRenderFns:[]};var Lt,qt=n("VU/8")(Nt,Ft,!1,function(t){n("lr6I")},"data-v-1d112113",null).exports,Ht=n("bOdI"),Vt=n.n(Ht),Gt=n("lDdF"),Mt=this,Kt=(Lt={name:"joy",props:["value","options","title","pluginId","window"],data:function(){return{router:this.$root.$data.router,store:this.$root.$data.store,api:this.$root.$data.store.api}},watch:{options:function(){Mt.editor.setOptions(Mt.options)}},mounted:function(){var t=this,e="editor_"+this.pluginId;ace.require("ace/tooltip").Tooltip.prototype.setPosition=function(t,n){var i=document.getElementById(e).getBoundingClientRect();n-=i.top-64,t-=i.left,this.getElement().style.left=t+"px",this.getElement().style.top=n+"px"},this.editor=ace.edit(e),ace.config.set("basePath","/static/ace"),this.editor.setOptions({wrap:!1,maxLines:1/0}),this.editor.setTheme("ace/theme/chrome"),this.editor.session.setMode("ace/mode/html"),this.editor.session.on("change",function(e){t.$emit("input",t.editor.getValue())}),this.editor.setValue(this.value)}},Vt()(Lt,"watch",{}),Vt()(Lt,"methods",{save:function(){this.window.save({pluginId:this.pluginId,code:this.editor.getValue()})},reload:function(){var t=this;this.window.reload({pluginId:this.pluginId,code:this.editor.getValue(),plugin:this.window.plugin}).then(function(e){t.window.plugin=e,t.window.name=e.name})},saveAs:function(){var t=this.window.plugin&&this.window.plugin.name?this.window.plugin.name+"_"+P()+".imjoy.html":"plugin_"+P()+".imjoy.html",e=new Blob([this.editor.getValue()],{type:"text/plain;charset=utf-8"});Object(Gt.saveAs)(e,t)}}),Lt),Qt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"plugin-editor"},[n("md-toolbar",{staticClass:"md-dense editor-toolbar",attrs:{"md-elevation":"1"}},[n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.reload()}}},[n("md-icon",[t._v("autorenew")]),t._v(" "),n("md-tooltip",[t._v("Reload the plugin")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.save()}}},[n("md-icon",[t._v("save")]),t._v(" "),n("md-tooltip",[t._v("Save the plugin")])],1),t._v(" "),n("md-button",{staticClass:"md-icon-button",on:{click:function(e){t.saveAs()}}},[n("md-icon",[t._v("cloud_download")]),t._v(" "),n("md-tooltip",[t._v("Export the plugin")])],1)],1),t._v(" "),n("md-content",{staticClass:"editor"},[n("div",{attrs:{id:"editor_"+t.pluginId}})])],1)},staticRenderFns:[]};var Yt=n("VU/8")(Kt,Qt,!1,function(t){n("4lzL")},"data-v-02499e09",null).exports,Xt={debug:!0,event_bus:new i.default,api:{}},Zt={name:"app",data:function(){return{show_navbar:!0,store:this.$root.$data.store,api:this.$root.$data.store.api}},mounted:function(){var t=this;window.location.href.indexOf("navbar=0")>=0&&(this.show_navbar=!1),this.$nextTick(function(){t.store.api.show=t.show;var e=function(e){t.store.windowHeight=window.innerHeight,t.store.windowWidth=window.innerWidth,t.store.event_bus.$emit("resize",{height:t.store.windowHeight,width:t.store.windowWidth})};e(),document.addEventListener("orientationchange",window.onresize=e)})},methods:{show:function(t,e){this.snackbar_info=t,this.snackbar_duration=e||3e3,this.showSnackbar=!0}},watch:{}},te={render:function(){var t=this.$createElement,e=this._self._c||t;return e("md-app",{attrs:{id:"app","md-waterfall":"","md-mode":"fixed"}},[e("md-app-content",[e("router-view")],1)],1)},staticRenderFns:[]};var ee=n("VU/8")(Zt,te,!1,function(t){n("NaKT")},null,null).exports,ne=n("3OQN"),ie=n.n(ne),oe=n("DnPr"),ae=n.n(oe);i.default.config.productionTip=!1,i.default.use(xt.a),i.default.use(ae.a),i.default.component("vue-slider",Pt.a),i.default.component("navbar",Dt),i.default.component("faq",yt),i.default.component("imjoy",pt),i.default.component("main-footer",Wt),i.default.component("about",ft),i.default.component("whiteboard",Jt),i.default.component("joy",Tt),i.default.component("plugin-list",qt),i.default.component("plugin-editor",Yt),i.default.component("grid-layout",ie.a.GridLayout),i.default.component("grid-item",ie.a.GridItem);i.default.filter("truncate",function(t,e,n){n=n||"...";var i=document.createElement("div");i.innerHTML=t;var o=i.textContent;return o.length>e?o.slice(0,e)+n:o}),new i.default({el:"#app",router:Ct,data:{store:Xt,router:Ct},template:"<App/>",components:{App:ee}})},NaKT:function(t,e){},UkRA:function(t,e){},UpWs:function(t,e){},giDI:function(t,e){},lr6I:function(t,e){},mrKP:function(t,e){},sw2J:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f113dd0e7a4c9fb22fbf.js.map